if (self.CavalryLogger) { CavalryLogger.start_js(["gI3Hz"]); }

__d("MessengerSearchSourceUtils",["MessengerConfig","compactArray"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getNullStateEntries:function(a){__p&&__p();var c=a;if(b("MessengerConfig").NSDB)switch(b("MessengerConfig").NSDBT){case"top_friends":c=b("compactArray")(a.map(function(a){return a.getType()==="friend"?a:null}));break;case"top_groups":c=b("compactArray")(a.map(function(a){return a.getType()==="thread"?a:null}));break;case"top_friends_and_groups":var d=b("compactArray")(a.map(function(a){return a.getType()==="thread"?a:null}));a=b("compactArray")(a.map(function(a){return a.getType()==="friend"?a:null})).slice(0,b("MessengerConfig").NSDBNF);c=a.concat(d);break}return c}};e.exports=a}),null);
__d("MessengerSearchSource",["ChatSearchSource","MercuryConfig","MercuryIDs","MercurySingletonProvider","MessengerConfig","MessengerEnvironment","MessengerParticipants.bs","MessengerSearchFunnelLoggerConstants","MessengerSearchSourceUtils","MessengerTypeaheadUtils","SearchableEntry","emptyFunction","requireWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=50,h=b("MessengerEnvironment").messengerui;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return i.getForFBID(a)};c.get=function(){return i.get()};function c(c){var d;d=a.call(this,{queryRequests:[{uri:"/ajax/mercury/composer_query.php"}],searchType:b("MessengerSearchFunnelLoggerConstants").WWW_SIDEBAR_TAG})||this;d.$MessengerSearchSource1=[];d.$MessengerSearchSource2=c;return d}var d=c.prototype;d.getDefaultEntriesStatus=function(){return b("MessengerConfig").NSDB&&this.$MessengerSearchSource1&&this.$MessengerSearchSource1.length>0};d.bootstrapImpl=function(c){var d=this;b("requireWeak")("OrderedFriendsList",function(c){return c.getSearchableEntries(g,!0,function(c){d.$MessengerSearchSource1=b("MessengerSearchSourceUtils").getNullStateEntries(c),a.prototype.addLocalEntries.call(d,c)})});var e=b("MercuryIDs").getParticipantIDFromUserID(this.$MessengerSearchSource2);b("MessengerParticipants.bs").get(e,function(c){a.prototype.addLocalEntries.call(d,[new(b("SearchableEntry"))({uniqueID:c.fbid?c.fbid.toString():c.id,title:c.name,type:"friend",photo:c.big_image_src||c.image_src,uri:c.href,auxiliaryData:{isMessengerUser:c.is_messenger_user}})])});a.prototype.bootstrapImpl.call(this,b("emptyFunction"));c()};d.searchImpl=function(c,d,e){e=e||{};if(c===""&&e.showDefaultEntries){d(this.$MessengerSearchSource1,c);var f=e&&e.onQueryFinished;f&&f("",this.$MessengerSearchSource1);return}e.threadLimit=b("MercuryConfig").MaxThreadResults;a.prototype.searchImpl.call(this,c,this.$MessengerSearchSource3(d,e),e)};d.$MessengerSearchSource3=function(a,c){return h&&c&&c.showThreadSearchEntry?function(c,d){var e=b("MessengerTypeaheadUtils").getMessageSearchEntry(d);e?a([e].concat(c),d):a(c,d)}:a};return c}(b("ChatSearchSource"));var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerSearchTypeahead.react",["cx","fbt","ix","AbstractTypeahead.react","Bootloader","BootloadOnRender.react","CurrentUser","Image.react","JSResource","LazyComponent.react","MercuryIDs","MercuryThreadIDMap","MercuryVanityIDMap.bs","MessengerConfig","MessengerSearchFunnelLoggerConstants","MessengerSearchFunnelState","MessengerSearchLoggerUtil","MessengerSearchSource","MessengerSpinner.react","MessengerState.bs","MessengerUniversalSearchFunnelLoggerConstants","prop-types","React","TypeaheadNavigation","ifRequired","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MercuryThreadIDMap").get(),k=i("86933"),l=100,m=null,n=null;a=b("MessengerUniversalSearchFunnelLoggerConstants").END_ACTIONS;var o=a.ABANDON,p=a.RESULT_SELECTED;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c;c=a.apply(this,arguments)||this;c.state={isLoading:!1,orderable:!!n,gameID:null};c.$6=function(){var a;(a=c.props).onBlur.apply(a,arguments);b("Bootloader").loadModules(["MessengerSearchFunnelLogger","MessengerUniversalSearchFunnelLogger"],function(a,d){a.endFunnel(b("MessengerSearchFunnelLoggerConstants").NAME),!c.$17?d.endFunnel(b("MessengerUniversalSearchFunnelLoggerConstants").END_REASONS.END_ACTION,o):(d.endFunnel(b("MessengerUniversalSearchFunnelLoggerConstants").END_REASONS.END_ACTION,p),c.$17=!1)},"MessengerSearchTypeahead.react");c.setState({isLoading:!1})};c.$7=function(){var a;(a=c.props).onChange.apply(a,arguments)};c.$8=function(){c.$9();c.$3!==null&&c.props.onFocus(c.$3.getDefaultEntriesStatus());var a=Math.floor(Math.random()*65536);c.$2.setSessionID(a);b("Bootloader").loadModules(["MessengerSearchFunnelLogger","MessengerUniversalSearchFunnelLogger"],function(a,d){a.startFunnel(b("MessengerSearchFunnelLoggerConstants").NAME,b("MessengerSearchFunnelLoggerConstants").WWW_SIDEBAR_TAG,b("MessengerSearchFunnelLoggerConstants").UNIVERSAL_SEARCH),d.startFunnel(b("MessengerUniversalSearchFunnelLoggerConstants").ENTRY_SURFACES.SIDEBAR,b("MessengerUniversalSearchFunnelLoggerConstants").INTERFACES.WWW,c.$2)},"MessengerSearchTypeahead.react")};c.$9=function(){c.state.orderable||b("Bootloader").loadModules(["MessengerTypeaheadView.react","MessengerTypeaheadUtils"],function(a,d){b("ifRequired")("FantaTabsEagerBootloader",function(a){return a.bootload()}),m=a,n=d,c.setState({orderable:!0})},"MessengerSearchTypeahead.react")};c.$13=function(a){a===c.props.queryString&&c.setState({isLoading:!0})};c.$12=function(a,d){a===c.props.queryString&&(a===""&&d!=null&&d.length>0&&b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){a.logNullStateImpressions(d,c.props.maxEntries)},"MessengerSearchTypeahead.react"),c.setState({isLoading:!1}))};c.$14=function(a,d){b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(e){e.logSourceEnded(a,b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_XCONTROLLER,d,b("MessengerUniversalSearchFunnelLoggerConstants").QUERY_PROGRESS.FINISHED,a===c.props.queryString)},"MessengerSearchTypeahead.react")};c.$11=function(a){return n?n.sortEntries(a,c.props.queryString):a};c.$1=function(){c.setState({gameID:null})};c.$10=function(a,d){__p&&__p();d=a.getUniqueID();var e=a.getType();a=a.getAuxiliaryData().alias;var f=c.props.queryString;a&&b("MercuryVanityIDMap.bs").set(a,b("MercuryIDs").getParticipantIDFromUserID(d));c.$17=!0;if(e==="thread")j.getClientIDFromServerID(d,function(a){c.props.onSelect(a,e),b("Bootloader").loadModules(["MessengerSearchFunnelLogger","MessengerUniversalSearchFunnelLogger"],function(c,d){c.logResultSelection(b("MessengerSearchFunnelLoggerConstants").NAME,f,a,b("MessengerSearchFunnelLoggerConstants").GROUP),d.logResultSelected(f,a,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_TYPES.GROUP,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD)},"MessengerSearchTypeahead.react")});else if(e==="game")c.setState({gameID:d});else{var g=b("MessengerSearchLoggerUtil").getLoggingTypeFromMercuryType(e);b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),b("MercuryIDs").getThreadIDFromUserID(d),function(a){c.props.onSelect(a.thread_id,e),b("Bootloader").loadModules(["MessengerSearchFunnelLogger","MessengerUniversalSearchFunnelLogger"],function(c,d){c.logResultSelection(b("MessengerSearchFunnelLoggerConstants").NAME,f,a.thread_id,g),d.logResultSelected(f,a.thread_id,g,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD)},"MessengerSearchTypeahead.react")})}};babelHelpers.assertThisInitialized(c).$1=c.$1.bind(babelHelpers.assertThisInitialized(c));c.$2=new(b("MessengerSearchFunnelState"))();c.$3=b("MessengerSearchSource").getForFBID(c.props.viewer);return c}var d=c.prototype;d.UNSAFE_componentWillMount=function(){__p&&__p();var a=this,c=function(a,b,c){b=a.indexOf(b);b=b==-1?a.length-1:b-1;c(b==-1?a[a.length-1]:a[b])},d=function(a,b,c){b=a.indexOf(b)+1;c(b==a.length?a[0]:a[b])};c=b("TypeaheadNavigation").moveDown;d=b("TypeaheadNavigation").moveUp;this.$4=function(b){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return c.apply(void 0,[n.orderEntries(b,a.props.queryString)].concat(e))};this.$5=function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];return d.apply(void 0,[n.orderEntries(b,a.props.queryString)].concat(e))}};d.render=function(){var a=this,c=this.props.isFacebookChat?h._("Search"):h._("Search Messenger"),d=b("CurrentUser").isWorkUser()?h._("coworkers to message"):h._("friends to message");return b("React").jsxs("div",{className:"_1nq2",children:[b("React").jsx(b("AbstractTypeahead.react"),{"aria-label":d,autoHighlight:this.props.isFacebookChat,blurOnWindowBlur:!1,className:b("joinClasses")(this.props.className||"","_5iwm"+(this.props.isFocused||!!this.props.queryString?" _5iwn":"")+" _150g"+(this.props.isMessageSearchMode?" _1a03":"")),disabled:this.props.isMessageSearchMode,inputClassName:"_3rhb navigationFocus",navigation:{moveUp:this.$4,moveDown:this.$5},onBlur:this.$6,onChange:this.$7,entryFilter:void 0,onFocus:this.$8,onMouseOver:this.$9,onClick:this.$9,onSelectAttempt:this.$10,placeholder:c.toString(),presenter:{ViewRenderer:m,alwaysVisibleOnFocus:!0,extraRendererProps:{className:"_11_d",hasHoverState:this.props.isFacebookChat,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer},maxEntries:this.props.maxEntries||l,sortEntries:this.$11,useLayer:!1},queryString:this.props.queryString,role:"search",searchSource:this.$3,searchSourceOptions:{loggingID:this.$2.getSessionID(),onQueryFinished:this.$12,onQueryStarted:this.$13,onResponseReturned:this.$14,showDefaultEntries:this.props.isFacebookChat?b("MessengerConfig").NSDB:!0,showThreadSearchEntry:!this.props.isFacebookChat&&!!this.props.queryString},selectOnTab:!0,spellCheck:!1,showEntriesOnFocus:this.props.isFacebookChat?b("MessengerConfig").NSDB:!0}),b("React").jsx(b("Image.react"),{onMouseDown:function(){var b;a.$15();(b=a.props).onClear.apply(b,arguments)},className:b("joinClasses")(this.props.className||"",(this.props.queryString?"":"hidden_elem")+" _2xme"),src:k}),this.$16()]})};d.$16=function(){return!this.state.gameID?null:b("React").jsx(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerGamesQuicksilverPlayerContainer.react").__setRef("MessengerSearchTypeahead.react"),placeholder:b("React").jsx(b("MessengerSpinner.react"),{}),component:b("React").jsx(b("LazyComponent.react"),{initialContextType:"SOLO",initialGameID:this.state.gameID,onHide:this.$1,initialSource:"messenger_search",sourceID:null})})};d.$15=function(){b("Bootloader").loadModules(["MessengerSearchFunnelLogger"],function(a){a.logClearQuery(b("MessengerSearchFunnelLoggerConstants").NAME)},"MessengerSearchTypeahead.react")};return c}(b("React").PureComponent);c.propTypes={className:(d=b("prop-types")).string,isMessageSearchMode:d.bool,isFacebookChat:d.bool,isFocused:d.bool,maxEntries:d.number,onBlur:d.func,onChange:d.func,onClear:d.func,onFocus:d.func,onSelect:d.func.isRequired,onScrollIntoView:d.func,queryString:d.string,viewer:d.string.isRequired};e.exports=c}),null);
__d("ChatTypeaheadWrapper.react",["cx","Arbiter","Bootloader","ChatOpenTabEventLogger","ChatSidebarActions","ChatSidebarComposeLink.react","ChatSidebarDropdown.react","ChatSidebarGroupCreateButtonReact.bs","ChatSidebarSheet.react","ChatTypeaheadConstants","FantaTabActions","MercuryIDs","MessengerConfig","MessengerSearchTypeahead.react","React","WorkSMBHelpSidebar","emptyFunction","getActiveElement","gkx","ifRequired","qex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("WorkSMBHelpSidebar").module,i=40;function j(a){b("Arbiter").inform("sidebar/typeahead/active",a)}var k=b("qex")._("1211265"),l=b("qex")._("1211264");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={height:0,value:c.getInitialQueryString(),isSearching:!!c.getInitialQueryString()},c.$1=function(){c.setState({isSearching:!1,value:""})},c.$2=function(a){a&&c.setState({isSearching:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getInitialQueryString=function(){var a="";b("gkx")("678264")&&b("ifRequired")("ChatTypeaheadCore",function(b){a=b.getLastSearchQuery()});return a?a:""};d.componentDidMount=function(){var a=this;b("gkx")("678264")&&(b("ifRequired")("ChatTypeaheadCore",function(a){a.processInteractionsQueue()}),this.getInitialQueryString()!==""&&j(!0));this.props.isSidebar?b("Arbiter").subscribe("sidebar/resized",function(b,c){a.setState({height:c})}):b("Arbiter").subscribe("buddyList/resized",function(b,c){a.setState({height:c})})};d.UNSAFE_componentWillUpdate=function(a,b){b.isSearching!==this.state.isSearching&&j(b.isSearching)};d.render=function(){__p&&__p();var a=this,c=this.state.height!=null?Math.floor((this.state.height-i*2)/i):null;return b("React").jsxs("div",{id:"chatsearch",children:[!this.state.isSearching&&h&&b("React").jsx(h,{}),b("gkx")("678264")?null:b("React").jsx(b("ChatSidebarSheet.react"),{className:"fbChatSidebarMessage",viewer:this.props.id,isSidebar:this.props.isSidebar}),k?null:b("React").jsx(b("MessengerSearchTypeahead.react"),{className:"_62it",isFacebookChat:!0,isFocused:!0,maxEntries:c,queryString:this.state.value,viewer:this.props.id,onBlur:this.$1,onChange:function(c){var d=c.target.value;b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){a.logQueryChanged(d)},"ChatTypeaheadWrapper.react");a.setState({isSearching:d!==""||b("MessengerConfig").NSDB===!0,value:d})},onClear:b("emptyFunction"),onFocus:this.$2,onScrollIntoView:b("emptyFunction"),onSelect:function(c,d){__p&&__p();var e=b("getActiveElement")();e&&e.blur();if(d===b("ChatTypeaheadConstants").MEETING_ROOM_PAGE_TYPE)b("Bootloader").loadModules(["goURI"],function(d){a.setState({isSearching:!1,value:""});var e=b("MercuryIDs").getUserIDFromThreadID(c);d("/"+(e||""))},"ChatTypeaheadWrapper.react");else{b("FantaTabActions").openTab(c,["fb_search:chat_sidebar_typeahead"]);e=null;(!d||d==="friend"||d===b("ChatTypeaheadConstants").FRIEND_TYPE||d===b("ChatTypeaheadConstants").PAGE_TYPE||d===b("ChatTypeaheadConstants").USER_TYPE)&&(b("MercuryIDs").isValidThreadID(c)&&(e=b("MercuryIDs").getUserIDFromThreadID(c)));b("ChatOpenTabEventLogger").logClickOpen("typeahead",c,e)}}}),this.props.isSidebar?b("React").jsxs("div",{className:"_531b",children:[b("React").jsx(b("ChatSidebarDropdown.react"),{sidebarType:"sidebar",onToggleSidebar:b("ChatSidebarActions").disable}),b("React").jsx(b("ChatSidebarComposeLink.react"),{className:"_3a-4 _5q85"}),l?null:b("React").jsx(b("ChatSidebarGroupCreateButtonReact.bs").make,{viewer:this.props.id})]}):null]})};return c}(b("React").Component);e.exports=a}),null);