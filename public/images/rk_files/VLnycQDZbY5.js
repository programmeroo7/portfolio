if (self.CavalryLogger) { CavalryLogger.start_js(["TpBk1"]); }

__d("FantaTabActions",["Bootloader","CurrentUser","Env","FantaDispatcher","MessengerURIConstants","URI","WebMessengerThreadPermalinks","WorkGalahadSettings","WorkplaceChatHelper","goURI","ifRequired","keyMirror","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("keyMirror")({BLUR_TAB:null,CLEAR_PAGE_INDICATOR_DESCRIPTION:null,CLOSE_ALL_TABS:null,CLOSE_AND_TAB_NEXT:null,CLOSE_TAB:null,DELETE_TAB:null,FOCUS_NEXT_TAB:null,FOCUS_PREVIOUS_TAB:null,FOCUS_TAB:null,HIGHLIGHT_NEW_MESSAGE:null,HOVERED_TAB:null,JUMP_TO_MESSAGE:null,LOAD_FROM_DATA:null,MINIMIZE_ALL_TABS:null,MINIMIZE_TAB:null,OPEN_TAB_WITH_INTERSTITIAL_DATA:null,OPEN_TAB:null,OPT_IN_OPEN_TAB_WITH_BLOCKEES:null,CLOSE_GROUP_ENTRANCE_WARNING_DIALOG:null,REPLACE_TAB:null,SCROLL_BOTTOM_CHANGED:null,SET_ALLOWED_RAISED_TABS:null,SET_MESSAGE_COUNT:null,SET_PAGE_INDICATOR_DESCRIPTION:null,SET_PERMANENT_URI:null,SHOW_UNSEEN_MESSAGES:null,UNHIGHLIGHT_NEW_MESSAGE:null,UNHOVERED_TAB:null,UNMINIMIZE_TAB:null,WIPE_JUMP_TO_MESSAGE:null,CREATE_NEW_NAMED_GROUP_CHAT:null});function j(a,c){var d=a?new(g||(g=b("URI")))(b("WebMessengerThreadPermalinks").getThreadURIFromServerID(a)):new(g||(g=b("URI")))(b("MessengerURIConstants").COMPOSE_SUBPATH);b("ifRequired")("BusinessURI.brands",function(a){return b("goURI")(a(d))},function(){return b("setTimeout")(function(){k.openTab(a,c)},100)})}var k={Types:i,openNewMessageTab:function(a,b,c){k.openTab(a,b,c,!0)},openTab:function(a,c,d,e,f){__p&&__p();var g=this;if((h||(h=b("Env"))).isCQuick){b("Bootloader").loadModules(["BlueCompatRouter"],function(b){b.startChat(a||"")},"FantaTabActions");return}if(b("CurrentUser").isWorkUser()&&b("WorkGalahadSettings").isGalahadEnabled){var k=b("ifRequired")("WorkGalahadChat",function(b){b.openThreadFromThreadID(a);return!0},function(){return!1});if(k)return}b("ifRequired")("FantaTabsEagerBootloader",function(a){return a.bootload()});this.dispatchOrBootloadGetMessages(function(){b("FantaDispatcher").dispatch({type:i.OPEN_TAB,tabID:a,entryPoint:c,defaultText:d,isNewMessageTab:e,defaultPreview:f}),b("ifRequired")("FantaTabsReactApp",function(b){g._tryLoadSlimApp(a,c)},function(){g._tryLoadSlimApp(a,c,function(){return j(a,c)})})})},openInterstitialTab:function(a,c,d){var e=this;this.dispatchOrBootloadGetMessages(function(){b("FantaDispatcher").dispatch({type:i.OPEN_TAB_WITH_INTERSTITIAL_DATA,tabID:a,interstitialData:c,entryPoint:d}),b("ifRequired")("FantaTabsReactApp",function(b){e._tryLoadSlimAppWithInterstitialData(a,c,d)},function(){e._tryLoadSlimAppWithInterstitialData(a,c,d)})})},_tryLoadSlimApp:function(a,c,d){b("ifRequired")("FantaTabsSlimApp",function(d){b("ifRequired")("FantaAppStore",function(){},function(){d.getPumpedUp(function(){b("FantaDispatcher").dispatch({type:i.OPEN_TAB,tabID:a,entryPoint:c})})})},function(){return d&&d(a)})},_tryLoadSlimAppWithInterstitialData:function(a,c,d){b("ifRequired")("FantaTabsSlimApp",function(e){b("ifRequired")("FantaAppStore",function(){},function(){e.getPumpedUp(function(){b("FantaDispatcher").dispatch({type:i.OPEN_TAB_WITH_INTERSTITIAL_DATA,tabID:a,interstitialData:c,entryPoint:d})})})})},replaceTab:function(a,c){b("FantaDispatcher").dispatch({type:i.REPLACE_TAB,tabID:a,newTabID:c})},minimizeTab:function(a){b("FantaDispatcher").dispatch({type:i.MINIMIZE_TAB,tabID:a})},minimizeAllTabs:function(){b("FantaDispatcher").dispatch({type:i.MINIMIZE_ALL_TABS})},unminimizeTab:function(a){b("FantaDispatcher").dispatch({type:i.UNMINIMIZE_TAB,tabID:a})},optInOpenTabWithBlockees:function(a){b("FantaDispatcher").dispatch({type:i.OPT_IN_OPEN_TAB_WITH_BLOCKEES,tabID:a})},closeGroupEntranceWarningDialog:function(a){b("FantaDispatcher").dispatch({type:i.CLOSE_GROUP_ENTRANCE_WARNING_DIALOG,tabID:a})},closeTab:function(a){b("FantaDispatcher").dispatch({type:i.CLOSE_TAB,tabID:a})},closeAllTabs:function(){b("FantaDispatcher").dispatch({type:i.CLOSE_ALL_TABS})},closeAndTabNext:function(a){b("FantaDispatcher").dispatch({type:i.CLOSE_AND_TAB_NEXT,tabID:a})},deleteTab:function(a){b("FantaDispatcher").dispatch({type:i.DELETE_TAB,tabID:a})},focusTab:function(a){b("FantaDispatcher").dispatch({type:i.FOCUS_TAB,tabID:a})},blurTab:function(a){b("FantaDispatcher").dispatch({type:i.BLUR_TAB,tabID:a})},hoveredTab:function(a){b("FantaDispatcher").dispatch({type:i.HOVERED_TAB,tabID:a})},unhoveredTab:function(a){b("FantaDispatcher").dispatch({type:i.UNHOVERED_TAB,tabID:a})},highlightNewMessage:function(a){b("FantaDispatcher").dispatch({type:i.HIGHLIGHT_NEW_MESSAGE,tabId:a})},unhighlightNewMessage:function(a){b("FantaDispatcher").dispatch({type:i.UNHIGHLIGHT_NEW_MESSAGE,tabId:a})},setAllowedRaisedTabs:function(a){b("FantaDispatcher").dispatch({type:i.SET_ALLOWED_RAISED_TABS,allowedRaisedTabs:a})},loadFromData:function(a){if(b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop())return;this.dispatchOrBootloadGetMessages(function(){a&&b("FantaDispatcher").dispatch({type:i.LOAD_FROM_DATA,tabData:a})})},focusNextTab:function(a){b("FantaDispatcher").dispatch({type:i.FOCUS_NEXT_TAB,event:a})},focusPreviousTab:function(a){b("FantaDispatcher").dispatch({type:i.FOCUS_PREVIOUS_TAB,event:a})},scrollBottomChanged:function(a,c,d){b("FantaDispatcher").dispatch({type:i.SCROLL_BOTTOM_CHANGED,isScrolledToBottom:c,tabID:a,showUnseenMessages:d})},jumpToMessage:function(a,c){b("FantaDispatcher").dispatch({type:i.JUMP_TO_MESSAGE,mid:c,tabID:a})},wipeJumpToMessage:function(a){b("FantaDispatcher").dispatch({type:i.WIPE_JUMP_TO_MESSAGE,tabID:a})},setPageIndicatorDescription:function(a,c){b("FantaDispatcher").dispatch({type:i.SET_PAGE_INDICATOR_DESCRIPTION,tabID:a,description:c})},clearPageIndicatorDescription:function(a){b("FantaDispatcher").dispatch({type:i.CLEAR_PAGE_INDICATOR_DESCRIPTION,tabID:a})},showUnseenMessages:function(a){b("FantaDispatcher").dispatch({type:i.SHOW_UNSEEN_MESSAGES,tabID:a})},setPermanentUri:function(a,c){b("FantaDispatcher").dispatch({type:i.SET_PERMANENT_URI,tabID:a,uri:c})},createNewNamedGroupChat:function(a,c){b("FantaDispatcher").dispatch({type:i.CREATE_NEW_NAMED_GROUP_CHAT,tabID:a,tokens:c})},dispatchOrBootloadGetMessages:function(a){b("ifRequired")("FantaReducersGetMessages",function(){a()},function(){b("ifRequired")("FantaAppStore",function(c){b("Bootloader").loadModules(["FantaReducersGetMessages"],function(b){c.addReducers(b),a()},"FantaTabActions")},function(){a()})})}};e.exports=k}),null);
__d("FBID.bs",["invariant","bs_belt_Id","gkx","bs_js_types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b){return b.localeCompare(a)|0}d=b("bs_belt_Id").MakeComparable({cmp:a});e=d.cmp;function h(a){if(b("gkx")("678626")){b("bs_js_types").test(a,4)||g(0,3515,a);a!=="0"||g(0,3516,a);var c=/^[0-9]+$/;c.test(a)||g(0,3517,a)}return a}function c(a){try{return h(a)}catch(a){return}}f.cmp=e;f.compare=a;f.ofString=c;f.ofStringExn=h}),null);
__d("MessageThreadUnsendabilityStatus.bs",["MessageThreadUnsendabilityStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a==null)return null;else switch(a){case"can_unsend":return b("MessageThreadUnsendabilityStatus").CAN_UNSEND;case"deny_for_specific_ids":return b("MessageThreadUnsendabilityStatus").DENY_FOR_SPECIFIC_IDS;case"deny_if_cannot_load_thread":return b("MessageThreadUnsendabilityStatus").DENY_IF_CANNOT_LOAD_THREAD;case"deny_if_marketplace_thread":return b("MessageThreadUnsendabilityStatus").DENY_IF_MARKETPLACE_THREAD;case"deny_if_page_thread":return b("MessageThreadUnsendabilityStatus").DENY_IF_PAGE_THREAD;case"deny_if_thread_contains_pau":return b("MessageThreadUnsendabilityStatus").DENY_IF_THREAD_CONTAINS_PAU;default:return null}}f.fromNullableString=a}),null);
__d("MessageSharedMediaIDStore.bs",["bs_js_dict"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a,b){g[a]=b;return 0}function c(a){a=b("bs_js_dict").get(g,a);if(a!==void 0)return a;else return null}f._store=g;f.setMessageIDForAttachmentID=a;f.getMessageIDForAttachmentID=c}),null);
__d("MessengerStoryAttachmentTransformer.bs",["fbt","URI","bs_string","bs_js_dict","bs_caml_array","bs_belt_Option","bs_caml_format","bs_caml_option","CurrentUser","FundsAvailability","bs_js_null_undefined","P2PTransferStatus","MNCommerceBubbleType","PaymentModulesClient","MercuryAttachmentType","bs_caml_builtin_exceptions","P2PPaymentRequestStatus","ServicesCalendarSyncType","MNCommerceCallToActionType","LeadGenInfoFieldTypes"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;function i(a){return a.map(function(a){var c=a.user_confirmation;c=c==null?[null,null,null,null,!1]:[c.cancel_button_label,c.continue_button_label,c.confirmation_message,c.confirmation_title,!0];var d=a.payment_metadata;return{action_link:a.action_link,action_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MNCommerceCallToActionType"),a.action_open_type)),action_objects:a.action_objects,title:a.title,confirmation_cancel_label:c[0],confirmation_continue_label:c[1],confirmation_message:c[2],confirmation_title:c[3],id:a.id,is_disabled:a.is_disabled,is_mutable_by_server:a.is_mutable_by_server,logging_token:a.logging_token,payment_metadata:d==null?{payment_module_config:null,total_price:null}:{payment_module_config:d.payment_module_config,total_price:d.total_price},render_style:a.render_style,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button},should_show_user_confirmation:c[4],page_id:a.page_id}})}function j(a){return a.map(function(a){var c=a.url;c=c==null?null:new(h||(h=b("URI")))(c).getUnqualifiedURI().toString();return{title:a.title,uri:c}})}function a(a){if(!(a==null)&&a!=="")return"#"+b("bs_string").sub(a,2,a.length-2|0);else return null}function c(a){if(a==null)return null;else return{url:a.uri,src:a.uri,width:a.width,height:a.height}}function k(a,b){__p&&__p();var c=b.cover_photo,d;if(c==null)d=[null,null,null];else{var e=c.photo.image;e=e==null?[null,null]:[e.uri,{height:e.height,width:e.width}];d=[c.photo.id,e[0],e[1]]}c=b.location;e=c==null?[null,null]:[c.latitude,c.longitude];c=b.overall_star_rating;return{address:b.address.single_line_full_address,category:b.top_category_name,coverPhotoID:d[0],coverPhotoURL:d[1],coverPhotoDimensions:d[2],latitude:e[0],longitude:e[1],name:b.name,rating:c==null?null:c.value,pageID:b.id,priceRange:b.price_range_description,viewerID:a}}function l(a){var b=a.group_commerce_item_seller,c=a.primary_photo,d;if(c==null)d=null;else{c=c.image;d=c==null?null:c.uri}return{caption:a.group_commerce_item_description.text,desc:a.group_commerce_item_description.text,owner_id:b==null?null:b.id,price:a.formatted_price.text,text:a.group_commerce_item_description.text,title:a.group_commerce_item_title,thumb_url:d,url:a.url}}function m(a){return{app_name:a.application_name,artists:a.artist_names,audio_url:a.audio_url,duration_ms:a.duration_ms,title:a.music_title}}function n(a){var c=a.payment;return{id:a.id,desc:a.desc,display_total_cost:a.total_cost,merchant_name:a.merchant_name,target_url:a.target_url,thumb_url:a.thumb_url,raw_amount:a.raw_amount,payment_id:c==null?null:c.id,total_cost:{amount:b("bs_caml_format").caml_float_of_string(a.price_amount),currency:a.price_currency},name:a.name}}function o(a){return{fundraiserID:a.fundraiserID,canDonate:a.canDonate,hasViewerDonated:a.hasViewerDonated,fundraiserDetailedProgressText:a.fundraiserDetailedProgressText,fundraiserSubtitleText:a.fundraiserSubtitleText,focusedCoverPhoto:a.focusedCoverPhoto}}function p(a){return{id:a.id,name:a.name,is_malicious:a.is_malicious,attach_type:b("MercuryAttachmentType").FILE,url:a.uri,extension:a.extension,filesize:a.filesize}}function q(a){return{id:a.id,url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").VIDEO,url:a.playable_url,extension:a.extension,filesize:a.filesize,name:a.filename,height:a.height,width:a.width}}function r(a){return{id:a.id,name:a.name,desc:a.desc,thumb_url:a.thumb_url,item_url:a.item_url,title:a.name,text:a.desc,source:a.source,image_aspect_ratio:a.image_aspect_ratio,metalines:{metaline_1:a.first_metaline,metaline_2:a.second_metaline,metaline_3:a.third_metaline},default_action:a.default_action,call_to_actions:i(a.call_to_actions)}}function s(a){__p&&__p();var c=function(a){a=a.services_vertical_info;if(a==null)return;else return{isEligibleForAppointmentCalendar:a.is_eligible_for_appointment_calendar,timezoneName:a.time_zone_name}},d=a.page;c=d==null?[void 0,void 0,void 0]:[d.id,b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("ServicesCalendarSyncType"),d.calendar_sync_type)),c(d)];d=a.native_component_flow_request;var e;if(d==null)e=null;else{var f=d.page,h=d.page,i=d.page,j;if(i==null)j=void 0;else{i=i.profile_picture;j=i==null?void 0:i.uri}i=d.suggested_time_range;var k=d.user,l=d.user,m=d.job_application,n=d.user,o;if(n==null)o=void 0;else{n=n.profile_picture;o=n==null?void 0:n.uri}e={additionalInfo:d.additional_info,appointmentAddress:d.appointment_address,archivedStatus:d.archived_status,availability:d.availability,consumer_phone_number:d.consumer_phone_number,hasSavedToCalendar:d.has_saved_to_calendar,recurMessage:d.recur_message,requestFlowType:d.request_flow_type,generalInfo:d.service_general_info,id:d.id,pageID:f==null?void 0:f.id,pageName:h==null?void 0:h.name,pageProfilePic:j,preferredTimeRange:i==null?null:{end:i.end,start:i.start},productItems:d.services_product_items,reminderBubbleText:d.reminder_bubble_text,requestAdminApprovalType:d.request_admin_approval_type,requestedTime:d.requested_time,specialRequest:d.special_request,status:d.booking_status_value,statusLabel:d.status,subtitle:d.ls_xma_subtitle,title:d.ls_xma_title,userID:k==null?void 0:k.id,username:l==null?void 0:l.short_name,jobApplicationID:m==null?void 0:m.id,userProfilePic:o}}n=a.message_bubble_type;var p;switch(n){case"CANCELLED":p=["Cancelled",g._("Cancelled")];break;case"DECLINED":p=["Declined",g._("Declined")];break;case"REQUESTED":p=["Requested",g._("Requested")];break;case"SCHEDULEED":p=["Scheduled",g._("Scheduled")];break;default:throw[b("bs_caml_builtin_exceptions").invalid_argument,"Erroneous target status"]}f=a.user;return{id:a.id,pageID:c[0],calendarSyncType:c[1],userID:f==null?"0":f.id,status:p[0],statusLabel:p[1],viewerID:b("CurrentUser").getAccountID(),requestMetadata:e,servicesVerticalInfo:c[2]}}function t(a){return{id:a.id,page_id:a.page.id,user_id:a.consumer.id,time_ranges:a.formatted_available_time_ranges.map(function(a){return{start:a.start,end:a.end}}),has_booking_request_created:a.has_booking_request_created}}function u(a){return{id:a.id}}function v(a){return{live_location_id:a.live_location_id,is_expired:a.is_expired,expiration_time:a.expiration_time,sender:a.sender,coordinate:a.coordinate,location_title:a.location_title,sender_destination:a.sender_destination,stop_reason:a.stop_reason}}function w(a){return{sender_wec_number:a.sender_wec_number,sender_wec_number_formated:a.sender_wec_number_formated,sender_wec_number_fbid:a.sender_wec_number_fbid,sender_wec_name:a.sender_wec_name}}function x(a){var b=a.preview;b=b==null?null:b.uri;var c=a.large_preview;c=c==null?null:c.uri;return{id:a.id,extension:a.extension,preview:a.preview,large_preview:a.large_preview,attach_type:"photo",large_preview_url:c,preview_url:b}}function y(a){return{id:a.id,name:a.filename,url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").AUDIO,url:a.playable_url,extension:a.extension,filesize:a.filesize,duration:a.duration}}function z(a){var b=a.first_metaline;return{desc:a.description,id:a.id,image_aspect_ratio:a.image_aspect_ratio,item_url:a.target_url,metalines:b==null?{}:{metaline_1:b},name:a.name,source:a.source_name,text:a.description,thumb_url:a.image_url,title:a.name,default_action:a.default_action,call_to_actions:i(a.call_to_actions),media_blob_attachments:a.media_blob_attachments}}function A(a){var b=a.business_items.nodes.map(z),c=i(a.call_to_actions);return{message:a.message,call_to_actions:c,items:b}}function B(a){return{message:a.message,call_to_actions:i(a.call_to_actions),items:a.promotion_items.nodes.map(z)}}function C(a){var c=a.structured_address.streets,d=a.partner_logo;return{account_holder_name:a.account_holder_name,adjustments:a.adjustments.map(function(a){return{adjustment_type:a.adjustment_type,display_adjustment_amount:a.adjustment_amount}}),cancellation_url:a.cancellation_url,items:a.items.nodes.map(z),merchant_name:a.merchant_name,messenger_commerce_bubble_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MNCommerceBubbleType"),a.messenger_commerce_bubble_type)),order_id:a.order_id,order_time:a.order_time,order_url:a.order_url,payment_method:a.payment_method,receipt_id:a.receipt_id,recipient_name:a.recipient_name,shipping_cost:a.shipping_cost,shipping_method:a.shipping_method,status:a.status,structured_address:{city:a.structured_address.city,state:a.structured_address.state,country:a.structured_address.country,postal_code:a.structured_address.postal_code,street_1:b("bs_caml_array").caml_array_get(c,0),street_2:b("bs_caml_array").caml_array_get(c,1)},subtotal:a.subtotal,total_cost:a.total_cost,total_tax:a.total_tax,partner_logo:d==null?void 0:d.uri}}function D(a,c){return{payment_modules_client:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("PaymentModulesClient"),c.payment_modules_client)),is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:c.item_list.map(function(a){return{item_id:a.item_id,name:a.name,subtitle:a.subtitle,description:a.description,unit_price:a.unit_price,image_urls:a.images.map(function(a){return a.uri}),quantity:a.quantity}}),components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,actor_id:a,invoicer_id:c.invoicer_id}}var E=function(a){__p&&__p();var c=b("LeadGenInfoFieldTypes"),d={},e=[];for(var a=a.field_data_list,f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;var i=h.field_type,j=h.label;h=h.values;i===c.CUSTOM||i===c.ZIP?e.push({label:j,values:h}):d[i]={label:j,values:h}}d.questions=e;return d};function F(a,b){var c=b.invite_recipient;c=c==null?null:c.id;var d=b.invite_sender;d=d==null?null:d.id;return{quick_invite_id:b.id,recipient_id:c,sender_id:d,is_viewer_recipient:a===c}}function G(a){var b=function(a){if(a==null)return null;else return a.uri},c=a.listing_category;c=c==null?[null,null]:[c.offer_image,c.request_image];return{listingType:a.listing_type,mapURI:b(a.map_image),offerURI:b(c[0]),requestURI:b(c[1])}}function H(a){return{sender:a.sender,receiver:a.receiver,transfer_id:a.transfer_id,bubbleView:a.bubble_view}}function I(a){__p&&__p();var c=a.receiver_profile,d;if(c==null)d=null;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.sender;if(e==null)c={};else{var f=e.profile_picture;c={id:e.id,name:e.name,full_name:e.full_name,picture:f==null?null:f.uri,profile_uri:e.url}}f=a.transfer_context;if(f==null)e=[null,null,null];else{var g=f.transfer_theme;e=[f.memoText,f.memo_images.map(function(a){a=a.image;if(a==null)return null;else return a.uri}),g==null?null:g.id]}f=a.platform_item;g=f==null?null:{name:f.name,description:f.description,image:f.photos.map(function(a){a=a.image;if(a==null)return null;else return a.uri}),refURL:f.url};f=a.amount_fb_discount;return{sender:c,amountWithSymbol:a.transaction_amount.formatted_amount,status:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("P2PTransferStatus"),a.transfer_status)),receiver:d,transfer_id:a.transfer_id,completedTime:a.completedTime,updatedTime:a.updatedTime,creationTime:a.creationTime,amount:a.transaction_amount.amount,memoText:e[0],memoPhotoURLs:e[1],themeID:e[2],discountAmount:f==null?null:f.formatted,fundsAvailability:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("FundsAvailability"),a.funds_availability)),groupThreadFBID:a.group_thread_fbid,platform_item:g,statusDescription:{markup:a.status_description},bubbleView:a.bubble_view,currencyCode:a.currency_amount.currency}}function J(a){__p&&__p();var c=a.requester,d;if(c==null)d=void 0;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.requestee;if(e==null)c=void 0;else{var f=e.profile_picture;c={id:e.id,name:e.short_name,full_name:e.name,picture:f==null?null:f.uri,profile_url:e.url}}f=b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("P2PPaymentRequestStatus"),a.request_status));e=a.transfer;e=e==null?[null,""]:[I(e),e.id];var g=a.request_theme;return{amount:a.transaction_amount.amount,amountWithSymbol:a.amount.formatted,requestee:c,requester:d,currentStatus:f,currency:a.amount.currency,creationTime:a.creation_time,groupThreadFBID:a.group_thread_fbid,id:a.id,memoText:a.memo_text,themeID:g==null?null:g.id,transfer:e[0],transferID:e[1],updatedTime:a.updated_time,bubbleView:a.bubble_view,statusDescription:{markup:a.status_description}}}function K(a){var b=J({amount:a.amount,transaction_amount:a.transaction_amount,requester:a.requester,requestee:a.requestee,request_status:a.request_status,request_theme:a.request_theme,id:a.id,memo_text:a.memo_text,transfer:a.transfer,creation_time:a.creation_time,group_thread_fbid:a.group_thread_fbid,updated_time:a.updated_time,bubble_view:a.bubble_view,status_description:a.status_description});a={individualRequests:a.individual_requests.map(J)};return Object.assign(b,a)}function L(a,c,d){__p&&__p();var e=c.media,f=e==null?null:e.animated_image,g=e==null?null:e.image,h={};c.properties.forEach(function(b){var a=b.value;h[b.key]=a==null?null:a.text;return 0});var i=c.target,z;if(i==null)z=null;else switch(i.tag|0){case 0:z=G(i[0]);break;case 1:z=H(i[0]);break;case 2:z=I(i[0]);break;case 3:z=K(i[0]);break;case 4:z=D(a,i[0]);break;case 7:z=B(i[0]);break;case 8:z=A(i[0]);break;case 10:z=E(i[0]);break;case 11:z=v(i[0]);break;case 12:z=F(a,i[0]);break;case 13:z=s(i[0]);break;case 14:z=t(i[0]);break;case 15:z=u(i[0]);break;case 16:var J=i[0],L=J.genie_sender;L=L==null?[null,null]:[L.messaging_actor.id,L.messaging_actor.name];var N=L[0],O={action_links:[],messaging_attribution:null,messenger_call_to_actions:[],xma_layout_info:null,deduplication_key:null,description:null,media:null,properties:[],source:null,style_list:[],title_with_entities:null,url:null,subattachments:[],target:null},P=c.media,Q;if(P==null)Q=null;else{P=P.pack;if(P==null){P=J.story_attachment;Q=P==null||d==null?null:M(a,{legacy_attachment_id:N,story_attachment:{action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,deduplication_key:d.deduplication_key,description:d.description,media:d.media,properties:d.properties,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,url:d.url,subattachments:d.subattachments,target:d.target},genie_attachment:{genie_message:{story_attachment:O}}})}else Q=d==null?null:M(a,{legacy_attachment_id:N,story_attachment:O,genie_attachment:{genie_message:{story_attachment:O}}})}z={genie_id:N,genie_name:L[1],attachment:Q};break;case 18:z=m(i[0]);break;case 20:z=r(i[0]);break;case 21:z=n(i[0]);break;case 22:z=o(i[0]);break;case 23:z=C(i[0]);break;case 25:z=l(i[0]);break;case 26:z=k(a,i[0]);break;case 38:z=w(i[0]);break;case 39:z=x(i[0]);break;case 40:z=y(i[0]);break;case 41:z=p(i[0]);break;case 42:z=q(i[0]);break;default:z=i[0]}J=c.target;P=J==null||J.tag!==7?null:0;d=c.description;O=c.source;N=c.title_with_entities;return{description:d==null?null:d.text,media:{animated_image:f==null?null:f.uri,animated_image_size:f==null?{height:null,width:null}:{height:f.height,width:f.width},image:g==null?null:g.uri,image_size:g==null?{height:null,width:null}:{height:g.height,width:g.width},duration:e==null?null:e.playable_duration,playable:e==null?null:e.is_playable,source:e==null?null:e.playable_url},source:O==null?null:O.text,style_list:c.style_list,title:N==null?null:N.text,action_links:j(c.action_links),messaging_attribution:c.messaging_attribution,messenger_ctas:c.messenger_call_to_actions.map(function(a){return{id:a.id,page_id:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(a.page_id),""),action_title:a.title,action_url:a.action_link,action_open_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MNCommerceCallToActionType"),a.action_open_type)),is_high_confidence:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(a.is_high_confidence),!1),is_mutable_by_server:a.is_mutable_by_server,native_url:a.native_url,is_disabled:a.is_disabled,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button}}}),xma_layout_info:c.xma_layout_info,properties:h,uri:c.url,deduplication_key:c.deduplication_key,target:z,label:P}}function M(a,c){__p&&__p();var d=c.genie_attachment,e;if(d==null)e=null;else{d=d.genie_message;if(d==null)e=null;else{d=d.story_attachment;e=d==null?null:{description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target,subattachments:d.subattachments}}}d=c.story_attachment;var f;if(d==null)f=null;else{var g={description:null,media:null,source:null,style_list:[],title_with_entities:null,properties:[],url:null,deduplication_key:null,action_links:[],messaging_attribution:null,messenger_call_to_actions:[],xma_layout_info:null,target:null,subattachments:[]};c={share_id:c.legacy_attachment_id,subattachments:d.subattachments.map(function(b){return L(a,b,g)})};var h={description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target};d=e==null?{description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target,subattachments:d.subattachments}:{description:e.description,media:e.media,source:e.source,style_list:e.style_list,title_with_entities:e.title_with_entities,properties:e.properties,url:e.url,deduplication_key:e.deduplication_key,action_links:e.action_links,messaging_attribution:e.messaging_attribution,messenger_call_to_actions:e.messenger_call_to_actions,xma_layout_info:e.xma_layout_info,target:e.target,subattachments:e.subattachments};f=Object.assign(c,L(a,h,d))}return{app_attribution:null,attach_type:b("MercuryAttachmentType").SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:f,thumbnail_url:null}}f._getCallToActions=i;f._getActionLinks=j;f._getColor=a;f._getLogo=c;f._getPageTarget=k;f._getGroupCommerceProductItemTarget=l;f._getExternalSongTarget=m;f._getAgentSuggestionItemTarget=n;f._getFundraiserTarget=o;f._getWECFileTarget=p;f._getWECMessageVideoTarget=q;f._getRetailItemTarget=r;f._getPagesPlatformBookingMessageTarget=s;f._getServicesAppointmentAvailabilityTarget=t;f._getServicesGenericAdminTextTarget=u;f._getMessageLiveLocationTarget=v;f._getWECMessageTarget=w;f._getWECMessageImageTarget=x;f._getWECMessageAudioTarget=y;f._getBusinessRetailItem=z;f._getMessengerBusinessMessageTarget=A;f._getMessengerRetailPromotionTarget=B;f._getMessengerRetailReceiptTarget=C;f._getPagesPlatformAttachmentTarget=D;f._getPagesPlatformLeadGenInfoTarget=E;f._getQuickInviteTarget=F;f._getCrisisListingTarget=G;f._getMoneyTransferTarget=H;f._getP2PTransferTarget=I;f._getP2PTransferRequestTarget=J;f._getP2PTransferRequestWithIndividualRequests=K;f.transformStoryAttachment=L;f.getExtensibleAttachmentPayload=M}),null);
__d("MessengerAttachmentTransformer.bs",["fbt","bs_caml_primitive","MercuryAttachmentType","MessageSharedMediaIDStore.bs","MercuryAttachmentContentType","MessengerStoryAttachmentTransformer.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){__p&&__p();if(a.is_malicious)return{app_attribution:null,icon_type:b("MercuryAttachmentContentType").UNKNOWN,mime_type:null,metadata:null,name:null,preview_height:null,preview_url:null,preview_width:null,rel:null,share:null,thumbnail_url:null,url:null,attach_type:b("MercuryAttachmentType").ERROR,error_msg:g._("This attachment has been marked as malicious."),message_file_fbid:null,url_shimhash:null,url_skipshim:null,preview:null};else{var c=a.attribution_app,d;if(c==null)d=null;else{var e=c.square_logo;d={id:c.id,icon_url:e==null?null:e.uri,metadata:a.attribution_metadata,name:c.name}}e=a.url;return{app_attribution:d,icon_type:a.content_type,mime_type:a.mimetype,metadata:null,name:a.filename,preview_height:null,preview_url:a.preview_url,preview_width:null,rel:"ignore",share:null,thumbnail_url:null,url:e==null?null:e,attach_type:b("MercuryAttachmentType").FILE,error_msg:void 0,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim,preview:a.preview}}}function i(a,c,d){__p&&__p();var e=a.chat_image;e=e==null?[null,null,null]:[e.uri,e.width,e.height];var f=e[0],g=a.chat_image;g=g==null?null:{width:g.width,height:g.height};var h=a.large_image;h=h==null?[null,null]:[h.uri,{width:h.width,height:h.height}];var i=a.inbox_image;i=i==null?[null,null]:[i.uri,{width:i.width,height:i.height}];var j=a.attribution_app,k;if(j==null)k=null;else{var l=j.square_logo;k={id:j.id,icon_url:l==null?null:l.uri,metadata:a.attribution_metadata,name:j.name}}return{app_attribution:k,attach_type:b("MercuryAttachmentType").VIDEO,name:a.filename,url:a.playable_url,rel:"async",preview_url:f,preview_width:e[1],preview_height:e[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").VIDEO,metadata:{fbid:a.legacy_attachment_id,render_as_sticker:a.video_type==="SPEAKING_STICKER",dimensions:{width:a.original_dimensions.x,height:a.original_dimensions.y},duration:a.playable_duration_in_ms,large_size:h[1],large_preview:h[0],chat_size:g,chat_preview:f,inbox_size:i[1],inbox_preview:i[0],pageid:d?c:void 0},thumbnail_url:f,share:null}}function j(a){var c=a.attribution_app,d;if(c==null)d=null;else{var e=c.square_logo;d={id:c.id,icon_url:e==null?null:e.uri,metadata:a.attribution_metadata,name:c.name}}return{app_attribution:d,attach_type:b("MercuryAttachmentType").FILE,name:a.filename,url:a.playable_url,rel:"ignore",preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").MUSIC,metadata:{duration:a.playable_duration_in_ms,isVoicemail:a.is_voicemail?"1":"0",type:a.audio_type==="VOICE_MESSAGE"?"fb_voice_message":a.audio_type==="VOICE_MESSAGE_WITH_TRANSCRIPT"?"fb_voice_message_with_transcript":"file_attachment"},thumbnail_url:null,share:null,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}}function k(a,c,d){__p&&__p();var e=a.preview_image;e=e==null?[null,null,null]:[e.uri,e.width,e.height];var f=a.animated_image;f=f==null?null:f.uri;var g=a.attribution_app,h;if(g==null)h=null;else{var i=g.square_logo;h={id:g.id,icon_url:i==null?null:i.uri,metadata:a.attribution_metadata,name:g.name}}return{app_attribution:h,attach_type:b("MercuryAttachmentType").ANIMATED_IMAGE,name:a.filename,url:f,rel:"async",preview_url:e[0],preview_width:e[1],preview_height:e[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").PHOTO,metadata:{fbid:a.legacy_attachment_id,image:f,dimensions:String(a.original_dimensions.x)+(","+String(a.original_dimensions.y)),pageid:d?c:void 0},thumbnail_url:f,share:null}}function l(a){__p&&__p();var c=a.original_extension==="gif"?b("MercuryAttachmentType").ANIMATED_IMAGE:a.render_as_sticker?b("MercuryAttachmentType").THIRDPARTYSTICKER:b("MercuryAttachmentType").PHOTO,d=a.preview;d=d==null?[null,null,null]:[d.uri,d.width,d.height];if(c===b("MercuryAttachmentType").PHOTO){var e=a.large_preview;e=e==null?[null,null,null]:[e.uri,e.width,e.height]}else e=[null,null,null];var f=a.attribution_app,g;if(f==null)g=null;else{var h=f.square_logo;g={id:f.id,icon_url:h==null?null:h.uri,metadata:a.attribution_metadata,name:f.name}}h=a.thumbnail;return{app_attribution:g,attach_type:c,blurred_image_uri:a.blurred_image_uri,name:a.filename,url:null,rel:"async",preview_url:d[0],preview_width:d[1],preview_height:d[2],large_preview_url:e[0],large_preview_width:e[1],large_preview_height:e[2],icon_type:b("MercuryAttachmentContentType").PHOTO,metadata:{fbid:a.legacy_attachment_id,dimensions:String(a.original_dimensions.x)+(","+String(a.original_dimensions.y))},thumbnail_url:h==null?null:h.uri,share:null,photo_encodings:a.photo_encodings}}function m(a,c){__p&&__p();var d=a,e=c;if(a>=c){a=b("bs_caml_primitive").caml_float_min(120,d/2);c=a/(d/2);return[a|0,e/2*c|0]}else{a=b("bs_caml_primitive").caml_float_min(120,e/2);c=a/(e/2);return[d/2*c|0,a|0]}}function n(a){var c=m(a.width,a.height),d=a.pack,e=a.sprite_image,f=a.sprite_image_2x,g=a.padded_sprite_image,h=a.padded_sprite_image_2x;return{app_attribution:null,attach_type:b("MercuryAttachmentType").STICKER,name:null,url:a.url,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").UNKNOWN,metadata:{accessibilityLabel:a.label,stickerID:a.id,packID:d==null?null:d.id,frameCount:a.frame_count,frameRate:a.frame_rate,framesPerRow:a.frame_count>1?a.frames_per_row:1,framesPerCol:a.frame_count>1?a.frames_per_column:1,height:c[1],width:c[0],spriteURI:e==null?null:e.uri,spriteURI2x:f==null?null:f.uri,paddedSpriteURI:g==null?null:g.uri,paddedSpriteURI2x:h==null?null:h.uri,thumbnail_url:null,share:null}}}function o(a,c){if(c==null)return 0;else return b("MessageSharedMediaIDStore.bs").setMessageIDForAttachmentID(a,c)}function a(a,c,d,e){__p&&__p();var f=[],g={id:"",pack:null,label:"",frame_count:0,frame_rate:0,frames_per_row:0,frames_per_column:0,height:0,padded_sprite_image:null,padded_sprite_image_2x:null,sprite_image_2x:null,sprite_image:null,url:null,width:0},m=c.extensible_attachment,p;if(m==null)p=g;else{m=m.story_attachment;if(m==null)p=g;else{m=m.media;p=m==null?g:{id:m.id,pack:m.pack,label:m.label,frame_count:m.frame_count,frame_rate:m.frame_rate,frames_per_row:m.frames_per_row,frames_per_column:m.frames_per_column,height:m.height,padded_sprite_image:m.padded_sprite_image,padded_sprite_image_2x:m.padded_sprite_image_2x,sprite_image_2x:m.sprite_image_2x,sprite_image:m.sprite_image,url:m.url,width:m.width}}}g=p.id;!(g==null)&&g!==""&&f.push(n(p));m=c.extensible_attachment;m==null||f.push(b("MessengerStoryAttachmentTransformer.bs").getExtensibleAttachmentPayload(a,m));g=c.sticker;g==null||f.push(n(g));p=c.blob_attachments;p==null||p.forEach(function(b){__p&&__p();switch(b.tag|0){case 0:var c=b[0];o(c.legacy_attachment_id,d);f.push(l(c));return 0;case 1:c=b[0];o(c.legacy_attachment_id,d);f.push(k(c,a,e));return 0;case 2:f.push(j(b[0]));return 0;case 3:c=b[0];o(c.legacy_attachment_id,d);f.push(i(c,a,e));return 0;case 4:f.push(h(b[0]));return 0}});return f}f._getFilePayload=h;f._getVideoPayload=i;f._getAudioPayload=j;f._getAnimatedImagePayload=k;f._getImagePayload=l;f._getStickerDimensions=m;f._getStickerPayload=n;f._storeAttachmentMapping=o;f.transformAttachment=a}),null);
__d("MessengerGroupAdminModelStatus.bs",["MessengerGroupAdminModelStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return null;else{a=a.toUpperCase();switch(a){case"NOT_SUPPORTED":return b("MessengerGroupAdminModelStatus").NOT_SUPPORTED;case"OPTIONAL":return b("MessengerGroupAdminModelStatus").OPTIONAL;case"REQUIRED":return b("MessengerGroupAdminModelStatus").REQUIRED;default:return null}}}f.fromNullableString=a}),null);
__d("MessengerGroupsSyncStatus.bs",["MessengerGroupsSyncStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a==null)return null;else switch(a){case"OPT_IN":return b("MessengerGroupsSyncStatus").OPT_IN;case"OPT_OUT":return b("MessengerGroupsSyncStatus").OPT_OUT;case"PENDING_OPT_IN":return b("MessengerGroupsSyncStatus").PENDING_OPT_IN;case"PENDING_OPT_OUT":return b("MessengerGroupsSyncStatus").PENDING_OPT_OUT;case"UNSET":return b("MessengerGroupsSyncStatus").UNSET;case"UNSUPPORTED":return b("MessengerGroupsSyncStatus").UNSUPPORTED;default:return null}}f.fromNullableString=a}),null);
__d("MessageUnsendabilityStatus.bs",["MessageUnsendabilityStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a==null)return null;else switch(a){case"can_unsend":return b("MessageUnsendabilityStatus").CAN_UNSEND;case"deny_blob_attachment":return b("MessageUnsendabilityStatus").DENY_BLOB_ATTACHMENT;case"deny_for_non_sender":return b("MessageUnsendabilityStatus").DENY_FOR_NON_SENDER;case"deny_log_message":return b("MessageUnsendabilityStatus").DENY_LOG_MESSAGE;case"deny_p2p_payment":return b("MessageUnsendabilityStatus").DENY_P2P_PAYMENT;case"deny_story_reaction":return b("MessageUnsendabilityStatus").DENY_STORY_REACTION;case"deny_tombstone_message":return b("MessageUnsendabilityStatus").DENY_TOMBSTONE_MESSAGE;default:return null}}f.fromNullableString=a}),null);
__d("MessengerMessageTransformer.bs",["bs_block","bs_js_dict","FBIDCheck","getByPath","MercuryIDs","bs_caml_format","bs_caml_option","CurrentUser","MessagingTag","bs_js_null_undefined","MercuryActionType","MessagingTagUtils","MessagingSourceEnum","StoryAttachmentStyle","MNCommerceMessageType","MercuryLogMessageType","MessageUnsendabilityStatus.bs","P2PPaymentLogMessageSubtype","MessagingGenericAdminTextType","MessengerAttachmentTransformer.bs","InstantGameUpdateXMATUpdateType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();a=a.blob_attachments;var c=[];a==null||a.forEach(function(a){__p&&__p();if(a.__typename==="MessageImage"){c.push(b("bs_block").__(0,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,blurred_image_uri:a.blurred_image_uri,filename:a.filename,id:a.id,preview:a.preview,large_preview:a.large_preview,thumbnail:a.thumbnail,legacy_attachment_id:a.legacy_attachment_id,original_dimensions:a.original_dimensions,original_extension:a.original_extension,render_as_sticker:a.render_as_sticker,photo_encodings:a.photo_encodings}]));return 0}else if(a.__typename==="MessageAnimatedImage"){c.push(b("bs_block").__(1,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,animated_image:a.animated_image,legacy_attachment_id:a.legacy_attachment_id,preview_image:a.preview_image,original_dimensions:a.original_dimensions}]));return 0}else if(a.__typename==="MessageAudio"){c.push(b("bs_block").__(2,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,is_voicemail:a.is_voicemail,audio_type:a.audio_type,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else if(a.__typename==="MessageVideo"){c.push(b("bs_block").__(3,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,legacy_attachment_id:a.legacy_attachment_id,chat_image:a.chat_image,video_type:a.video_type,original_dimensions:a.original_dimensions,large_image:a.large_image,inbox_image:a.inbox_image}]));return 0}else if(a.__typename==="MessageFile"){c.push(b("bs_block").__(4,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,url:a.url,mimetype:a.mimetype,content_type:a.content_type,is_malicious:a.is_malicious,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim,preview_url:a.preview_url,preview:a.preview}]));return 0}else return 0});return c}function h(a,c,d){var e=c.call_capture_attachments;if(e==null)return[];else return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:null,blob_attachments:g({blob_attachments:e.edges.map(function(a){return a.node})}),sticker:null},c.message_id,d)}function i(a,c,d,e,f){__p&&__p();if(c.__typename==="GroupPollExtensibleMessageAdminText"){var g=c.question,i;if(g==null)i=[{},null];else{var j=Object.assign({},g);Object.assign(j,{total_count:c.total_count,options:g.options.nodes.map(function(a){var b=Object.assign({},a);return Object.assign(b,{total_count:a.voters.nodes.length,voters:a.voters.nodes.map(function(a){return a.id})})})});i=[j,g.id]}j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{event_type:c.event_type.toLowerCase(),question_id:i[1],question_json:b("bs_js_null_undefined").fromOption(b("bs_caml_option").undefined_to_opt(JSON.stringify(i[0])))}}}else if(c.__typename==="InstantGameUpdateExtensibleMessageAdminText"){j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{game_id:(g=b("getByPath"))(c,["game","id"]),update_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("InstantGameUpdateXMATUpdateType"),c.update_type)),collapsed_text:c.collapsed_text,expanded_text:c.expanded_text,leaderboard_json:c.leaderboard_json,cta_url:g(c,["instant_game_update_data","cta_url"]),cta_title:g(c,["instant_game_update_data","cta_title"]),custom_image_url:g(c,["instant_game_update_data","photo","image","uri"]),template:g(c,["instant_game_update_data","template"])}}}else if(c.__typename==="MessengerAdContextAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{ad_url:c.ad_url}};else if(c.__typename==="AdExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{ad_client_token:c.ad_client_token,ad_id:c.ad_id,ad_preferences_link:c.ad_preferences_link,ad_properties:c.ad_properties}};else if(c.__typename==="MessengerCallLogExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:Object.assign(Object.assign({},c),{call_capture_attachments:h(a,c,f)})};else if(c.__typename==="ThemeColorExtensibleMessageAdminText"||c.__typename==="ThreadIconExtensibleMessageAdminText"||c.__typename==="ThreadNicknameExtensibleMessageAdminText"||c.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||c.__typename==="AddContactExtensibleMessageAdminText"||c.__typename==="RtcCallLogExtensibleMessageAdminText"||c.__typename==="GameScoreExtensibleMessageAdminText"||c.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||c.__typename==="MessengerGrowthGenericExtensibleMessageAdminText"||c.__typename==="PartiesInviteExtensibleMessageAdminText"||c.__typename==="AppointmentReminderExtensibleMessageAdminText"||c.__typename==="LinkCTAExtensibleMessageAdminText"||c.__typename==="GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText"||c.__typename==="ServicesLeadGenSurveyExtensibleMessageAdminText"||c.__typename==="ServicesLeadGenSurveyEditExtensibleMessageAdminText"||c.__typename==="MessengerIcebreakerVoteCastExtensibleMessageAdminText"||c.__typename==="PagesMarkAsPaidExtensibleMessageAdminText"||c.__typename==="PagesMarkAsPaidNewExtensibleMessageAdminText"||c.__typename==="WorkBotInstalledExtensibleMessageAdminText"||c.__typename==="WorkChatReminderLinkCTAExtensibleMessageAdminText"||c.__typename==="PageThreadActionSystemAddDetailsXMAT"||c.__typename==="PostSharedFromGroupExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:Object.assign({},c)};else if(c.__typename==="LightweightEventCreateExtensibleMessageAdminText"||c.__typename==="LightweightEventDeleteExtensibleMessageAdminText"||c.__typename==="LightweightEventNotifyBeforeEventExtensibleMessageAdminText"||c.__typename==="LightweightEventNotifyExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateLocationExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateTimeExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateTitleExtensibleMessageAdminText"||c.__typename==="LightweightEventRSVPExtensibleMessageAdminText"){i=c.event_reminder;if(i==null)g=void 0;else{a=i.lightweight_event_creator;f=a==null?void 0:a.id;a=i.location_page;a=a==null?void 0:a.id;var k=i.timezone_id;k=k==null?void 0:k.timezone;var l=i.location_coordinates;l=l==null?{latitude:void 0,longitude:void 0}:l;var m=i.event_reminder_members;m=m==null?void 0:m.edges;g={event_creator_id:f,event_id:i.id,event_location_id:a,event_location_name:i.location_name,event_seconds_to_notify_before:i.seconds_to_notify_before,event_time:i.time,event_end_time:i.end_time,event_timezone:k,event_title:i.event_title,event_type:i.lightweight_event_type,event_track_rsvp:i.allows_rsvp,latitude:l.latitude,longitude:l.longitude,guest_state_list:m,guest_id:c.guest_id,guest_status:c.guest_status}}j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:g}}else j=c.__typename==="AdReplyMessageAdminText"?{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{ad_url:c.ad_url,should_show_url:c.should_show_url}}:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:void 0};return{log_message_body:e,log_message_data:j,log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}}function j(a){return a.map(function(a){if(a==="p2p_transfer")return b("StoryAttachmentStyle").ORION;else if(a==="p2p_payment_request")return b("StoryAttachmentStyle").ORION_REQUEST;else return a})}function k(a){__p&&__p();var c=a.target,d;if(c==null)d=null;else if(c.__typename==="CrisisListing")d=b("bs_block").__(0,[{listing_type:c.listing_type,listing_category:c.listing_category,map_image:c.map_image}]);else if(c.__typename==="MoneyTransfer")d=b("bs_block").__(1,[{sender:c.sender,receiver:c.receiver,transfer_id:c.transfer_id,bubble_view:c.bubble_view}]);else if(c.__typename==="PeerToPeerTransfer")d=b("bs_block").__(2,[{sender:c.sender,receiver_profile:c.receiver_profile,transaction_amount:c.transaction_amount,transfer_status:c.transfer_status,transfer_id:c.transfer_id,completedTime:c.completedTime,updatedTime:c.updatedTime,creationTime:c.creationTime,transfer_context:c.transfer_context,amount_fb_discount:c.amount_fb_discount,funds_availability:c.funds_availability,group_thread_fbid:c.group_thread_fbid,platform_item:c.platform_item,id:c.id,status_description:c.status_description,bubble_view:c.bubble_view,currency_amount:c.currency_amount}]);else if(c.__typename==="PeerToPeerPaymentRequest")d=b("bs_block").__(3,[{amount:c.amount,transaction_amount:c.transaction_amount,requester:c.requester,requestee:c.requestee,request_status:c.request_status,request_theme:c.request_theme,id:c.id,memo_text:c.memo_text,transfer:c.transfer,creation_time:c.creation_time,group_thread_fbid:c.group_thread_fbid,updated_time:c.updated_time,status_description:c.status_description,bubble_view:c.bubble_view,individual_requests:c.individual_requests}]);else if(c.__typename==="PaymentPlatformAttachment")d=b("bs_block").__(4,[{payment_modules_client:c.payment_modules_client,is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:c.item_list,components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,invoicer_id:c.invoicer_id}]);else if(c.__typename==="MomentsAppMessengerInvitation")d=b("bs_block").__(5,[{snippet:c.snippet}]);else if(c.__typename==="MomentsAppMessengerPhotoRequest")d=b("bs_block").__(6,[{snippet:c.snippet}]);else if(c.__typename==="MessengerRetailPromotion")d=b("bs_block").__(7,[{message:c.message,call_to_actions:c.call_to_actions,promotion_items:c.promotion_items}]);else if(c.__typename==="MessengerBusinessMessage")d=b("bs_block").__(8,[{message:c.message,call_to_actions:c.call_to_actions,business_items:c.business_items}]);else if(c.__typename==="Video")d=b("bs_block").__(9,[{video_id:c.video_id,video_messenger_cta_payload:c.video_messenger_cta_payload}]);else if(c.__typename==="PagesPlatformLeadGenInfo")d=b("bs_block").__(10,[{field_data_list:c.field_data_list}]);else if(c.__typename==="MessageLiveLocation")d=b("bs_block").__(11,[{live_location_id:c.live_location_id,is_expired:c.is_expired,expiration_time:c.expiration_time,sender:c.sender,coordinate:c.coordinate,location_title:c.location_title,sender_destination:c.sender_destination,stop_reason:c.stop_reason}]);else if(c.__typename==="QuickInvite")d=b("bs_block").__(12,[{id:c.id,invite_sender:c.invite_sender,invite_recipient:c.invite_recipient}]);else if(c.__typename==="PagesPlatformBookingMessage")d=b("bs_block").__(13,[{id:c.id,page:c.page,message_bubble_type:c.message_bubble_type,user:c.user,native_component_flow_request:c.native_component_flow_request}]);else if(c.__typename==="ServicesAppointmentAvailability")d=b("bs_block").__(14,[{id:c.id,page:c.page,consumer:c.consumer,formatted_available_time_ranges:c.formatted_available_time_ranges,has_booking_request_created:c.has_booking_request_created}]);else if(c.__typename==="ServicesGenericAdminText")d=b("bs_block").__(15,[{id:c.id}]);else if(c.__typename==="GenieMessage")d=b("bs_block").__(16,[{genie_sender:c.genie_sender,story_attachment:c.story_attachment}]);else if(c.__typename==="Event")d=b("bs_block").__(17,[{eventID:c.eventID,guestStatus:c.guestStatus,canViewerJoin:c.canViewerJoin,timeString:c.timeString,event_place:c.event_place,social_context:c.social_context,watchStatus:c.watchStatus,connection_style:c.connection_style,canViewerWatch:c.canViewerWatch,profile_picture:c.profile_picture,name:c.name,start_timestamp:c.start_timestamp}]);else if(c.__typename==="ExternalSong")d=b("bs_block").__(18,[{application_name:c.application_name,artist_names:c.artist_names,audio_url:c.audio_url,duration_ms:c.duration_ms,music_title:c.music_title}]);else if(c.__typename==="LightweightAction")d=b("bs_block").__(19,[{lwa_state:c.lwa_state,lwa_type:c.lwa_type}]);else if(c.__typename==="MessengerRetailItem")d=b("bs_block").__(20,[{id:c.id,name:c.name,desc:c.desc,thumb_url:c.thumb_url,item_url:c.item_url,source:c.source,image_aspect_ratio:c.image_aspect_ratio,first_metaline:c.first_metaline,second_metaline:c.second_metaline,third_metaline:c.third_metaline,default_action:c.default_action,call_to_actions:c.call_to_actions}]);else if(c.__typename==="AgentItemSuggestion")d=b("bs_block").__(21,[{id:c.id,desc:c.desc,total_cost:c.total_cost,merchant_name:c.merchant_name,target_url:c.target_url,thumb_url:c.thumb_url,raw_amount:c.raw_amount,payment:c.payment,price_amount:c.price_amount,price_currency:c.price_currency,name:c.name}]);else if(c.__typename==="FundraiserPersonToCharity"||c.__typename==="FundraiserPersonForPerson"){var e=c.fundraiser_detailed_progress_text,f=c.fundraiser_subtitle_text,g=c.focused_cover_photo;d=b("bs_block").__(22,[{fundraiserID:c.id,canDonate:c.can_donate,hasViewerDonated:c.has_viewer_donated,fundraiserDetailedProgressText:e==null?null:e.text,fundraiserSubtitleText:f==null?null:f.text,focusedCoverPhoto:g==null?null:{src:g.photo.image.uri,data:{height:g.photo.image.height,width:g.photo.image.width}}}])}else d=c.__typename==="MessengerRetailReceipt"?b("bs_block").__(23,[{account_holder_name:c.account_holder_name,adjustments:c.retail_adjustments,cancellation_url:c.cancellation_url,items:c.retail_items,merchant_name:c.merchant_name,messenger_commerce_bubble_type:c.bubble_type,order_id:c.receipt_id,order_time:c.order_time_for_display,order_url:c.receipt_url,payment_method:c.order_payment_method,receipt_id:c.id,recipient_name:c.recipient_name,shipping_cost:c.shipping_cost,shipping_method:c.shipping_method,status:c.status,structured_address:c.structured_address,subtotal:c.subtotal,total_cost:c.total,total_tax:c.tax,partner_logo:c.partner_log}]):c.__typename==="JobApplication"?b("bs_block").__(24,[{id:c.id}]):c.__typename==="GroupCommerceProductItem"?b("bs_block").__(25,[{group_commerce_item_description:c.group_commerce_item_description,group_commerce_item_seller:c.group_commerce_item_seller,formatted_price:c.formatted_price,group_commerce_item_title:c.group_commerce_item_title,primary_photo:c.primary_photo,url:c.url}]):c.__typename==="Page"?b("bs_block").__(26,[{address:c.address,top_category_name:c.top_category_name,cover_photo:c.cover_photo,location:c.location,name:c.name,overall_star_rating:c.overall_star_rating,id:c.id,price_range_description:c.price_range_description}]):c.__typename==="MessengerEventReminder"?b("bs_block").__(27,[{is_active:c.is_active,event_title:c.event_title,time:c.time}]):c.__typename==="FormProgressStoryAttachment"?b("bs_block").__(52,[{progress:c.progress,url:c.url}]):c.__typename==="AirlineBoardingPassCollectionMessageAttachment"?b("bs_block").__(28,[{tint_color:c.tint_color,logo:c.logo,flight_label:c.flight_label,boarding_time_label:c.boarding_time_label,departure_label:c.departure_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,flight_terminal_label:c.flight_terminal_label,flight_gate_label:c.flight_gate_label,view_boarding_pass_cta_label:c.view_boarding_pass_cta_label,boarding_passes:c.boarding_passes,share_cta_label:c.share_cta_label,message_cta_label:c.message_cta_label,boarding_pass_title_label:c.boarding_pass_title_label,boarding_pass_error_title_label:c.boarding_pass_error_title_label}]):c.__typename==="AirlineCheckInReminderMessageAttachment"?b("bs_block").__(29,[{pnr_number:c.pnr_number,tint_color:c.tint_color,checkin_url:c.checkin_url,booking_number_label:c.booking_number_label,flight_label:c.flight_label,arrival_time_label:c.arrival_time_label,departure_time_label:c.departure_time_label,checkin_cta_label:c.checkin_cta_label,logo:c.logo,flight_infos:c.flight_infos}]):c.__typename==="AirlineUpdateMessageAttachment"?b("bs_block").__(30,[{pnr_number:c.pnr_number,tint_color:c.tint_color,update_type:c.update_type,departure_time_label:c.departure_time_label,arrival_time_label:c.arrival_time_label,booking_number_label:c.booking_number_label,flight_gate_label:c.flight_gate_label,flight_label:c.flight_label,flight_status_label:c.flight_status_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,logo:c.logo,flight_info:c.flight_info,hightlighted_labels:c.hightlighted_labels}]):c.__typename==="AirlineItineraryMessageAttachment"?b("bs_block").__(31,[{confirmation_number:c.confirmation_number,pnr_number:c.pnr_number,tint_color:c.tint_color,formatted_total:c.formatted_total,itemized_price_infos:c.itemized_price_infos,formatted_tax:c.formatted_tax,formatted_base_price:c.formatted_base_price,passenger_infos:c.passenger_infos,logo:c.logo,aircraft_type_label:c.aircraft_type_label,arrival_time_label:c.arrival_time_label,base_price_label:c.base_price_label,booking_number_label:c.booking_number_label,cabin_type_label:c.cabin_type_label,departure_time_label:c.departure_time_label,flight_confirmation_label:c.flight_confirmation_label,flight_date_label:c.flight_date_label,flight_label:c.flight_label,flight_terminal_label:c.flight_terminal_label,itinerary_error_title_label:c.itinerary_error_title_label,itinerary_title_label:c.itinerary_title_label,passenger_name_label:c.passenger_name_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,purchase_summary_label:c.purchase_summary_label,taxes_label:c.taxes_label,total_label:c.total_label,view_details_cta_label:c.view_details_cta_label,itinerary_legs:c.itinerary_legs}]):c.__typename==="MessengerRetailShipmentTrackingEvent"?b("bs_block").__(32,[{id:c.id,shipment:c.shipment,tracking_event_time_for_display:c.tracking_event_time_for_display,shipment_tracking_event_type:c.shipment_tracking_event_type,messenger_commerce_location:c.messenger_commerce_location,tracking_event_description:c.tracking_event_description,bubble_type:c.bubble_type}]):c.__typename==="MessengerRetailShipment"?b("bs_block").__(33,[{id:c.id,tracking_number:c.tracking_number,shipdate_for_display:c.shipdate_for_display,estimated_delivery_time_for_display:c.estimated_delivery_time_for_display,commerce_origin:c.commerce_origin,commerce_destination:c.commerce_destination,retail_carrier:c.retail_carrier,shipment_tracking_events:c.shipment_tracking_events,receipt:c.receipt,recipient:c.recipient,retail_shipment_items:c.retail_shipment_items,bubble_type:c.bubble_type}]):c.__typename==="EventAttendanceConfirmation"?b("bs_block").__(35,[{id:c.id,num_guests:c.num_guests,attendee_answers:c.attendee_answers,event:c.event}]):c.__typename==="LeadGenDeepLinkData"?b("bs_block").__(34,[{id:c.id,cover_image:c.cover_image,headline:c.headline,name:c.name,page:c.page}]):c.__typename==="UserLeadGenInfo"?b("bs_block").__(36,[{id:c.id,field_data:c.field_data}]):c.__typename==="WECMessageAudio"?b("bs_block").__(40,[{id:c.id,filename:c.filename,playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension,duration:c.duration}]):c.__typename==="IceBreakerMessageAttachment"?b("bs_block").__(37,[{ice_breaker_title:c.ice_breaker_title,ice_breaker_messages:c.ice_breaker_messages,ad_id:c.ad_id}]):c.__typename==="WECMessage"?b("bs_block").__(38,[{sender_wec_number:c.sender_wec_number,sender_wec_number_formated:c.sender_wec_number_formated,sender_wec_number_fbid:c.sender_wec_number_fbid,sender_wec_name:c.sender_wec_name}]):c.__typename==="WECMessageImage"?b("bs_block").__(39,[{id:c.id,extension:c.extension,preview:c.preview,large_preview:c.large_preview}]):c.__typename==="WECMessageFile"?b("bs_block").__(41,[{id:c.id,name:c.name,is_malicious:c.is_malicious,uri:c.uri,extension:c.extension,filesize:c.filesize}]):c.__typename==="WECMessageVideo"?b("bs_block").__(42,[{id:c.id,playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension,filename:c.filename,height:c.height,width:c.width}]):c.__typename==="MontageDirect"?b("bs_block").__(43,[{message_state:c.message_state,is_keep_disabled:c.is_keep_disabled,blob_media_type:c.blob_media_type,blob_media:c.blob_media,image:c.image}]):c.__typename==="MBirthdayReminderAttachment"?b("bs_block").__(44,[{friend_id:c.friend_id,confidence:c.confidence,birthday_date:c.birthday_date}]):c.__typename==="MPersonalRemindersList"?b("bs_block").__(45,[{has_more_upcoming_reminders:c.has_more_upcoming_reminders,personal_reminders:c.personal_reminders}]):c.__typename==="MentorshipMessengerCurriculumStep"?b("bs_block").__(46,[{id:c.id,module_name:c.module_name,mentorship_program:c.mentorship_program,program_name:c.program_name,curriculum_message:c.curriculum_message,prompt:c.prompt,step_count:c.step_count,total_steps:c.total_steps}]):c.__typename==="MentorshipMessengerDiscussionTopicSet"?b("bs_block").__(47,[{id:c.id,topics:c.topics}]):c.__typename==="MentorshipMessengerLeavePrompt"?b("bs_block").__(48,[{mentorship_program:c.mentorship_program,id:c.id,xma_type:c.xma_type}]):c.__typename==="MentorshipMessengerReminder"?b("bs_block").__(49,[{id:c.id,xma_type:c.xma_type}]):c.__typename==="MentorshipMessengerSurvey"?b("bs_block").__(50,[{id:c.id,xma_type:c.xma_type,xma_title:c.xma_title,xma_disclaimer:c.xma_disclaimer,mentorship_program:c.mentorship_program}]):c.__typename==="MentorshipMessengerProgressTracker"?b("bs_block").__(51,[{id:c.id,xma_type:c.xma_type,xma_title:c.xma_title,xma_body:c.xma_body}]):c.__typename==="Story"?b("bs_block").__(53,[{title:c.title,description:c.description,actors:c.actors,to:c.to,attachments:c.attachments,attached_story:c.attached_story}]):c.__typename==="User"?b("bs_block").__(54,[{type:c.__typename,id:c.id,name:c.name,profile_picture:c.profile_picture,cover_photo:c.cover_photo,work_info:c.work_info,subscribe_status:c.subscribe_status}]):c.__typename==="Group"?b("bs_block").__(55,[{type:c.__typename,id:c.id,name:c.name,cover_photo:c.cover_photo,visibility:c.visibility,visibility_sentence:c.visibility_sentence,viewer_join_state:c.viewer_join_state,group_general_chat:c.group_general_chat,work_groups_sync_metadata:c.work_groups_sync_metadata}]):c.__typename==="AppContent"?b("bs_block").__(56,[{type:c.__typename,id:c.id,attachment_type_name:c.attachment_type_name,privacy_status:c.privacy_status,file_type_category:c.file_type_category,app_integration:c.app_integration,attachment_icon:c.app_integration,content_uri:c.content_uri,link_preview_additional_data:c.link_preview_additional_data}]):null;return{description:a.description,media:a.media,source:a.source,style_list:j(a.style_list),title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:d}}function l(a){var b=k({description:a.description,media:a.media,source:a.source,style_list:a.style_list,title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:a.target});if(b==null)return null;else{a=a.subattachments.map(k);return Object.assign({subattachments:a},b)}}function m(a){__p&&__p();a=a.message;if(a==null)return[];else{var b=[];a.ranges.forEach(function(a){__p&&__p();var c=a.entity;if(c==null)return 0;else{var d=c.id;c=c.thread_key;if(d==null)if(c==null)return 0;else{c=c.thread_fbid;if(c==null)return 0;else{b.push({id:c,offset:a.offset,length:a.length,type:a.__typename});return 0}}else{b.push({id:d,offset:a.offset,length:a.length,type:a.__typename});return 0}}});return b}}function n(a,c,d,e){__p&&__p();var f={};c.message_reactions.forEach(function(a){f[a.user.id]=a.reaction;return 0});var j=b("FBIDCheck").isUser_deprecated(c.message_sender.id),k=j?b("MessagingTagUtils").getSourceFromTags(c.tags_list):b("MessagingSourceEnum").UNKNOWN;j=j?b("MessagingTagUtils").getSourceTags(c.tags_list,k):[];var o=c.message_id,p=d.thread_id,q=d.thread_fbid,r=d.other_user_fbid;r=p==null?q==null?r==null?null:b("MercuryIDs").getThreadIDFromUserID(r):b("MercuryIDs").getThreadIDFromThreadFBID(q):p;q=c.tags_list.some(function(a){if(a===b("MessagingTag").ACTION_COPIED_MESSAGE||a===b("MessagingTag").ACTION_COPIED_SELF_MESSAGE||a===b("MessagingTag").ACTION_COPIED_ATTACHMENT)return!0;else return a===b("MessagingTag").ACTION_COPIED_SELF_ATTACHMENT});p=c.commerce_message_type;var s=c.customizations,t=c.replied_to_message,u;if(t==null)u=null;else{var v=t.message;u=v==null?{status:t.status,message:null}:{status:t.status,message:b("bs_js_null_undefined").fromOption(b("bs_caml_option").some(n(a,v,d,e)))}}t=c.error_data;v=c.unsent_timestamp_precise;v=v==null||v==="0"?null:b("bs_js_null_undefined").fromOption(b("bs_caml_format").caml_float_of_string(v));var w=c.unsender;r={thread_id:r,thread_fbid:d.thread_fbid,other_user_fbid:d.other_user_fbid,action_type:c.__typename==="UserMessage"?b("MercuryActionType").USER_GENERATED_MESSAGE:b("MercuryActionType").LOG_MESSAGE,message_id:o,threading_id:null,offline_threading_id:c.offline_threading_id,author:b("MercuryIDs").getParticipantIDFromUserID(c.message_sender.id),author_email:c.message_sender.email,ephemeral_ttl_mode:c.ttl,timestamp:b("bs_caml_format").caml_float_of_string(c.timestamp_precise),is_unread:c.unread,is_filtered_content:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT)!==-1,is_filtered_content_bh:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_BH)!==-1,is_filtered_content_account:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_ACCOUNT)!==-1,is_filtered_content_quasar:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_QUASAR)!==-1,is_filtered_content_invalid_app:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_INVALID_APP)!==-1,is_sponsored:c.is_sponsored,is_one_way_sent:c.tags_list.some(function(a){return a===b("MessagingTag").ONE_WAY_MESSAGE}),ad_id:c.ad_id,ad_client_token:c.ad_client_token,commerce_message_type:p==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MNCommerceMessageType"),p)),customizations:s==null?[]:s,source:k,source_tags:j,tags:c.tags_list,is_spoof_warning:c.tags_list.indexOf(b("MessagingTag").DOMAIN_AUTH_FAIL)!==-1||c.tags_list.indexOf(b("MessagingTag").SPAM_SPOOFING)!==-1||c.tags_list.indexOf(b("MessagingTag").SPOOF_WARNING)!==-1,folder:d.folder,platform_xmd:c.platform_xmd_encoded,m_suggestions:c.m_suggestions,message_source:c.message_source_data,montage_reply_data:c.montage_reply_data,replied_to_message:u,skip_bump_thread:!1,profile_ranges:m(c),reactions:f,error_data:t==null?null:{description:t.description},removed_timestamp:v,unsender:w==null?null:{id:b("MercuryIDs").getParticipantIDFromUserID(w.messaging_actor.id),name:w.messaging_actor.name,short_name:w.messaging_actor.short_name},verse_group_role_xmd:c.verse_group_role_xmd,mib_direct_message_data:c.mib_direct_message_data,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.message_unsendability_status),has_attachment:null,attachments:null,raw_attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,body:null,subject:null,creator_info:null,is_forwarded:q,preview_attachments:null,sticker_id:null};if(c.__typename==="UserMessage"){p=g(c);s=c.extensible_attachment;if(s==null)k=null;else{j=s.story_attachment;u=s.genie_attachment;if(u==null)t=null;else{v=u.genie_message;if(v==null)w=null;else{q=v.story_attachment;w={story_attachment:q==null?null:l(q)}}t={genie_message:w}}k={legacy_attachment_id:s.legacy_attachment_id,story_attachment:j==null?null:l(j),genie_attachment:t}}u=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:k,blob_attachments:p,sticker:c.sticker},o,e);v=c.message;q=c.page_admin_sender;Object.assign(r,{body:v==null?null:v.text,creator_info:q==null?null:{creatorID:q.admin_id,creatorName:q.name,creatorType:q.sender_type,labelType:q.label_type,pageID:q.page_id,profileURI:q.profile_uri},subject:null,has_attachment:u.length>0,attachments:u,raw_attachments:null,ranges:void 0,meta_ranges:c.meta_ranges.map(function(a){return babelHelpers["extends"]({},a,{data:JSON.parse(a.data)})})})}else if(c.__typename==="VoiceCallMessage"||c.__typename==="VideoCallMessage"){w=c.__typename;s=w==="VoiceCallMessage"?b("MercuryLogMessageType").PHONE_CALL:b("MercuryLogMessageType").VIDEO_CALL;j=c.message_sender.id;t=d.other_user_fbid;k=t==null?null:b("MercuryIDs").getParticipantIDFromUserID(j===t?b("CurrentUser").getID():t);p=c.answered;Object.assign(r,{log_message_type:s,log_message_data:{answered:p==null?!1:p,call_capture_attachments:h(a,c,e),caller:b("MercuryIDs").getParticipantIDFromUserID(j),callee:k},log_message_body:c.snippet})}else if(c.__typename==="ThreadNameMessage")Object.assign(r,{log_message_type:b("MercuryLogMessageType").THREAD_NAME,log_message_data:{name:c.thread_name},log_message_body:c.snippet});else if(c.__typename==="ThreadImageMessage"){o=c.image_with_metadata;if(o==null)v=null;else{q=o.preview;v={preview_url:q==null?null:q.uri,metadata:{fbid:o.legacy_attachment_id,dimensions:String(o.original_dimensions.x)+(","+String(o.original_dimensions.y))}}}Object.assign(r,{log_message_type:b("MercuryLogMessageType").THREAD_IMAGE,log_message_data:{image:v},log_message_body:c.snippet})}else if(c.__typename==="ParticipantsAddedMessage"){u=c.participants_added;Object.assign(r,{log_message_type:b("MercuryLogMessageType").SUBSCRIBE,log_message_data:{added_participants:u==null?[]:u.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)})},log_message_body:c.snippet})}else if(c.__typename==="ParticipantLeftMessage"){w=c.participants_removed;Object.assign(r,{log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE,log_message_data:{removed_participants:w==null?[]:w.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)})},log_message_body:c.snippet})}else if(c.__typename==="GenericAdminTextMessage"){d=c.extensible_message_admin_text;t=c.extensible_message_admin_text_type;d==null?t==null||Object.assign(r,{log_message_body:c.snippet,log_message_data:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),t)),untypedData:void 0},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}):t==null||Object.assign(r,i(a,d,t,c.snippet,e))}else if(c.__typename==="P2PPaymentRequestMessage"||c.__typename==="P2PPaymentMessage"){s=c.p2p_sender;p=c.p2p_receiver;j=c.amount;k=c.message_type;Object.assign(r,{log_message_body:c.snippet,log_message_data:{transfer_id:c.transfer_id,senderId:s==null?null:b("MercuryIDs").getParticipantIDFromUserID(s.id),receiverId:p==null?null:b("MercuryIDs").getParticipantIDFromUserID(p.id),formattedAmount:j==null?null:j.formatted,subtype:k==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("P2PPaymentLogMessageSubtype"),k))},log_message_type:b("MercuryLogMessageType").ORION})}return r}f.unsafeCastBlobAttachments=g;f._getCallCaptureAttachments=h;f._getGenericAdminTextMessage=i;f._getStyleList=j;f.unsafeCastExtensibleAttachmentWithoutSubattachments=k;f.unsafeCastExtensibleAttachment=l;f._getProfileRanges=m;f.transformMessage=n}),null);
__d("MessengerThreadCannotReplyReason.bs",["bs_js_dict","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return;else return b("bs_js_dict").get(b("MessengerThreadCannotReplyReason"),a)}function c(a){if(a==null)return null;else if(a!==0)switch(a-1|0){case 0:return b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE;case 1:return b("MessengerThreadCannotReplyReason").BLOCKED;case 2:return b("MessengerThreadCannotReplyReason").MESSENGER_BLOCKEE}else return b("MessengerThreadCannotReplyReason").BLOCKED}f.fromName=a;f.fromMessageThreadCannotReplyReason=c}),null);
__d("MessengerServerPayloadTransformer.bs",["fbt","URI","FBID.bs","bs_array","bs_string","bs_js_dict","bs_js_json","getByPath","bs_caml_array","ChatConfig","MercuryIDs","bs_belt_Option","bs_caml_format","bs_caml_option","CurrentUser","GenderConst","bs_js_null_undefined","DisplayGenderConst","MessagingThreadType","isMessengerDotComURI","WorkForeignEntityType","MercuryParticipantTypes","MessengerGroupAdminType","MessengerGroupsSyncStatus.bs","MessengerGroupThreadSubType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs","MessengerGroupAdminModelStatus.bs","MessengerObjectAssociationType","MessageThreadUnsendabilityStatus.bs","MessengerThreadCannotReplyReason","MessengerThreadCannotReplyReason.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;function i(a){__p&&__p();var c=a.location_coordinates;c=c==null?[null,null]:[c.latitude,c.longitude];var d=a.location_page,e;if(d==null)e=null;else{d=d.address;e=d==null?null:d.full_address}d=a.allows_rsvp;d=d?1:0;var f=b("bs_array").fold_left(function(a,b){a[b.node.id]=b.guest_list_state;return a},{},a.event_reminder_members.edges),g=a.lightweight_event_creator;return{creator_id:g==null?null:g.id,event_members:f,event_time:a.time,event_type:a.lightweight_event_type,latitude:c[0],longitude:c[1],location_address:e,location_name:a.location_name,note:a.note,oid:a.id,related_event:a.related_event,repeat_mode:a.repeat_mode,seconds_to_notify_before:a.seconds_to_notify_before,status:a.lightweight_event_status,title:a.event_title,track_rsvp:d}}function j(a){__p&&__p();a=a.associated_object;if(a==null)return null;else{var c=a.action_link,d;if(c==null)d=null;else{var e=b("CurrentUser").isWorkUser();d=e?c:new(h||(h=b("URI")))(c).setDomain("www.facebook.com")}e=a.profile_picture;c=a.group_general_chat;var f=a.group_events,g=a.group_saves,i=a.verse_group_link;return{id:a.id,name:a.name,action_link:d,profile_picture:e==null?null:{uri:e.uri},group_general_chat:c==null?null:{id:c.id},room_type:a.room_type,privacy_mode:a.privacy_mode,approval_mode_toggleable:a.approval_mode_toggleable,start_timestamp:a.start_timestamp,event_place:a.event_place,mentorship_program:a.mentorship_program,group_events:f==null?{count:0}:{count:f.count},group_saves:g==null?{count:0}:{count:g.count},verse_group_link:i==null?null:new(h||(h=b("URI")))(i).setDomain("www.facebook.com")}}}function k(a){a=a.related_page_thread;if(a==null)return null;else{var b=a.custom_thread_tags.nodes.map(function(a){return{id:a.id,name:a.name,color:a.color}}),c=a.custom_thread_labels.nodes.map(function(a){return{id:a.id,name:a.name,color:a.label_color}}),d=a.page;d=d==null?null:d.id;return{flagged:a.is_flagged,pageID:d,customTags:b,customLabels:c}}}function l(a){__p&&__p();var c=a.thread_key.other_user_id;if(c==null)return!1;else{a=a.all_participants.edges;return b("bs_array").fold_left(function(a,b){b=b.node.messaging_actor;if(b.id===c)return b.__typename==="User";else return a},!1,a)}}function m(a){__p&&__p();if(a.length!==0){var b={};a.forEach(function(a){var c=a.nickname;if(c==null)return 0;else{b[a.participant_id]=c;return 0}});return b}else return null}function n(a){return"#"+b("bs_string").sub(a,2,a.length-2|0)}function o(a){if(a==null||a==="")return null;else return n(a)}function a(a){return a.thread_key.thread_fbid}function c(a){return a.thread_key.other_user_id}function d(a){return b("bs_caml_option").nullable_to_opt(b("getByPath")(a,["messages","page_info"]))}function e(a){var c=b("CurrentUser").isWorkUser();c=c?g._("Workplace User"):g._("Facebook User");return{id:"fbid:"+a,fbid:b("FBID.bs").ofStringExn(a),gender:b("GenderConst").UNKNOWN_SINGULAR,href:null,image_src:null,big_image_src:null,name:c,short_name:c,user_type:null,vanity:null,accepts_messenger_user_feedback:!1,is_friend:!1,is_viewer_managing_parent:!1,is_messenger_user:!1,is_aloha_proxy_confirmed:!1,is_business_enabled:!1,is_messenger_platform_bot:!1,is_messenger_ignored:null,is_messenger_blocked:!1,is_facebook_blocked:!0,is_subscribed_to_page_updates:!1,title:null,company_name:null,employee:!1,instant_game_channel:null,work_foreign_entity_info:null,timezone:null,wec_group_admins:[],wec_group_creation_time:null,wec_group_invite_link:null,wec_group_participant_count:null,wec_group_participants:[],verification_status:null}}function p(a){__p&&__p();var c=a.profile_picture_url;if(c==null){var d=a.big_image_src;d=d==null?null:d.uri}else d=c;c=a.gender;var e=a.url,f;if(e==null)f=null;else{var g=b("isMessengerDotComURI")(new(h||(h=b("URI")))(e));f=g?new(h||(h=b("URI")))(e).getUnqualifiedURI().setDomain("www.facebook.com").setProtocol("https").toString():e}g=a.__typename;var i;switch(g){case"MessengerCallGuestUser":i=b("MercuryParticipantTypes").GUEST;break;case"NeoApprovedUser":i=b("MercuryParticipantTypes").PARENT_APPROVED_USER;break;case"Page":i=b("MercuryParticipantTypes").PAGE;break;case"User":i=b("MercuryParticipantTypes").USER;break;default:i=null}e=a.accepts_messenger_user_feedback;g=a.is_viewer_friend;var j=a.is_viewer_managing_parent,k=a.is_messenger_user,l=a.is_aloha_proxy_confirmed,m=a.is_messenger_platform_bot,n=a.is_message_blocked_by_viewer,o=a.is_blocked_by_viewer,p=a.is_viewer_subscribed_to_message_updates,q=a.work_info,r;if(q==null)r=null;else{var s=q.work_community;s=s==null?null:s.name;q=q.job_title;r=s==null?q==null?null:q:q==null||q.length===0?s:""+(String(q)+(" \u2022 "+(String(s)+"")))}q=a.work_info;if(q==null)s=null;else{q=q.work_community;q=q==null?null:q.name;var t=a.work_foreign_entity_info;s=q==null||t==null||t.type!==b("WorkForeignEntityType").FOREIGN?null:q}t=a.is_employee;q=a.work_foreign_entity_info;var u=a.wec_group_creation_time,v=a.wec_group_invite_link,w=a.wec_group_participants,x=a.wec_group_participants,y=a.wec_group_admins;return{id:"fbid:"+a.id,fbid:a.id,gender:c==null?b("GenderConst").NOT_A_PERSON:c===b("DisplayGenderConst").MALE?b("GenderConst").MALE_SINGULAR:c===b("DisplayGenderConst").FEMALE?b("GenderConst").FEMALE_SINGULAR:b("GenderConst").NOT_A_PERSON,href:f,image_src:d,big_image_src:d,name:a.name,short_name:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(a.short_name),a.name),user_type:i,vanity:a.username,accepts_messenger_user_feedback:e==null?!1:e,is_friend:g==null?!1:g,is_viewer_managing_parent:j==null?!1:j,is_messenger_user:k==null?!1:k,is_aloha_proxy_confirmed:l==null?!1:l,is_business_enabled:a.__typename==="Page",is_messenger_platform_bot:m==null?!1:m,is_messenger_ignored:null,is_messenger_blocked:n==null?!1:n,is_facebook_blocked:o==null?!1:o,is_subscribed_to_page_updates:p==null?!0:p,title:r,company_name:s,employee:t==null?!1:t,instant_game_channel:a.__typename==="Page"?a.instant_game_channel:null,work_foreign_entity_info:q==null?null:q,timezone:null,wec_group_creation_time:u==null?null:u,wec_group_invite_link:v==null?null:v,wec_group_participant_count:w==null?null:w.count,wec_group_participants:x==null?[]:x.nodes.map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}}),wec_group_admins:y==null?[]:y.nodes.map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}}),verification_status:a.verification_status}}function q(a){return a.all_participants.edges.map(function(a){return p(a.node.messaging_actor)})}function r(a,c){__p&&__p();c=c.read_receipts;if(c==null)return;else{var d={};c.nodes.forEach(function(c){var e=c.actor;if(!(e==null)&&a!==e.id){d[e.id]={action:b("bs_caml_format").caml_float_of_string(c.action),watermark:b("bs_caml_format").caml_float_of_string(c.watermark)};return 0}else return 0});return b("bs_caml_option").some(d)}}function s(a){__p&&__p();a=a.delivery_receipts;if(a==null)return[];else return a.nodes.sort(function(a,c){a=b("bs_caml_format").caml_float_of_string(a.timestamp_precise);c=b("bs_caml_format").caml_float_of_string(c.timestamp_precise);if(a>c)return-1;else if(a===c)return 0;else return 1})}function t(a,c,d){var e=c.messages;if(e==null)return;else return e.nodes.map(function(e){return b("MessengerMessageTransformer.bs").transformMessage(a,e,{thread_id:null,thread_fbid:c.thread_key.thread_fbid,other_user_fbid:c.thread_key.other_user_id,folder:c.folder.toLowerCase()},d)})}function u(a,c,d){__p&&__p();var e=c.last_message.nodes.map(function(e){__p&&__p();var f=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(e),g=e.extensible_attachment,h;if(g==null)h=null;else{var i=g.story_attachment,a=g.genie_attachment,c;if(a==null)c=null;else{a=a.genie_message;var d;if(a==null)d=null;else{a=a.story_attachment;d={story_attachment:a==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(a)}}c={genie_message:d}}h={legacy_attachment_id:g.legacy_attachment_id,story_attachment:i==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(i),genie_attachment:c}}return{message_id:e.message_id,snippet:e.snippet,message_sender:e.message_sender,timestamp_precise:e.timestamp_precise,commerce_message_type:e.commerce_message_type,extensible_attachment:h,blob_attachments:f,sticker:e.sticker,extensible_message_admin_text:e.extensible_message_admin_text,platform_xmd_encoded:e.platform_xmd_encoded,extensible_message_admin_text_type:e.extensible_message_admin_text_type,message_unsendability_status:e.message_unsendability_status}}),f={id:c.id,thread_key:c.thread_key,name:c.name,all_participants:c.all_participants,last_message:{nodes:e},unread_count:c.unread_count,message_count:c.messages_count,image:c.image,updated_time_precise:c.updated_time_precise,mute_until:c.mute_until,is_pinned:c.is_pinned,is_pin_protected:c.is_pin_protected,is_viewer_subscribed:c.is_viewer_subscribed,is_canonical_neo_user:c.is_canonical_neo_user,thread_queue_enabled:c.thread_queue_enabled,folder:c.folder,unread_mentions_count:c.unread_mentions_count,has_viewer_archived:c.has_viewer_archived,is_page_follow_up:c.is_page_follow_up,is_page_unresponded_thread:c.is_page_unresponded_thread,cannot_reply_reason:c.cannot_reply_reason,can_viewer_report:c.can_viewer_report,ephemeral_ttl_mode:c.ephemeral_ttl_mode,customization_info:c.customization_info,thread_admins:c.thread_admins,approval_mode:c.approval_mode,joinable_mode:c.joinable_mode,thread_queue_metadata:c.thread_queue_metadata,event_reminders:c.event_reminders,montage_thread:c.montage_thread,last_read_receipt:c.last_read_receipt,related_page_thread:c.related_page_thread,rtc_call_data:c.rtc_call_data,associated_object:c.associated_object,reactions_mute_mode:c.reactions_mute_mode,mentions_mute_mode:c.mentions_mute_mode,privacy_mode:c.privacy_mode,customization_enabled:c.customization_enabled,thread_type:c.thread_type,group_thread_subtype:c.group_thread_subtype,thread_pin_timestamp:c.thread_pin_timestamp,page_unsubscribe_status:c.page_unsubscribe_status,participant_add_mode_as_string:c.participant_add_mode_as_string,participants_event_status:c.participants_event_status,marketplace_thread_data:c.marketplace_thread_data,page_comm_item:c.page_comm_item,group_approval_queue:c.group_approval_queue,admin_model_status_string:c.admin_model_status_string,groups_sync_status_string:c.groups_sync_status_string,work_groups_sync_metadata:c.work_groups_sync_metadata,pinned_messages:c.pinned_messages,description:c.description,joinable_link:c.joinable_link,linked_mentorship_programs:c.linked_mentorship_programs,theme:c.thread_theme,thread_connectivity_data:c.thread_connectivity_data,thread_unsendability_status:c.thread_unsendability_status,is_business_page_active:c.is_business_page_active,thread_associated_job_applications:c.thread_associated_job_applications,thread_associated_page_admin:c.thread_associated_page_admin};e=f.customization_info;if(e==null)c=[null,null,null];else{var g=e.emoji;c=[o(e.outgoing_bubble_color),g==null?null:{emoji:g},m(e.participant_customizations)]}g=c[0];e=f.theme;if(e==null)g=[g,g,g,[],null,void 0];else{var h=e.reaction_pack,p;if(h==null)p=void 0;else{h=h.reaction_assets;p=h==null?void 0:h.nodes.map(function(a){return{reactionName:a.reaction_name,reactionEmoji:a.reaction_emoji,keyframeAssetUri:a.keyframe_asset_uri,staticAssetUri:a.static_asset.uri}})}h=e.gradient_colors.length;var q=n(e.fallback_color),r=b("FBID.bs").ofString(e.id);r=r!==void 0?b("bs_caml_option").valFromOption(r):null;if(h>0&&b("ChatConfig").get("chat_tab_has_gradients")){e=e.gradient_colors.map(n);g=[q,b("bs_caml_array").caml_array_get(e,0),b("bs_caml_array").caml_array_get(e,h-1|0),e,r,p]}else g=[q,q,q,[],r,p]}h=f.page_comm_item;e=h==null?[null,null,null,null,null,[]]:[h.comm_status,h.comm_source_id,h.id,h.subtitle,h.comm_item_owners,h.comm_icon_type];q=f.last_message.nodes;r=q.length!==0?b("bs_caml_option").some(q[0]):void 0;p=f.last_read_receipt.nodes;h=p.length!==0?b("bs_caml_option").some(p[0]):void 0;if(r!==void 0){q=b("bs_caml_option").valFromOption(r);p=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:q.extensible_attachment,blob_attachments:q.blob_attachments,sticker:q.sticker},q.message_id,d)}else p=[];if(r!==void 0){q=b("bs_caml_option").valFromOption(r).extensible_message_admin_text;if(q==null)d=null;else{q=q.game;d=q==null?null:q.id}}else d=null;q=b("MessengerThreadCannotReplyReason.bs").fromName(f.cannot_reply_reason);var s=f.thread_key.other_user_id;if(s==null){var t=f.thread_key.thread_fbid;t=t==null?null:t}else t=s;s=b("bs_array").fold_left(function(a,c){a[c.id]=b("MessengerGroupAdminType").REGULAR_ADMIN;return a},{},f.thread_admins);s=b("bs_array").fold_left(function(a,c){var d=c.node.messaging_actor.id;c=c.admin_type;var e=b("bs_js_dict").get(a,d);c==null||e!==void 0&&(a[d]=c);return a},s,f.all_participants.edges);var u=f.thread_queue_metadata,v=f.thread_type,w=f.group_thread_subtype,x=f.montage_thread,y=f.image,z=f.thread_key.other_user_id,A;if(r!==void 0){var B=b("bs_caml_option").valFromOption(r).platform_xmd_encoded;if(B==null)A=!1;else{try{B=JSON.parse(B)}catch(a){B={}}B=b("bs_js_json").classify(B);A=typeof B==="number"||B.tag!==2?!1:b("bs_js_dict").get(B[0],"landing_exp")!==void 0}}else A=!1;B=f.thread_queue_metadata;var C=f.event_reminders.nodes,D=f.name,E=f.associated_object,F;if(E==null)F=null;else{E=E.group_general_chat;if(E==null||t==null)F=null;else{E=E.id===t;F=E?b("MessengerObjectAssociationType").GENERAL_CHAT:b("MessengerObjectAssociationType").REGULAR_CHAT}}E=f.rtc_call_data;var G;if(E==null)G=null;else{var H=E.initiator;G={call_state:E.call_state,server_info_data:E.server_info_data,initiator_fbid:H==null?null:b("bs_js_null_undefined").fromOption(b("FBID.bs").ofString(H.id))}}E=f.marketplace_thread_data;if(E==null)H=null;else{var I=E.for_sale_item,J;if(I==null)J=null;else{var K=I.formatted_price,L=I.location,M;if(L==null)M=null;else{L=L.reverse_geocode;M={reverse_geocode:L==null?null:{city:L.city,state:L.state}}}L=I.primary_photo;var N;if(L==null)N=null;else{L=L.image;N=L==null?null:L.uri}L=I.product_item;J={id:I.id,story_id:I.story_id,title:I.group_commerce_item_title,price:K==null?null:K.text,location:M,is_pending:I.is_pending,is_sold:I.is_sold,image_uri:N,is_commerce_post_item:L==null?!1:L.is_commerce_post_item,url:I.url}}K=E.buyer;M=E.seller;N=E.rating_state;H={for_sale_item:J,buyer_fbid:K==null?null:K.id,seller_fbid:M==null?null:M.id,is_eligible_to_rate:N==null?null:N.is_eligible_to_rate,eligible_profile_selling_invoice_actions:E.eligible_profile_selling_invoice_actions,thread_fbid:t}}L=f.group_approval_queue;I=f.work_groups_sync_metadata;if(I==null)J=null;else{K=I.fb_group;J=K==null?null:K}M=f.pinned_messages;N=f.linked_mentorship_programs;E=f.thread_associated_job_applications;return{admins:s,approval_mode:f.approval_mode,approval_queue_ids:u==null?[]:u.approval_requests.nodes.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(a.id))}),can_reply:q===void 0,cannot_reply_reason:q!==void 0?b("bs_caml_option").valFromOption(q):null,can_viewer_report:f.can_viewer_report,solid_color:g[0],header_color:g[1],footer_color:g[2],gradient_colors:g[3],theme_id:g[4],reactions:g[5],thread_connectivity_data:f.thread_connectivity_data,custom_like_icon:c[1],custom_nickname:c[2],customization_enabled:f.customization_enabled,thread_type:v==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingThreadType"),v)),group_thread_subtype:w==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessengerGroupThreadSubType"),w)),page_unsubscribe_status:f.page_unsubscribe_status,participant_add_mode:f.participant_add_mode_as_string,ephemeral_ttl_mode:f.ephemeral_ttl_mode,folder:f.folder.toLowerCase(),has_email_participant:q!==void 0?b("bs_caml_option").valFromOption(q)===b("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT:!1,has_montage:!(x==null),unread_mentions_count:f.unread_mentions_count,image_src:y==null?null:y.uri,is_archived:f.has_viewer_archived,is_pinned:f.is_pinned,is_page_follow_up:f.is_page_follow_up,is_page_unresponded_thread:f.is_page_unresponded_thread,is_canonical_user:l(f),is_canonical:!(z==null),is_from_weak_entry_point:A,is_pin_protected:f.is_pin_protected,is_subscribed:f.is_viewer_subscribed,is_canonical_neo_user:f.is_canonical_neo_user,is_thread_queue_enabled:!(B==null),joinable_mode:{mode:b("bs_caml_format").caml_int_of_string(f.joinable_mode.mode),link:f.joinable_mode.link},last_message_timestamp:r!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_caml_option").valFromOption(r).timestamp_precise):0,last_message_id:null,last_message_type:r!==void 0?b("bs_caml_option").valFromOption(r).commerce_message_type:null,last_message_admin_text_type:r!==void 0?b("bs_caml_option").valFromOption(r).extensible_message_admin_text_type:null,last_message_unsendability_status:r!==void 0?b("bs_caml_option").valFromOption(r).message_unsendability_status:null,last_read_timestamp:h!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_caml_option").valFromOption(h).timestamp_precise):0,lightweight_event:C.length!==0?i(C[0]):null,lightweight_events:b("bs_array").fold_left(function(a,b){a[b.id]=i(b);return a},{},f.event_reminders.nodes),message_count:f.message_count,mute_until:f.mute_until,name:D==null?"":D,object_association_type:F,other_user_fbid:f.thread_key.other_user_id,page_thread_info:k(f),participants:f.all_participants.edges.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.node.messaging_actor.id)}),participants_event_status:f.participants_event_status,read_only:q!==void 0?b("bs_caml_option").valFromOption(q)===b("MessengerThreadCannotReplyReason").READ_ONLY:!1,recipients_loadable:q!==void 0?b("bs_caml_option").valFromOption(q)!==b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE:!0,server_timestamp:b("bs_caml_format").caml_float_of_string(f.updated_time_precise),snippet_attachments:p,snippet_sender:r!==void 0?b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(r).message_sender.messaging_actor.id):null,snippet:r!==void 0?b("bs_caml_option").valFromOption(r).snippet:null,thread_fbid:t,thread_id:"",thread_pin_timestamp:f.thread_pin_timestamp,timestamp:b("bs_caml_format").caml_float_of_string(f.updated_time_precise),unread_count:f.unread_count,rtc_call_data:G,marketplace_thread_data:H,associated_object:j(f),reactions_mute_mode:f.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:f.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:e[0],page_comm_item_id:e[2],comm_source_id:e[1],subtitle:e[3],comm_item_owners:e[4],comm_icon_type:e[5],group_approval_queue:L==null?null:L.nodes,game_id:d,admin_model_status:b("MessengerGroupAdminModelStatus.bs").fromNullableString(f.admin_model_status_string),groups_sync_status:b("MessengerGroupsSyncStatus.bs").fromNullableString(f.groups_sync_status_string),work_associated_group:J,pinned_messages:M==null?null:M.map(function(c){var d=c.message;return{message_id:c.message_id,pinning_time:c.pinning_time,message:d==null?null:b("MessengerMessageTransformer.bs").transformMessage(a,d,{thread_id:null,thread_fbid:f.thread_key.thread_fbid,other_user_fbid:f.thread_key.other_user_id,folder:f.folder.toLowerCase()},!1)}}),description:f.description,joinable_link:f.joinable_link,linked_mentorship_programs:N==null?null:N,thread_unsendability_status:b("MessageThreadUnsendabilityStatus.bs").fromNullableString(f.thread_unsendability_status),is_business_page_active:f.is_business_page_active,thread_associated_job_applications:E==null?null:E,thread_associated_page_admin:f.thread_associated_page_admin,graphql_token:f.id}}f.getThreadFBID=a;f.getOtherUserID=c;f.getMessagePageInfo=d;f.getBlockedParticipant=e;f.transformParticipant=p;f.transformParticipants=q;f.transformReadReceipts=r;f.transformDeliveryReceipts=s;f.transformMessages=t;f.transformThread=u}),null);
__d("MessengerGraphQLThreadFetcher.bs",["Promise","gkx","BanzaiODS","bs_caml_array","bs_pervasives","WebGraphQL","bs_caml_format","bs_caml_option","bs_js_null_undefined","MercuryServerRequestsConfig","ChatReliabilityInstrumentation","MessengerThreadFetchLoggerUtil","MessengerThreadsWebGraphQLQuery","MessengerServerPayloadTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e,f){__p&&__p();if(a==null)if(e)return{actions:null,thread:void 0,end_of_history:{type:"user",fbid:c},roger:null,delivery_receipts:[]};else return{actions:null,thread:void 0,end_of_history:void 0,roger:null,delivery_receipts:[]};else{e=[];var g=b("MessengerServerPayloadTransformer.bs").getThreadFBID(a),h=b("MessengerServerPayloadTransformer.bs").getOtherUserID(a);g=h==null?g==null?b("bs_pervasives").failwith("No thread ID"):g:h;g!==c&&b("bs_pervasives").failwith("Thread ID mismatch");h=b("MessengerServerPayloadTransformer.bs").transformThread(d,a,f);g=b("bs_js_null_undefined").fromOption(b("MessengerServerPayloadTransformer.bs").transformMessages(d,a,f));f=b("MessengerServerPayloadTransformer.bs").transformReadReceipts(d,a);if(f!==void 0){d={};d[c]=b("bs_caml_option").valFromOption(f);f=d}else f=null;d=b("MessengerServerPayloadTransformer.bs").transformDeliveryReceipts(a);if(d.length>=1){d=b("bs_caml_array").caml_array_get(d,0);h.is_canonical?e.push({other_user_fbid:c,thread_fbid:null,time:b("bs_caml_format").caml_float_of_string(d.timestamp_precise)}):e.push({other_user_fbid:null,thread_fbid:c,time:b("bs_caml_format").caml_float_of_string(d.timestamp_precise)})}d=b("MessengerServerPayloadTransformer.bs").getMessagePageInfo(a);if(d!==void 0)if(b("bs_caml_option").valFromOption(d).has_previous_page)return{actions:g,thread:h,end_of_history:void 0,roger:f,delivery_receipts:e};else return{actions:g,thread:h,end_of_history:{type:"thread",fbid:c},roger:f,delivery_receipts:e};else return{actions:g,thread:h,end_of_history:void 0,roger:f,delivery_receipts:e}}}function h(a){b("MessengerThreadFetchLoggerUtil").markerPoint(a.id,"sendThreadInfoFetchRequest");return new(b("MessengerThreadsWebGraphQLQuery"))({id:a.id,message_limit:a.limit,load_messages:a.limit>0,load_read_receipts:a.loadReadReceipts,load_delivery_receipts:a.loadDeliveryReceipts,before:a.timestamp,is_work_teamwork_not_putting_muted_in_unreads:b("gkx")("1105011")})}function a(a,c,d){__p&&__p();var e=c.map(h);return b("Promise").all(b("WebGraphQL").execAll(e,{actorID:d?a:null,batchName:"MessengerGraphQLThreadFetcher",msgrRegion:b("MercuryServerRequestsConfig").msgrRegion,allowCrossPageTransition:!0}))["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_thread.failure");c.forEach(function(a){b("MessengerThreadFetchLoggerUtil").markerEnd(a.id,"FAIL");return 0});b("ChatReliabilityInstrumentation").logERROR("fetch_thread_fail");return b("Promise").reject(a)}).then(function(e){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_thread.success");return e.map(function(e,f){e=e.message_thread;f=b("bs_caml_array").caml_array_get(c,f);b("MessengerThreadFetchLoggerUtil").markerPoint(f.id,"getThreadInfoFetchResponse");return g(e,f.id,a,f.isCanonical,d)})})}f._transformPayload=g;f._getQuery=h;f.fetchAll=a}),null);
__d("MessengerThreadFetcher.bs",["Promise","bs_curry","gkx","FBIDCheck","bs_belt_Array","bs_caml_int32","LogHistory","MercuryIDs","bs_caml_option","MercuryDispatcher","MercuryThreadIDMap","MercuryPayloadSource","bs_caml_builtin_exceptions","setTimeoutAcrossTransitions","MessengerGraphQLThreadFetcher.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();function h(a,c){__p&&__p();var d=c.other_user_fbid;if(d==null){c=c.thread_fbid;if(c==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Encountered thread with no server identifier"];else c=[c,b("MercuryIDs").getThreadIDFromThreadFBID(c)]}else c=[d,b("MercuryIDs").getThreadIDFromUserID(d)];d=c[1];c=c[0];a=b("MercuryThreadIDMap").getForFBID(a);var e={},f=a.getClientIDFromServerIDNow(c);if(f==null){b("gkx")("1199097")&&b("LogHistory").getInstance("MessengerThreadFetcher").debug("setServerIDToClientID",d);a.setServerIDToClientID(c,d);e[c]=d;return[d,e]}else return[f,e]}function i(a,c,d){__p&&__p();var e=!b("FBIDCheck").isUser_deprecated(a);return b("MessengerGraphQLThreadFetcher.bs").fetchAll(a,[{id:c,limit:0,loadReadReceipts:!1,loadDeliveryReceipts:!1,timestamp:null,isCanonical:d}],e).then(function(c){__p&&__p();c=b("bs_belt_Array").get(c,0);if(c!==void 0){c=b("bs_caml_option").valFromOption(c).thread;if(c==null)return b("Promise").resolve(!1);else{var d=h(a,c);b("MercuryDispatcher").getForFBID(a).handleUpdate({threads:[Object.assign(c,{thread_id:d[0]})],pinned_thread_ids:[],newlyAddedClientIDs:d[1],actions:[],preprocessed:!0,payload_source:b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO});return b("Promise").resolve(!0)}}else return b("Promise").resolve(!1)})}function j(a,c,d){__p&&__p();return i(a,c,d).then(function(d){__p&&__p();var e=g.get(a);if(e==null)return b("Promise").resolve(!1);else{var f=e.get(c);if(f==null)return b("Promise").resolve(!1);else{b("bs_belt_Array").forEach(f[1],function(a){return b("bs_curry")._1(a,d)});e["delete"](c);return b("Promise").resolve(d)}}})["catch"](function(e){__p&&__p();var f=g.get(a);if(f==null)return b("Promise").resolve(!1);else{e=f.get(c);if(e==null)return b("Promise").resolve(!1);else{var h=e[1];e=e[0];if(e<5||b("gkx")("678666")){var k=b("bs_caml_int32").imul(Math.pow(2,Math.min(e,5)),1e3),l=new(b("Promise"))(function(e,g){__p&&__p();b("setTimeoutAcrossTransitions")(function(g){i(a,c,d).then(function(a){e(a);b("bs_belt_Array").forEach(h,function(c){return b("bs_curry")._1(c,a)});f["delete"](c);return b("Promise").resolve(a)})["catch"](function(b){return j(a,c,d)});return 0},k);return 0});f.set(c,[e+1|0,h]);return l}else{f["delete"](c);return b("Promise").resolve(!1)}}}})}function a(a,b,c,d){__p&&__p();var e=g.get(a);if(e==null){var f=new Map();f.set(b,[0,[d]]);g.set(a,f);j(a,b,c);return 0}else{f=e.get(b);if(f==null){e.set(b,[0,[d]]);j(a,b,c);return 0}else{f[1].push(d);return 0}}}f.$$fetch=a}),null);
__d("MessengerMessageDFFFetcher.bs",["Promise","bs_caml_array","WebGraphQL","bs_caml_builtin_exceptions","MessengerMessageTransformer.bs","MessengerMessageWebGraphQLQuery","MessengerThreadMetadataWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){__p&&__p();return b("Promise").all(b("WebGraphQL").execAll([new(b("MessengerThreadMetadataWebGraphQLQuery"))({id:c.thread_id}),new(b("MessengerMessageWebGraphQLQuery"))({thread_and_message_id:{thread_id:c.thread_id,message_id:c.message_id}})],{actorID:a,batchName:"MessengerMessageDFFFetcher"})).then(function(c){var e=b("bs_caml_array").caml_array_get(c,0);c=b("bs_caml_array").caml_array_get(c,1);e=e.message_thread;c=c.message;if(e==null)throw b("bs_caml_builtin_exceptions").not_found;else if(c==null)throw b("bs_caml_builtin_exceptions").not_found;else return b("Promise").resolve(b("MessengerMessageTransformer.bs").transformMessage(a,c,{thread_id:null,thread_fbid:e.thread_key.thread_fbid,other_user_fbid:e.thread_key.other_user_id,folder:e.folder.toLowerCase()},d))})}f.fetch_=a}),null);
__d("MessengerParticipantsFetcher.bs",["Promise","BanzaiODS","WebGraphQL","MessengerServerPayloadTransformer.bs","MessengerParticipantsWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=new(b("MessengerParticipantsWebGraphQLQuery"))(a);return b("WebGraphQL").exec(c,{actorID:null,batchName:"MessengerParticipantsFetcher"})["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.failure");return b("Promise").reject(a)}).then(function(c){__p&&__p();b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.success");var d=[],e=new Set();c.messaging_actors.forEach(function(a){if(a==null)return 0;else{a=b("MessengerServerPayloadTransformer.bs").transformParticipant(a);e.add(a.fbid);d.push(a);return 0}});c=a.ids.filter(function(a){return!e.has(a)});c.length>0&&c.forEach(function(a){d.push(b("MessengerServerPayloadTransformer.bs").getBlockedParticipant(a));return 0});return d})}f.$$fetch=a}),null);
__d("MessengerRealtimeAttachmentTransformer.bs",["MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),f=c.extensible_attachment,g;if(f==null)g=null;else{var h=f.story_attachment,i=f.genie_attachment,j;if(i==null)j=null;else{i=i.genie_message;var k;if(i==null)k=null;else{i=i.story_attachment;k={story_attachment:i==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(i)}}j={genie_message:k}}g={legacy_attachment_id:f.legacy_attachment_id,story_attachment:h==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(h),genie_attachment:j}}return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:e,sticker:c.sticker},null,d)}f.transform=a}),null);
__d("Bootload.bs",["bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=function(c){return b("bs_curry")._1(a.doLoad,function(a){return b("bs_curry")._1(c,a.bootloadable)})};return{load:c}}f.Create=a}),null);
__d("MercuryFilters.bs",["MessagingTag"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessagingTag").UNREAD;d=b("MessagingTag").GROUPS;function a(a){return[g]}function c(a){return a===g}e="all";f.all=e;f.unread=g;f.groups=d;f.getSupportedFilters=a;f.isSupportedFilter=c}),null);
__d("MercuryMessageIDs.bs",["bs_curry","bs_js_dict","KeyedCallbackManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("KeyedCallbackManager"))();function a(a,c){var d=a.filter(function(a){return a.indexOf("id")===-1}),e=function(d){return b("bs_curry")._1(c,a.map(function(a){var c=b("bs_js_dict").get(d,a);if(c!==void 0)return c;else return a}))};return g.executeOrEnqueue(d,e)}function c(a,b){g.setResource(a,b);return 0}f.getServerIDs=a;f.addServerID=c}),null);
__d("ThreadConnectivityStatusGraphQLType.bs",[],(function(a,b,c,d,e,f){"use strict";a="UNCONNECTED";b="IMPLICIT_OR_TWO_WAY_MESSAGING";f.unconnected=a;f.implicitOrTwoWayMessaging=b}),null);
__d("ThreadConnectivityStatusGraphQLType.re",["ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){a=b("ThreadConnectivityStatusGraphQLType.bs").unconnected;f.unconnected=a;c=b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging;f.implicitOrTwoWayMessaging=c}),null);
__d("MessengerDesktopNotificationPermissions",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:"default",DENIED:"denied",GRANTED:"granted"});e.exports=a}),null);
__d("MessengerDesktopNotifications",["MessengerDesktopNotificationPermissions","Run","UserAgent","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=5e3,h=new Map();function a(){h.forEach(function(a,b,c){a.close&&a.close()})}c={_closeTimer:null,isSupported:function(){return!!window.Notification},checkPermission:function(){if(window.Notification)return window.Notification.permission},hasDefaultSound:function(){return b("UserAgent").isBrowser("FireFox")&&b("UserAgent").isPlatform("Mac OS X")},isDenied:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED},isGranted:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").GRANTED},requestPermission:function(a){window.Notification&&window.Notification.requestPermission(a)},showNotification:function(a){__p&&__p();if(this.isGranted()){var c=window.Notification?new window.Notification(a.title,{body:a.body,icon:a.icon,tag:a.tag,silent:a.silent}):{};h.set(a.tag,c);a.onShow&&a.onShow();c.onclick=function(){b("WorkplaceChatHelper").isDesktopChatApp()&&b("WorkplaceChatHelper").showWindow(),a.onClick()};c.onclose=function(){h["delete"](a.tag)};this._closeTimer=setTimeout(function(){c.close()},a.closeTime||g);return c}else return null},removeNotification:function(a){a=h.get(a);a&&a.close()}};b("Run").onUnload(a);e.exports=c}),null);
__d("MessengerFolders.bs",["gkx","qex","MessagingTag","MessagingThreadType","MercuryFoldersConfig","MessengerEnvironment"],(function(a,b,c,d,e,f){"use strict";__p&&__p();d=b("qex")._("998180")&&b("MessengerEnvironment").messengerdotcom?[b("MessagingTag").INBOX,b("MessagingTag").PENDING,b("MessagingTag").OTHER,b("MessagingTag").ACTION_ARCHIVED,b("MessagingTag").MARKETPLACE_FOLDER]:[b("MessagingTag").INBOX,b("MessagingTag").PENDING,b("MessagingTag").OTHER,b("MessagingTag").ACTION_ARCHIVED];var g=d.filter(function(a){if(a===b("MessagingTag").PENDING)return!b("MercuryFoldersConfig").hide_message_filtered;else if(a===b("MessagingTag").OTHER)return!b("MercuryFoldersConfig").hide_message_requests;else return!0});function a(a){return[].concat(g)}function c(a){if(a.is_archived)return b("MessagingTag").ACTION_ARCHIVED;else{var c=a.thread_type;if(!(c==null)&&c===b("MessagingThreadType").MARKETPLACE&&b("gkx")("965951"))return b("MessagingTag").MARKETPLACE_FOLDER;else return a.folder}}f.getSupportedFolders=a;f.getFromMeta=c}),null);
__d("Utils.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return!1;else return a}function b(a){if(a!==void 0)return a;else return!1}f.isTruthy=a;f.optionBoolToBool=b}),null);
__d("MessengerMessage.bs",["URI","Utils.bs","bs_js_dict","bs_js_json","bs_caml_obj","bs_caml_option","MercuryViewer","bs_caml_primitive","MercuryActionType","MercuryActionStatus","MercuryPayloadSource","isMessengerDotComURI","MercuryLogMessageType","MercuryMessageDeliveryState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function a(a,b,c,d,e,f){b={thread_id:b,thread_fbid:null,other_user_fbid:null,action_type:d,message_id:a,threading_id:null,offline_threading_id:null,author:c,author_email:"",ephemeral_ttl_mode:null,timestamp:e,is_unread:null,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,is_sponsored:!1,is_one_way_sent:!1,ad_id:null,ad_client_token:null,commerce_message_type:null,customizations:[],source:"",source_tags:[],m_suggestions:null,tags:[],is_spoof_warning:!1,folder:"inbox",platform_xmd:null,message_source:null,montage_reply_data:null,replied_to_message:null,skip_bump_thread:!1,profile_ranges:null,reactions:null,attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,raw_attachments:null,body:null,subject:null,has_attachment:null,creator_info:null,error_data:null,removed_timestamp:null,unsender:null,verse_group_role_xmd:null,message_unsendability_status:null,is_forwarded:!1,preview_attachments:null,sticker_id:null,mib_direct_message_data:null};return Object.assign(b,f)}function c(a){var b=a.offline_threading_id;if(b==null)return!1;else return b===a.message_id}function d(a){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE))return!0;else{a=a.log_message_type;if(a==null)return!0;else return!(b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").UNSUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SERVER_ERROR)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").LIVE_LISTEN))}}function e(a){__p&&__p();var c=a.ranges;if(c==null)return 0;else{c=c.map(function(c){__p&&__p();var a=c.entity;if(a==null)return c;else{var d=b("Utils.bs").isTruthy(a.external),e=a.url;if(d||e==null)return c;else{d=new(g||(g=b("URI")))(e);e=b("isMessengerDotComURI")(g.getRequestURI());var f=d.getDomain();return!(e&&!(!(f==null)&&f!==""))?c:Object.assign(Object.assign({},c),{entity:Object.assign(Object.assign({},a),{url:d.setProtocol("https").setDomain("www.facebook.com").toString()})})}}});Object.assign(a,{ranges:c});return 0}}function h(a){if(b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").UNKNOWN)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_INITIAL_DATA)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_THREAD_SYNC)}function i(a){a=a.author;if(a==null)return!1;else return a===b("MercuryViewer").getID()}function j(a){a=a.author;if(a==null)return!1;else return a!==b("MercuryViewer").getID()}function k(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNSENT)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNCONFIRMED)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").RESENDING)}function l(a){a=a.status;if(a==null)return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").SUCCESS)}function m(a,c){return b("bs_caml_primitive").caml_float_compare(a.timestamp,c.timestamp)}function n(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").FAILED_UNKNOWN_REASON)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").ERROR)}function o(a){a=a.error_data;if(a==null)return;else return b("bs_caml_option").nullable_to_opt(a.description)}function p(a,c){__p&&__p();if(n(a))return b("MercuryMessageDeliveryState").ERROR;else if(k(a))return b("MercuryMessageDeliveryState").SENDING;else if(l(a)){a=a.is_one_way_sent||a.timestamp>c;if(a)return b("MercuryMessageDeliveryState").SENT;else return b("MercuryMessageDeliveryState").DELIVERED}else return b("MercuryMessageDeliveryState").UNKNOWN}function q(a,b){__p&&__p();if(n(a))return 4;else if(k(a))return 1;else if(l(a)){b=a.timestamp<=b&&!a.is_one_way_sent;if(b)return 3;else return 2}else return 0}function r(a){__p&&__p();try{a=b("bs_caml_option").some(JSON.parse(a))}catch(b){a=void 0}if(a!==void 0){a=b("bs_js_json").classify(b("bs_caml_option").valFromOption(a));if(typeof a==="number"||a.tag!==2)return;else{a=b("bs_js_dict").get(a[0],"persona");if(a!==void 0){a=b("bs_js_json").classify(b("bs_caml_option").valFromOption(a));if(typeof a==="number"||a.tag!==2)return;else return b("bs_caml_option").some(a[0])}else return}}}function s(a){__p&&__p();if(a==null)return null;else{a=a.platform_xmd;if(a==null)return null;else{a=r(a);if(a!==void 0){a=b("bs_caml_option").valFromOption(a);var c=b("bs_js_dict").get(a,"id"),d=b("bs_js_dict").get(a,"name");a=b("bs_js_dict").get(a,"profile_picture_url");if(c!==void 0&&d!==void 0&&a!==void 0)return{id:b("bs_caml_option").valFromOption(c),name:b("bs_caml_option").valFromOption(d),profile_picture_url:b("bs_caml_option").valFromOption(a)};else return null}else return null}}}function t(a){var c=a.log_message_type;if(!(c==null)&&b("bs_caml_obj").caml_equal(c,b("MercuryLogMessageType").SERVER_ERROR))return b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE);else return!1}function u(a,b){var c=a.thread_fbid,d=a.other_user_fbid;a=a.is_from_iris;if(!(b==null)&&b)return!1;if(!(c==null)||!(d==null)||a)return!0;else return!1}f.makeFakeMessage=a;f.isLocalMessage=c;f.isTitanMessage=d;f.finalizeRanges=e;f.shouldSortForPayloadSource=h;f.isOutbound=i;f.isInbound=j;f.isSending=k;f.isSent=l;f.compare=m;f.hasError=n;f.getError=o;f.getDeliveryState=p;f.getGutterItemStatus=q;f.getPersonaData=r;f.getPersona=s;f.isErrorLogMessage=t;f.hasServerTimestamp=u}),null);
__d("MessengerPersonas.bs",["bs_js_dict","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){if(a==null)return 0;else{var c=b("bs_js_dict").get(g,a.id);if(c!==void 0)return 0;else{g[a.id]=a;return 0}}}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(g,a))}f.personas=g;f.addPersona=a;f.getNow=c}),null);
__d("MessengerSharedMediaActionsLoader",["JSResource"],(function(a,b,c,d,e,f){"use strict";a={deletePhotos:function(a,c){b("JSResource").loadAll([b("JSResource")("MessengerSharedMediaActions").__setRef("MessengerSharedMediaActionsLoader")],function(b){b.deletePhotos(a,c)})}};e.exports=a}),null);
__d("MessengerSharedPhotosVideosBaseData.bs",["bs_js_dict"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){return b("bs_js_dict").get(g,a)}function h(a,b){g[a]=b;return 0}function c(a,c){__p&&__p();var d=b("bs_js_dict").get(g,a);if(d!==void 0){d=d;var e=d[1];if(e!==void 0){e=e;var f=e[0];if(f.length!==0){f=f.filter(function(a){return!c.some(function(b){return b===a.node.legacy_attachment_id})});d=d[0];f=[f,e[1],e[2],e[3]];e=[d,f];return h(a,e)}else return 0}else return 0}else return 0}f.data=g;f.get=a;f.set=h;f.localRemove=c}),null);
__d("MercuryVanityIDMap.bs",["bs_js_dict","MercuryAssert","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={};function a(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(g,a.toLowerCase()))}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(h,a))}function d(a){return b("bs_js_dict").get(h,a)!==void 0}function e(a){return b("bs_js_dict").get(g,a.toLowerCase())!==void 0}function i(a,c){b("MercuryAssert").isParticipantID(c);a=a.toLowerCase();g[a]=c;h[c]=a;return 0}f.vanityToID=g;f.idToVanity=h;f.getID=a;f.getVanity=c;f.hasID=d;f.hasVanity=e;f.set=i}),null);
__d("MessengerParticipants.bs",["fbt","Promise","FBID.bs","bs_curry","bs_js_dict","bs_caml_obj","BanzaiODS","immutable","bs_belt_Array","MercuryIDs","bs_caml_option","CurrentUser","MercuryAssert","ImageSourceType","ImmutableObject","bs_js_null_undefined","ImageSourceRequest","MercuryVanityIDMap.bs","PhotoResizeModeConst","MercuryParticipantTypes","MercuryParticipantsConstants","MessengerParticipantsFetcher.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=[1],i={},j=new Set(),k={},l=function(b,a){delete b[a];return 0},m=function(b,a){delete b[a];return 0};function n(a){a=b("CurrentUser").isWorkUser();if(a)return g._("Workplace User");else return g._("Facebook User")}function o(a){__p&&__p();var c=a.user_type;if(c==null||!(b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").USER)||b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").FRIEND)))return a;else{c=a.href;var d=a.vanity;if(c==null&&d==null){c=n(0);return Object.assign(a,{name:c,short_name:c})}else return a}}function a(a){Object.keys(i).forEach(function(a){return b("bs_curry")._2(m,i,a)});return 0}function c(a){__p&&__p();a=a.participants;if(a==null)return 0;else{a.map(function(a){__p&&__p();var c=a.id,d=a.vanity;d==null||b("MercuryVanityIDMap.bs").set(d,c);d=b("bs_js_dict").get(i,c);if(d!==void 0){i[c]=b("ImmutableObject").set(b("bs_caml_option").valFromOption(d),a);return 0}else{i[c]=new(b("ImmutableObject"))(o(a));return 0}});return 0}}function p(a,c){__p&&__p();var d={},e=[];a.forEach(function(a){var c=b("bs_js_dict").get(i,a);if(c!==void 0){d[a]=b("bs_caml_option").valFromOption(c);return 0}else{e.push(a);return 0}});if(e.length!==0){var f=[];e.forEach(function(a){__p&&__p();if(j.has(a))return 0;else{var c=b("MercuryIDs").getUserIDFromParticipantID(a);if(c==null)return 0;else{f.push(c);j.add(a);return 0}}});var g=h[0].toString();k[g]=[a,c];h[0]=h[0]+1|0;f.length>0&&b("MessengerParticipantsFetcher.bs").$$fetch({ids:f}).then(function(a){__p&&__p();a.forEach(function(a){i[a.id]=new(b("ImmutableObject"))(a);var c=a.id;a=a.vanity;a==null||b("MercuryVanityIDMap.bs").set(a,c);j["delete"](c);return 0});Object.keys(k).forEach(function(a){__p&&__p();var d=b("bs_js_dict").get(k,a);if(d!==void 0){d=d;var e=d[0],c={};e.forEach(function(d){var a=b("bs_js_dict").get(i,d);if(a!==void 0){c[d]=b("bs_caml_option").valFromOption(a);return 0}else return 0});if(Object.keys(c).length===e.length){b("bs_curry")._2(l,k,a);return d[1](c)}else return 0}else return 0});b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.success");return b("Promise").resolve(0)})["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.failure");return b("Promise").resolve(0)});return g}else{c(d);return null}}function d(a,c){b("MercuryAssert").isParticipantID(a);return p([a],function(d){d=b("bs_js_dict").get(d,a);if(d!==void 0)return b("bs_curry")._1(c,b("bs_caml_option").valFromOption(d));else return 0})}function q(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(i,a))}function r(c,d){__p&&__p();var e=[],a=[];c.forEach(function(b){var c=q(b);c==null?e.push(b):a.push(c);return 0});if(e.length!==0){var f=p(e,function(a){return b("bs_curry")._1(d,b("bs_belt_Array").keepMap(c,function(a){return b("bs_caml_option").nullable_to_opt(q(a))}))});return[a,f]}else return[a,null]}function e(a,c){var d=function(a){return b("immutable").Map(a.map(function(a){return[a.id,a]}))},e=function(a){return b("bs_curry")._1(c,d(a))};a=r(a,e);return[d(a[0]),a[1]]}function s(a){return b("bs_curry")._2(l,k,a)}function t(a,c,d){new(b("ImageSourceRequest"))().setFBID(b("bs_js_null_undefined").fromOption(b("bs_caml_option").nullable_to_opt(b("MercuryIDs").getUserIDFromParticipantID(a)))).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(c,c).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(function(c){return b("bs_curry")._2(d,a,c)}).send();return 0}function u(a,c,d,e){__p&&__p();b("MercuryAssert").allParticipantIDs(a);var f=[!1],g=p(a,function(e){__p&&__p();var g={},h=function(d,e){g[d]=e;if(!f[0]&&a.length===Object.keys(g).length)return b("bs_curry")._1(c,g);else return 0},j=function(a,c){var d=b("bs_js_dict").get(e,a);d!==void 0&&(e[a]=b("ImmutableObject").set(b("bs_caml_option").valFromOption(d),{big_image_src:c.uri}));return h(a,c.uri)};Object.keys(e).map(function(a){return a}).forEach(function(a){__p&&__p();var c=b("bs_js_dict").get(e,a);if(c!==void 0){c=b("bs_caml_option").valFromOption(c);var f=d===b("MercuryParticipantsConstants").BIG_IMAGE_SIZE;f=f?b("bs_caml_option").nullable_to_opt(c.big_image_src):void 0;if(f!==void 0)return h(c.id,f);else return t(a,d,j)}else return t(a,d,j)});return 0});return{remove:function(a){f[0]=!0;if(g==null)return 0;else return s(g)}}}function v(a,c,d){return u(a,c,b("MercuryParticipantsConstants").BIG_IMAGE_SIZE,0)}function w(a,c){return v(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(d,a))}))},0)}function x(a,c,d){return u(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(d,a))}))},d,0)}function y(a){__p&&__p();if(a==null)return null;else if(b("MercuryVanityIDMap.bs").hasVanity(a)){var c=b("MercuryVanityIDMap.bs").getID(a);if(c==null)return null;else return c}else{c=/^\d+$/;if(c.test(a)){c=b("FBID.bs").ofString(a);if(c!==void 0)return b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(c));else return null}else return null}}f.reset=a;f.addParticipants=c;f.getDefaultName=n;f.get=d;f.getNow=q;f.getMulti=p;f.getMultiEager=r;f.getMultiEagerMap=e;f.removeCallback=s;f.getBigImageMultiWithSize=u;f.getBigImageMulti=v;f.getOrderedBigImageMulti=w;f.getOrderedBigImageMultiWithSize=x;f.getIDFromVanityOrFBID=y}),null);
__d("MessengerThreadUtils.bs",["FBID.bs","bs_caml_obj","MercuryIDs","CurrentUser","MessagingTag","ImmutableObject","MessengerParticipants.bs","MercuryParticipantTypes","MessengerJoinableModeType","MessengerObjectAssociationType","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){return c.filter(function(c){return b("bs_caml_obj").caml_notequal(c,a)}).length<=1}function h(a,c,d,e){var f=b("MercuryIDs").tokenize(c),h=f.type;f=f.value;var i=d.find(function(b){return b!==a});i=i!==void 0?b("MessengerParticipants.bs").getNow(i):null;var j=b("CurrentUser").isWorkUser();j=!(i==null)&&j&&i.work_foreign_entity_info==null&&i.user_type===b("MercuryParticipantTypes").USER?[!1,b("MessengerThreadCannotReplyReason").RECIPIENTS_INVALID]:[!0,null];i=h==="user";return new(b("ImmutableObject"))({thread_id:c,participants:Array.from(d),admins:{},name:"",snippet:"",snippet_sender:null,unread_count:e==null?0:e,message_count:0,image_src:null,timestamp:0,other_user_fbid:i?b("FBID.bs").ofStringExn(f):null,is_canonical_user:h==="user",is_canonical:g(a,d),is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:j[0],cannot_reply_reason:j[1],can_viewer_report:!1,comm_item_owners:null,comm_source_id:null,comm_status:null,comm_icon_type:[],custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,group_approval_queue:null,work_associated_group:null,pinned_messages:null,groups_sync_status:null,group_thread_subtype:null,has_email_participant:!1,has_montage:!1,unread_mentions_count:0,header_color:null,is_canonical_neo_user:!1,is_from_weak_entry_point:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{mode:0,link:""},last_message_timestamp:0,last_message_id:null,last_message_type:null,last_read_timestamp:0,last_message_admin_text_type:null,last_message_unsendability_status:null,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,object_association_type:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!1,rtc_call_data:null,server_timestamp:0,snippet_attachments:[],solid_color:null,subtitle:null,theme_id:null,reactions:void 0,thread_connectivity_data:null,thread_fbid:null,thread_pin_timestamp:null,thread_type:null,thread_unsendability_status:null,gradient_colors:[],joinable_link:null,linked_mentorship_programs:null,is_business_page_active:!1,thread_associated_job_applications:null,thread_associated_page_admin:null,graphql_token:null})}function a(a,c,d,e){a=h(a,c,d,null);return b("ImmutableObject").set(a,{associated_object:e,name:e.name,joinable_mode:{mode:b("MessengerJoinableModeType").JOINABLE,link:""},object_association_type:b("MessengerObjectAssociationType").GENERAL_CHAT})}f.isCanonicalFromInitialParticipants=g;f.createNewLocalThread=h;f.createNewLocalGroupGeneralThread=a}),null);
__d("ParticipantId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable({cmp:a});d=c.cmp;f.cmp=d}),null);
__d("ThreadConnectivityStatus.bs",["bs_caml_obj","ThreadConnectivityStatus","ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("bs_caml_obj").caml_equal(a,b("ThreadConnectivityStatus").UNCONNECTED);if(a)return b("ThreadConnectivityStatusGraphQLType.bs").unconnected;else return b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging}f.toGraphQLValue=a}),null);
__d("ThreadId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable({cmp:a});d=c.cmp;f.cmp=d}),null);
__d("MessengerAttachmentTransformerForSend.bs",["MercuryAttachmentType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e){__p&&__p();c=c.node;if(c==null)return{attach_type:b("MercuryAttachmentType").ERROR};else{if(c.__typename==="ExtensibleMessageAttachment"){var f=c.story_attachment,g=c.genie_attachment,h;if(g==null)h=null;else{g=g.genie_message;var i;if(g==null)i=null;else{g=g.story_attachment;i={story_attachment:g==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(g)}}h={genie_message:i}}g={legacy_attachment_id:c.legacy_attachment_id,story_attachment:f==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(f),genie_attachment:h}}else g=null;i=c.__typename==="Sticker"?c:null;f=c.__typename;var j;switch(f){case"MessageAnimatedImage":case"MessageAudio":case"MessageFile":case"MessageImage":case"MessageVideo":j=[c];break;default:j=null}h=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments({blob_attachments:j});f=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:h,sticker:i},d,e);if(f.length!==0)return f[0];else return{}}}function a(a,b,c,d){return b.map(function(b){return g(a,b,c,d)})}f._transform=g;f.transform=a}),null);
__d("FantaTypeTab",["immutable"],(function(a,b,c,d,e,f){"use strict";a={focusCounter:0,id:"",isHovered:!1,isMinimized:!1,showWarningForThreadWithBlockees:!1,openCounter:0,entryPoint:"unknown"};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeTabGroup",["FantaConst","immutable","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").OrderedMap({});a=b("qex")._("830597")||!1;c={allowedRaisedTabs:a?1:b("FantaConst").DEFAULT_ALLOWED_RAISED_TABS,focusedTabID:null,tabs:b("immutable").Map({}),updatedTime:0};var h=function(a){return a.openCounter*-1},i=function(a){return a.focusCounter*-1};d=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getRaisedandUnraisedTabs=function(){if(this.tabs.size===0||this.allowedRaisedTabs===0)return{raisedTabs:g,unraisedTabs:g};if(this.tabs.size===1&&this.allowedRaisedTabs>=1)return{raisedTabs:this.tabs.toOrderedMap(),unraisedTabs:g};var a=this.tabs.sortBy(i),b=a.slice(this.allowedRaisedTabs);a=a.take(this.allowedRaisedTabs).sortBy(h);return{raisedTabs:a,unraisedTabs:b}};return b}(b("immutable").Record(c));e.exports=d}),null);
__d("MercuryIgnoredBlockedParticipants.bs",["bs_belt_Set","bs_caml_obj","MercuryIDs","bs_caml_option","CurrentUser","ParticipantId.bs","WorkForeignEntityInfo.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return b("bs_belt_Set").fromArray(a,b("ParticipantId.bs"))}function g(a,c,d){d=d.participants.filter(function(c){return c!==b("MercuryIDs").getParticipantIDFromUserID(a)});return d.filter(function(a){return b("bs_belt_Set").has(c,a)!==!1})}function c(a,b,c){if(c.is_canonical)return!1;else return g(a,b,c).length>0}function d(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function e(a,c,d){var e=d.is_canonical;if(e){e=d.participants.filter(function(c){return b("bs_caml_obj").caml_notequal(c,b("MercuryIDs").getParticipantIDFromUserID(a))});return!e.every(function(a){return!b("bs_belt_Set").has(c,a)})}else return!1}var h=b("bs_belt_Set").has;function i(a,c,d){if(!a.is_canonical||b("bs_caml_option").nullable_to_opt(a.other_user_fbid)===b("bs_caml_option").some(c))return!1;else if(!b("CurrentUser").isWorkUser()||d==null)return!0;else if(d==null)return!1;else return!b("WorkForeignEntityInfo.bs").isCoworker(d)}f.fromIds=a;f.findIntersection=g;f.isPresentInGroupThread=c;f.participantsInGroupThread=d;f.qualifiesAs=e;f.isInSet=h;f.shouldShowBlock=i}),null);
__d("FantaReducersTabs",["Bootloader","CurrentUser","EventProfiler","FantaConst","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTypeTab","FantaTypeTabGroup","FBLogger","LogHistory","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MessengerState.bs","PinnedConversationNubsConfig","TimeSlice","URI","MessengerWebStgTypedLoggerLite","isWebMessengerURI","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("FantaMessageActions").Types,j=b("FantaTabActions").Types,k=b("FantaGetMessageActions").Types,l="tab_",m=b("LogHistory").getInstance("fanta_tabs"),n=1,o=1,p=1;function q(a,c){Array.isArray(a)&&a.length>0&&(a=a[0]);try{b("MercuryIDs").isLocalThread(c)?b("MessengerWebStgTypedLoggerLite")&&b("MessengerWebStgTypedLoggerLite").log({event_name:"open_chat_tab",blue_entry_point:a||"unknown"}):b("MessengerWebStgTypedLoggerLite")&&b("MessengerWebStgTypedLoggerLite").log({event_name:"open_chat_tab",blue_entry_point:a||"unknown",other_user_fbid:b("MercuryIDs").getUserIDFromThreadID(c),thread_fbid:b("MercuryIDs").isGroupChat(c)?b("MercuryIDs").getThreadFBIDFromThreadID(c):null})}catch(d){b("FBLogger")("messenger_web").warn("fail to log openTab event on blue for %s %s ",a,c)}}function a(a,c){__p&&__p();switch(c.type){case j.OPEN_TAB:case j.OPEN_TAB_WITH_INTERSTITIAL_DATA:case i.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:m.debug(c.type,JSON.stringify({id:c.tabID}));if(o===1){b("EventProfiler").tagCurrentActiveInteractionsAs("FirstChatTabOpen");var d=(g||(g=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(a,b){a.markerStart(b.FIRSTCHATTABOPEN_WWW,0,d)},"FantaReducersTabs")}var e=c.tabID||l+p++,f=c.entryPoint;Array.isArray(f)&&f.length>0&&(f=f[0]);q(f,e);return u(a,e,!0,c.entryPoint)}return a}function c(a,b){__p&&__p();switch(b.type){case j.REPLACE_TAB:case i.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:var c=b.tabID,d=b.newTabID,e=a.tabGroup;e=e.tabs;e=e.get(c);m.debug(b.type,JSON.stringify({id:c,isExisting:!!e,newID:d}));if(e){q("replace_tab",e.id);b=e.id===a.tabGroup.focusedTabID;a=a.setIn(["tabGroup","tabs",d],e.merge({id:d})).deleteIn(["tabGroup","tabs",c]);return u(a,d,b,"replace_tab")}q("replace_tab",d);return u(a,d,!1,"replace_tab")}return a}function d(a,b){switch(b.type){case j.MINIMIZE_TAB:return v(a,b.tabID,!0)}return a}function f(a,b){switch(b.type){case j.UNMINIMIZE_TAB:a=v(a,b.tabID,!1),a=y(a,b.tabID,(b=a.mercury.tabContents.get(b.tabID))==null?void 0:b.thread)}return a}function r(a,b){switch(b.type){case j.FOCUS_TAB:b=b.tabID;return G(a,b)}return a}function s(a,b){switch(b.type){case j.BLUR_TAB:return H(a,b.tabID)}return a}function t(a,c){__p&&__p();switch(c.type){case i.RECEIVED_NEW_MESSAGE:var d=c.tabID,e=a.tabGroup.tabs.get(d);m.debug(c.type,JSON.stringify({id:d,isOpen:!!e}));if(!e){q("message_received",d);c=a.tabGroup.focusedTabID;a=u(a,d,!1,"message_received");var f=a.tabGroup.allowedRaisedTabs;e=a.tabGroup.getRaisedandUnraisedTabs();var g=e.raisedTabs;e=e.unraisedTabs;var j=g.count(),k=j+e.count();b("TimeSlice").guard(function(){b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger","ChatOpenTabEventLogger"],function(a,b){new a().setAllowedRaisedTabs(f).setOpenTabs(k).setVisibleTabs(j).log(),b.logAutoOpen("auto_open_on_received_messages",d)},"FantaReducersTabs")},"name",{propagationType:b("TimeSlice").PropagationType.ORPHAN})();g=(h||(h=b("URI"))).getNextURI();if(b("isWebMessengerURI")(g))return a=v(a,d,!0);else if(c)return G(a,c)}}return a}function u(a,c,d,e){__p&&__p();e===void 0&&(e="unknown");var f=a.tabGroup;f=f.tabs;f=f.get(c);!f?(f=new(b("FantaTypeTab"))({id:c,focusCounter:n,openCounter:o++,entryPoint:e}),a=a.setIn(["tabGroup","tabs",c],f)):f.isMinimized&&d&&(a=v(a,c,!1));d&&(a=G(a,c));if(x(a,c,(e=a.mercury.tabContents.get(c))==null?void 0:e.thread))if(d){a=y(a,c,(f=a.mercury.tabContents.get(c))==null?void 0:f.thread)}else a=v(a,c,!0);return a}function v(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isMinimized:c}));return a}function w(a,b){var c,d;switch(b.type){case k.ON_GET_THREAD_RESPONSE:case k.ON_GET_THREAD_PREVIEW_RESPONSE:c=b.tabID||((c=b.thread)==null?void 0:c.thread_id);((d=a.mercury.tabContents.get(c))==null?void 0:d.thread)==null&&((d=a.tabGroup.tabs.get(c))==null?void 0:d.isMinimized)===!1&&(a=y(a,c,b.thread))}return a}function x(a,c,d){if(d==null||d.is_canonical||a.blockedWarning.optedInThreadsWithBlockees.get(c)==!0)return!1;var e=b("CurrentUser").getID();a=!1;b("MessengerState.bs").compute(e,function(c){c=c.blocked_ids;a=b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(e,c,d)});return a}function y(a,b,c){x(a,b,c)&&a.tabGroup.tabs.get(b)!=null&&(a=a.mergeIn(["tabGroup","tabs",b],{showWarningForThreadWithBlockees:!0}),a=v(a,b,!0));return a}function z(a,b){switch(b.type){case j.CLOSE_GROUP_ENTRANCE_WARNING_DIALOG:a.tabGroup.tabs.get(b.tabID)!=null&&(a=a.mergeIn(["tabGroup","tabs",b.tabID],{showWarningForThreadWithBlockees:!1}))}return a}function A(a,b){switch(b.type){case j.OPT_IN_OPEN_TAB_WITH_BLOCKEES:b=b.tabID;a=a.mergeIn(["tabGroup","tabs",b],{showWarningForThreadWithBlockees:!1});a=a.setIn(["blockedWarning","optedInThreadsWithBlockees",b],!0);a=v(a,b,!1);a=G(a,b)}return a}function B(a,b){__p&&__p();switch(b.type){case j.MINIMIZE_ALL_TABS:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a=v(a,e,!0)}return a}return a}function C(a,b){switch(b.type){case j.CLOSE_TAB:case j.DELETE_TAB:var c=b.tabID;m.debug(b.type,JSON.stringify({id:c}));return D(a,c)}return a}function D(a,b){a=H(a,b);return a.deleteIn(["tabGroup","tabs",b]).deleteIn(["mercury","tabContents",b])}function E(a,b){switch(b.type){case j.CLOSE_ALL_TABS:m.debug(b.type);a=H(a,a.tabGroup.focusedTabID);return a.setIn(["tabGroup","tabs"],a.tabGroup.tabs.clear()).setIn(["mercury","tabContents"],a.mercury.tabContents.clear())}return a}function F(a,b){switch(b.type){case j.CLOSE_AND_TAB_NEXT:m.debug(b.type,JSON.stringify({id:b.tabID}));a=D(a,b.tabID);return P(a)}return a}function G(a,b,c){c===void 0&&(c=!1);var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{focusCounter:n++}));d=c?null:b;a=a.mergeIn(["tabGroup"],{focusedTabID:d});return a}function H(a,b){return a.tabGroup.focusedTabID===b?a.mergeIn(["tabGroup"],{focusedTabID:null}):a}function I(a,b){switch(b.type){case j.HOVERED_TAB:b=b.tabID;return K(a,b,!0)}return a}function J(a,b){switch(b.type){case j.UNHOVERED_TAB:b=b.tabID;return K(a,b,!1)}return a}function K(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isHovered:c}));return a}function L(a,c){__p&&__p();switch(c.type){case j.SET_ALLOWED_RAISED_TABS:var d=c.allowedRaisedTabs,e=a.tabGroup.allowedRaisedTabs;if(d!==e){m.debug(c.type,JSON.stringify({count:d}));b("PinnedConversationNubsConfig").chatTabTypingPriority||(d=Math.max(1,d));var f=a.tabGroup.tabs.count(),g=f>d?d:f;c=d>e&&f>e;e=d<e&&f>d;(c||e)&&b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(d).setOpenTabs(f).setVisibleTabs(g).log()},"FantaReducersTabs")}return M(a,d)}return a}function M(a,c){c===void 0&&(c=b("FantaConst").DEFAULT_ALLOWED_RAISED_TABS);if(c===a.tabGroup.allowedRaisedTabs)return a;b("PinnedConversationNubsConfig").chatTabTypingPriority||(c=Math.max(1,c));return a.mergeIn(["tabGroup"],{allowedRaisedTabs:c})}function N(a,c){__p&&__p();switch(c.type){case j.LOAD_FROM_DATA:var d=a.tabGroup,e=c.tabData,f=d.updatedTime;if(f>=e.updatedTime||e.updatedTime===void 0)return a;var g=Date.now();if(e.updatedTime>g){m.debug(c.type+"_future_date",JSON.stringify({currentTime:g,updatedTime:f,newerTime:e.updatedTime}));return a}a=M(a.set("tabGroup",new(b("FantaTypeTabGroup"))()),d.allowedRaisedTabs);var h=[];e.tabs.sort(function(a,b){return a.openCounter-b.openCounter}).forEach(function(b){h.push(b.id),q("fb_header_dock:loaded_from_browser_cookie",b.id),a=u(a,b.id,!1,["fb_header_dock:loaded_from_browser_cookie"]),b.isMinimized&&(a=v(a,b.id,b.isMinimized))});e.tabs.sort(function(a,b){return a.focusCounter-b.focusCounter}).forEach(function(b){a=G(a,b.id,!0)});m.debug(c.type,JSON.stringify({updatedTime:f,newerTime:e.updatedTime,opened:h}));a=e.focusedTabID?G(a,e.focusedTabID,!0):H(a)}return a}function O(a,b){switch(b.type){case j.FOCUS_NEXT_TAB:return P(a)}return a}function P(a){__p&&__p();var b=a.tabGroup.focusedTabID,c=a.tabGroup.getRaisedandUnraisedTabs();c=c.raisedTabs;c=c.filter(function(a){return!a.isMinimized});if(c.count()<2)return a;var d=c.skipUntil(function(a){return a.id===b}).rest();if(d.count()===0)return G(a,c.first().id);else return G(a,d.first().id)}function Q(a,b){__p&&__p();switch(b.type){case j.FOCUS_PREVIOUS_TAB:var c=a.tabGroup.focusedTabID;b=a.tabGroup.getRaisedandUnraisedTabs();b=b.raisedTabs;b=b.filter(function(a){return!a.isMinimized});if(b.count()<2)return a;var d=b.reverse().skipUntil(function(a){return a.id===c}).rest();if(d.count()===0)return G(a,b.last().id);else return G(a,d.first().id)}return a}e.exports={blurTab:s,closeAllTabs:E,closeAndTabNext:F,closeTab:C,focusNextTab:O,focusPreviousTab:Q,focusTab:r,hoveredTab:I,loadFromData:N,minimizAllTabs:B,minimizeTab:d,openTab:a,receivedNewMessage:t,replaceTab:c,setAllowedRaisedTabs:L,unhoveredTab:J,unminimizeTab:f,onThreadPayloadReceived:w,closeGroupEntranceWarningDialog:z,optInOpenTabWithBlockees:A}}),null);
__d("FantaTab.react",["cx","CurrentUser","EventProfiler","FantaTabActions","JSResource","LoadingDialog.react","MercuryIgnoredBlockedParticipants.bs","MessengerState.bs","React","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("lazyLoadComponent")(b("JSResource")("ChatGroupBlockedEntranceWarning.react").__setRef("FantaTab.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){b("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],!0,"click")};d.render=function(){__p&&__p();var a=this.props,c=a.isFocused,d=a.isLastTab,e=a.isLastTabOfType,f=a.MainComponent,g=a.messengerState,i=a.MinimizedComponent,j=a.nonMinimizedRaisedTabCount,k=a.tab,l=a.tabContent,m=a.messages,n=a.forGameChat;a=a.hasFetchedAll;i=k.isMinimized?i:f;f=k.id+(k.isMinimized?"-minimized":"-maximized");var o=this.$1&&!k.isMinimized;this.$1=k.isMinimized;var p=l==null?void 0:l.participants;return b("React").jsxs("div",{className:"_5qi9 _5qib"+(this.props.isFocused?" _5qic":"")+(k.isMinimized?" _3001":""),children:[b("React").jsx(i,{isFocused:c,isHovered:k.isHovered||o,isLastTab:d,isLastTabOfType:e,messengerState:g,nonMinimizedRaisedTabCount:j,tab:k,tabContent:l,messages:m,forGameChat:n,hasFetchedAll:a},f),k.showWarningForThreadWithBlockees&&l!=null&&p!=null?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx(b("LoadingDialog.react"),{}),children:b("React").jsx(h,{allParticipants:Array.from(p.values()),isShown:!0,blockees:b("MercuryIgnoredBlockedParticipants.bs").participantsInGroupThread(b("CurrentUser").getID(),b("MessengerState.bs").blockedIds(g),l.thread).map(function(a){return p.get(a)}).filter(function(a){return a!=null}),onHide:function(){return b("FantaTabActions").closeGroupEntranceWarningDialog(k.id)},threadID:k.id})}):null]})};return c}(b("React").Component);e.exports=a}),null);
__d("EmojiFormat.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a.split("_").map(function(a){return parseInt(a,16)})}function a(a){return a.map(function(a){return a.toString(16)}).join("_")}function h(a){return a.map(function(a){return String.fromCodePoint(a)}).join("")}function b(a){return h(g(a))}f.codeStringToCodeArray=g;f.codeArrayToCodeString=a;f.codeArrayToUnicode=h;f.codeStringToUnicode=b}),null);
__d("SkinToneEmoji.bs",["bs_caml_array","EmojiFormat.bs","MessengerEmojiConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f385":case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f442":case"1f443":case"1f446":case"1f447":case"1f448":case"1f449":case"1f44a":case"1f44b":case"1f44c":case"1f44d":case"1f44e":case"1f44f":case"1f450":case"1f466":case"1f467":case"1f468":case"1f469":case"1f46e":case"1f470":case"1f471":case"1f472":case"1f473":case"1f474":case"1f475":case"1f476":case"1f477":case"1f478":case"1f47c":case"1f481":case"1f482":case"1f483":case"1f485":case"1f486":case"1f487":case"1f4aa":case"1f575":case"1f590":case"1f595":case"1f596":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64c":case"1f64d":case"1f64e":case"1f64f":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"1f6c0":case"1f918":case"261d":case"26f9":case"270a":case"270b":case"270c":case"270d":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){var c=b("MessengerEmojiConfig").emoji_colors;c=c.filter(function(b){return b===a});return c.length!==0}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-1|0);else return i(a.slice(0,a.length-2|0))}else return a}function a(a,b){__p&&__p();if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function c(a){return m(j(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(j(a))))}e=65039;f.emoji_modifier_code=e;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isToneModifier=k;f.getTone=l;f.removeTone=m;f.applyTone=a;f.removeAllModifiers=c;f.hasVariations=d}),null);
__d("MessengerEmojiTransitionMapping.bs",["bs_caml_array","EmojiFormat.bs","SkinToneEmoji.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f3cc":case"1f46e":case"1f46f":case"1f471":case"1f473":case"1f477":case"1f481":case"1f482":case"1f486":case"1f487":case"1f575":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64d":case"1f64e":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"26f9":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){if(a===9792)return!0;else return a===9794}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-2|0);else return i(a.slice(0,a.length-3|0))}else return a}function n(a,b){__p&&__p();if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([8205,b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function a(a){return n(a,9792)}function c(a){return m(b("SkinToneEmoji.bs").removeTone(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(b("SkinToneEmoji.bs").removeTone(a))))}function e(a){a=b("EmojiFormat.bs").codeArrayToCodeString(m(b("SkinToneEmoji.bs").removeTone(a)));switch(a){case"1f46a":case"1f48f":case"1f491":return!0;default:return!1}}var o=65039,p=9792,q=9794,r=8205;f.emoji_modifier_code=o;f.gender_female=p;f.gender_male=q;f.zero_join=r;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isGenderModifier=k;f.getGender=l;f.removeGender=m;f.applyGender=n;f.makeFemale=a;f.removeAllModifiers=c;f.hasGender=d;f.isBlacklisted=e}),null);
__d("FantaTabSheetActions",["FantaDispatcher","LogHistory","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CLOSE_ADD_FRIENDS_SHEET:null,CLOSE_ADD_MORE_FRIENDS_SHEET:null,CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:null,CLOSE_EMPLOYEE_WORK_USER_SHEET:null,CLOSE_NAME_CONVERSATION_TAB_SHEET:null,CLOSE_READ_ONLY_PERMANENT_SHEET:null,CLOSE_READ_ONLY_SHEET:null,CLOSE_USER_FOCUS_AND_BYPASS_SHEET:null,ON_BOOTLOAD_EVENT_REMINDER:null,ON_WORK_DO_NOT_DISTURB_RESPONSE:null,ON_MENTORSHIP_PROGRAM_RESPONSE:null,ON_IS_PAGE_TAB:null,OPEN_ADD_MORE_FRIENDS_SHEET:null,OPEN_BYPASS_FOCUS_SHEET:null,OPEN_EMPLOYEE_AWAY_SHEET:null,OPEN_EMPLOYEE_PERSONAL_USER_SHEET:null,OPEN_EMPLOYEE_WORK_USER_SHEET:null,OPEN_NAME_CONVERSATION_TAB_SHEET:null,OPEN_READ_ONLY_PERMANENT_SHEET:null,OPEN_READ_ONLY_SHEET:null,OPEN_USER_FOCUS_SHEET:null,OPEN_MENTORSHIP_PROGRAM_SHEET:null}),h=b("LogHistory").getInstance("fanta_sheets");function i(a){b("FantaDispatcher").dispatch(a),h.log(a.type,a.tabID)}a={Types:g,openUserFocusSheet:function(a){i({type:g.OPEN_USER_FOCUS_SHEET,tabID:a})},openBypassFocusSheet:function(a){i({type:g.OPEN_BYPASS_FOCUS_SHEET,tabID:a})},closeUserFocusAndBypassSheet:function(a){i({type:g.CLOSE_USER_FOCUS_AND_BYPASS_SHEET,tabID:a})},openAddMoreFriendsSheet:function(a){i({type:g.OPEN_ADD_MORE_FRIENDS_SHEET,tabID:a})},closeAddMoreFriendsSheet:function(a){i({type:g.CLOSE_ADD_MORE_FRIENDS_SHEET,tabID:a})},closeAddFriendsSheet:function(a){i({type:g.CLOSE_ADD_FRIENDS_SHEET,tabID:a})},openNameConversationSheet:function(a){i({type:g.OPEN_NAME_CONVERSATION_TAB_SHEET,tabID:a})},closeNameConversationSheet:function(a){i({type:g.CLOSE_NAME_CONVERSATION_TAB_SHEET,tabID:a})},openReadOnlySheet:function(a){i({type:g.OPEN_READ_ONLY_SHEET,tabID:a})},closeReadOnlySheet:function(a){i({type:g.CLOSE_READ_ONLY_SHEET,tabID:a})},openReadOnlyPermanentSheet:function(a){i({type:g.OPEN_READ_ONLY_PERMANENT_SHEET,tabID:a})},closeReadOnlyPermanentSheet:function(a){i({type:g.CLOSE_READ_ONLY_PERMANENT_SHEET,tabID:a})},openEmployeeAwaySheet:function(a){i({type:g.OPEN_EMPLOYEE_AWAY_SHEET,tabID:a})},openEmployeePersonalUserSheet:function(a){i({type:g.OPEN_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})},closeEmployeePersonalUserSheet:function(a){i({type:g.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})},openEmployeeWorkUserSheet:function(a){i({type:g.OPEN_EMPLOYEE_WORK_USER_SHEET,tabID:a})},closeEmployeeWorkUserSheet:function(a){i({type:g.CLOSE_EMPLOYEE_WORK_USER_SHEET,tabID:a})},openMentorshipProgramSheet:function(a){i({type:g.OPEN_MENTORSHIP_PROGRAM_SHEET,tabID:a})},onIsPageTab:function(a,b){i({type:g.ON_IS_PAGE_TAB,pageIndicator:b,tabID:a})},onBootloadEventReminder:function(a){i({type:g.ON_BOOTLOAD_EVENT_REMINDER,tabID:a})},onWorkDoNotDisturbResponse:function(a,b,c){i({type:g.ON_WORK_DO_NOT_DISTURB_RESPONSE,tabID:a,status:b,description:c})},onMentorshipProgramResponse:function(a,b,c){i({type:g.ON_MENTORSHIP_PROGRAM_RESPONSE,tabID:a,groupID:c,programName:b})}};e.exports=a}),null);
__d("MercurySheetPolicy",["keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={ChatThreadIsMutedTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatUserFocusSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserFocusBypassSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserBlockedTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatUploadWarningTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatThreadIsMessageBlockedSheet:{isPermanent:!0,isSheetWithInput:!1},ChatReadOnlyTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatReadOnlyPermanentTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatOfflineTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNoRecipientsTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNewMessagesTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatNameConversationTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatEmployeeAwaySheet:{isPermanent:!0,isSheetWithInput:!1},ChatEventReminderTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatMontageSheet:{isPermanent:!1,isSheetWithInput:!1},ChatJoinCallSheet:{isPermanent:!0,isSheetWithInput:!1},FantaAddFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},FantaAddMoreFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},ChatRoomAssociatedObjectSheet:{isPermanent:!1,isSheetWithInput:!1},ChatMentorshipProgramSheet:{isPermanent:!1,isSheetWithInput:!1},ChatGroupsSyncTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatGroupNameComposerTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatIntegrityLandingScreenSheet:{isPermanent:!0,isSheetWithInput:!1}};a={canReplaceOpenSheet:function(a,b){var c=this.getType(b),d=this.isPermanent(b);b=this.isSheetWithInput(b);var e=this.getType(a),f=this.isPermanent(a);a=this.isSheetWithInput(a);if(a)return!!(c!==e&&b);if(f&&!d)return!1;return e===this.sheets.ChatThreadIsMessageBlockedSheet?!1:!0},getType:function(a){var b=a.getType||a.type&&a.type.getType||function(){return a};b=b.call(a);return b},isPermanent:function(a){if(typeof a==="string"&&g[a])return g[a].isPermanent;var b=a.isPermanent||a.type&&a.type.isPermanent||function(){return!1};b=b.call(a);return b},isSheetWithInput:function(a){if(typeof a==="string"&&g[a])return g[a].isSheetWithInput;var b=a.isSheetWithInput||a.type&&a.type.isSheetWithInput||function(){return!1};b=b.call(a);return b},sheets:b("keyMirror")(g)};e.exports=a}),null);
__d("MessengerAdminGroupUtils",["fbt","CurrentUser","MercuryConfig","MercuryIDs","MessageRequestUtils","MessageThreadAssociatedObjectUtils","MessagingSourceEnum","QE2Logger","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="messenger_use_new_group_participant_suggestion_ranking",i="show_nullstate_chat_tab_group_chat",j={isJoinableAndOpenThread:function(a){return this.isJoinableThread(a)&&this.isApprovalOpenThread(a)},isJoinableAndApprovalRequiredThread:function(a){return!!(this.isJoinableThread(a)&&a&&a.approval_mode===1)},isWorkSyncedGroupChat:function(a){return!!(a==null?void 0:a.work_associated_group)},isWorkFroup:function(a){return!!(b("gkx")("678597")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===1&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},isWorkSyncedChatThreadCreationMessage:function(a){return!!(a.log_message_data&&a.log_message_data.name!=null&&a.tags&&(a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_CREATION)!==-1||a.tags.indexOf(b("MessagingSourceEnum").WORK_DEFAULT_GROUP_SYNCED_CHAT_CREATION)!==-1))},isWorkSyncedChatThreadMemberSyncMessage:function(a){return!!(a.tags&&a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC)!==-1)},shouldAddToApprovalQueue:function(a,b){return!!(this.isJoinableAndApprovalRequiredThread(a)&&a&&!j.isAdmin(a.admins,b))},isJoinableThread:function(a){return!!(b("gkx")("678598")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===1)},isGroupChat:function(a){return!!(a&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},shouldInvite:function(a){return!!(b("gkx")("678598")&&a&&a.participant_add_mode==="INVITE")},isApprovalOpenThread:function(a){return!!((b("CurrentUser").isWorkUser()||b("gkx")("678598"))&&a&&a.approval_mode===0)},isAdminRequired:function(a){return!!(a&&a.admin_model_status==="required")},isOwner:function(a,b){return a&&(this.isJoinableThread(b)||this.isAdminRequired(b))},canSeeJoinableGroupOptions:function(a,c){var d=b("CurrentUser").isWorkUser(),e=j.showJoinableApprovalToggle(a,c);c=j.showApprovalQueue(a,c);return!d&&this.isJoinableThread(a)&&(c||e)},canSeeGroupOptionsSection:function(a,c){c=this.isAdmin(a.admins,c);var d=b("MessageRequestUtils").isMessageRequest(a);return c&&this.isAdminRequired(a)&&!d},canSeeBotsInGroupTypeahead:function(){return b("CurrentUser").isWorkUser()},canMakeOthersAdmins:function(a,b,c){return this.isOwner(a,c)&&!b},canMakeSelfAdmin:function(a,b){return(this.isJoinableThread(b)||this.isAdminRequired(b))&&Object.keys(b.admins).length===0&&a},canRemoveAdmin:function(a,b,c,d){if(this.isAdminRequired(d)&&Object.keys(d.admins).length===1)return!1;switch(c){case 2:return!1;default:return this.isOwner(a,d)&&b}},canRemoveFromGroup:function(a,b,c){switch(b){case 2:return!1;default:return this.isAdminRequired(c)||this.isWorkFroup(c)?a:this.isOwner(a,c)||!this.isJoinableThread(c)}},showGroupOptionsSection:function(a){return a.group_thread_subtype!==14},showJoinableApprovalToggle:function(a,b){if(a.associated_object&&!a.associated_object.approval_mode_toggleable)return!1;b=j.isAdmin(a.admins,b);return j.isOwner(b,a)},showApprovalQueue:function(a,b){b=j.isAdmin(a.admins,b);b=j.isOwner(b,a);var c=this.getPendingRequestNumber(a);if(a&&this.isAdminRequired(a))return this.isAdminRequired(a)&&b&&c>0;else{a=j.isJoinableAndApprovalRequiredThread(a);return a&&b&&c>0}},showParticipantsModal:function(a,b,c){return this.isJoinableThread(c)&&!a&&!b},useNewGroupMemberSuggestionRanking:function(){b("QE2Logger").logExposureForUser(h);return b("MercuryConfig").MNGPS},showDefaultListForNewPersonAddChatTab:function(){b("QE2Logger").logExposureForUser(i);return b("MercuryConfig").ChatGroupChat},showDefaultListForNewChatTab:function(){return b("MercuryConfig").ChatComposer},canUpdateThreadCustomization:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admins,c);var e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},canUpdateThreadDescription:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admins,c);var e=j.isWorkSyncedGroupChat(a);if(e)return c;e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},isAdmin:function(a,c){if(!a)return!1;if(b("MercuryIDs").isValid(c)){var d=b("MercuryIDs").getUserIDFromParticipantID(c);return d!=null&&a[d]!==void 0}return a[c]!==void 0},getLeaveGroupBodyText:function(a,b){a=this.isOwner(a,b);var c=j.isWorkSyncedGroupChat(b);return!c?a?g._("Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send or receive new messages."):g._("You will stop receiving messages from this conversation and people will see that you left."):a?b.participants.length===1?g._("Are you sure you want to leave this group? As you're the last member, leaving now will also delete this group."):g._("Leaving this group will remove you as an owner and allow other members to manage the chat thread. You will no longer be able to send or receive new messages. You will also be removed from the group."):g._("You will stop receiving messages from this conversation and people will see that you left. You will also be removed from the group.")},getLeaveGroupTitleText:function(a,b){return j.isWorkSyncedGroupChat(b)?b.participants.length===1?g._("Delete Group and Chat?"):g._("Leave Group and Chat?"):this.isOwner(a,b)?g._("Leave this conversation?"):g._("Leave Conversation?")},getLeaveGroupButtonText:function(a,b){return this.isOwner(a,b)?b.participants.length===1?g._("Leave and delete"):g._("Leave conversation"):g._("Leave")},getMakeOwnerBodyText:function(a,b,c){if(a)return b?g._("As a group admin, you will be able to manage who can join and customize this conversation."):g._("As a group admin, \"{owner's name}\" will be able to manage who can join and customize this conversation.",[g._param("owner's name",c)]);else return b?g._("As a group owner, you will be able to manage group ownership and remove members from the conversation. Only owners will be able to add other owners."):g._("As a group owner, \"{owner's name}\" will be able to manage group ownership and remove members from the conversation. They will be able to remove ownership from other owners.",[g._param("owner's name",c)])},getMakeOwnerTitleText:function(a,b){if(a)return b?g._("Become group admin?"):g._("Add group admin?");else return b?g._("Become group owner?"):g._("Add group owner?")},getMakeOwnerButtonText:function(a,b){if(a)return b?g._("Become admin"):g._("Make admin");else return b?g._("Become owner"):g._("Make owner")},getRemoveOwnerBodyText:function(a,b,c,d){if(b&&c)return a?null:g._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group. Any other member will be able to own the group.");else if(b&&!c)return a?g._("You will no longer be able to manage who can join and customize this conversation."):g._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group.");else return a?g._("\"{owner's name}\" will no longer be able to manage who can join and customize this conversation.",[g._param("owner's name",d)]):g._("\"{owner's name}\" will no longer manage group ownership and remove members from the conversation. They will still be a participant in the group.",[g._param("owner's name",d)])},getRemoveOwnerTitleText:function(a){return a?g._("Remove as group admin?"):g._("Remove as group owner?")},getRemoveOwnerButtonText:function(a){return a?g._("Remove"):g._("Remove owner")},getPendingRequestNumber:function(a){if(a&&a.approval_queue_ids&&a.approval_queue_ids.length)return a.approval_queue_ids.length;else if(a&&this.isAdminRequired(a)&&a.group_approval_queue&&a.group_approval_queue.length)return a.group_approval_queue.length;return 0}};e.exports=j}),null);
__d("FantaTypeJoinableThread",["immutable"],(function(a,b,c,d,e,f){"use strict";a={admins:[],approvalMode:0,associatedObject:null,description:null,friendsInParticipants:[],imageURL:null,isViewerSubscribed:!1,isWorkpaceChat:!1,joinableMode:{mode:0,link:""},linkHash:"",participants:[],threadID:null,threadFBID:null,threadName:null};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeSharePreview",["immutable"],(function(a,b,c,d,e,f){"use strict";a={isLoading:!1,params:null,type:null,uri:null};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeFileUploader",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=Object.freeze({ANIMATED_IMAGE:"animated_image",AUDIO:"audio",FILE:"file",GENERIC_ATTACHMENT:"generic_attachment",IMAGE:"image",VIDEO:"video"});c={uploadedFiles:b("immutable").Map(),uploadingFiles:b("immutable").Map()};d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getTypeIDs=function(a){return this.uploadedFiles.reduce(function(b,c){c.type===a&&c.uploadedID&&(b=b.concat(c.uploadedID));return b},[])};return b}(b("immutable").Record(c));d.fileTypes=a;e.exports=d}),null);
__d("FantaTypeComposer",["FantaTypeFileUploader","FantaTypeSharePreview","immutable"],(function(a,b,c,d,e,f){"use strict";var g=0;a={fileUploader:new(b("FantaTypeFileUploader"))(),sharePreview:new(b("FantaTypeSharePreview"))(),text:"",replyingToMessage:null,version:g};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,{version:++g})||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeTabContents",["ChatPrivacyActionController","FantaGetMessageActions","FantaTypeComposer","MercuryIDs","emptyFunction","immutable","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={composer:new(b("FantaTypeComposer"))(),highlightNewMessage:!1,id:"",isMontageOpen:!1,isMultiCompany:null,isNewMessageTab:!1,isScrolledToBottom:!0,joinableInterstitialData:null,jumpToMessage:null,loggingID:null,membershipParticipants:null,nullStateCTA:null,openSheet:null,pageIndicator:null,pageIndicatorDescription:null,participants:null,privacyController:null,showContextBanner:!1,showUnseenMessages:b("emptyFunction"),signatureID:null,thread:null,threadHref:null,threadPreviewID:null,threadPreviewRecipients:null,timezoneInfo:null,typeahead:null,uri:null,workAvailabilityHumanReadable:null,workAvailabilityStatus:null,newGroupChatName:null};c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d,e=b("MercuryIDs").getUserIDFromThreadID(c.id);e&&(d=new(b("ChatPrivacyActionController"))(e,function(a){b("setImmediate")(function(){b("FantaGetMessageActions").onPrivacyStateChange(c.id,a)})}));return a.call(this,babelHelpers["extends"]({privacyController:d},c))||this}return c}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeBlockedWarningState",["immutable"],(function(a,b,c,d,e,f){"use strict";a={optedInThreadsWithBlockees:b("immutable").Map({})};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeMercuryState",["immutable"],(function(a,b,c,d,e,f){"use strict";a={tabContents:b("immutable").Map({}),userInputRequest:{}};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeAppState",["FantaTypeBlockedWarningState","FantaTypeMercuryState","FantaTypeTabGroup","immutable"],(function(a,b,c,d,e,f){"use strict";a={tabGroup:new(b("FantaTypeTabGroup"))(),mercury:new(b("FantaTypeMercuryState"))(),blockedWarning:new(b("FantaTypeBlockedWarningState"))()};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("MessengerHotlikeEmoji.bs",[],(function(a,b,c,d,e,f){"use strict";var g="f0000";function a(a){return a===g}f.hotlike_key=g;f.isMessengerHotlike=a}),null);
__d("MessengerUploadFilesUtil.bs",["bs_curry","FantaTypeFileUploader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e=(d={},d[(e=b("FantaTypeFileUploader")).fileTypes.ANIMATED_IMAGE]="gif_ids",d[e.fileTypes.AUDIO]="audio_ids",d[e.fileTypes.FILE]="file_ids",d[e.fileTypes.GENERIC_ATTACHMENT]="generic_attachment_ids",d[e.fileTypes.IMAGE]="image_ids",d[e.fileTypes.VIDEO]="video_ids",d);function a(a,b){if(a==null)return null;else{a=a.getTypeIDs(b);if(a.length>0)return a;else return null}}function g(a){__p&&__p();if(a==null)return;else{a=a.get("uploadedFiles");var b=[],c=[];a.forEach(function(a,d,e){d=a.file;if(d.type.startsWith("image/")){b.push(d);return 0}else{c.push(d);return 0}});return[b,c]}}function h(a,c){if(c.length>0)return b("bs_curry")._1(a,c);else return 0}function c(a,b){__p&&__p();if(a==null||b==null)return 0;else{a=g(a);if(a!==void 0){a=a;h(b,a[0]);a[1].forEach(function(a){return h(b,[a])});return 0}else return 0}}f.supportAttachments=e;f.getAttachmentIDs=a;f.getAttachments=g;f.sendAttchment=h;f.sendAttchments=c}),null);
__d("MessengerCustomColorUtils.bs",["cssVar","CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){if(b("CurrentUser").isWorkUser())return"#373e4c";else return"#0099ff"}function a(a){a=a.solid_color;if(a==null)return h(0);else return a}f.defaultColor=h;f.customColorOrBlue=a}),null);
__d("MessengerCustomColorUtils.re",["MessengerCustomColorUtils.bs"],(function(a,b,c,d,e,f){a=b("MessengerCustomColorUtils.bs").defaultColor;f.defaultColor=a;c=b("MessengerCustomColorUtils.bs").customColorOrBlue;f.customColorOrBlue=c}),null);
__d("MessengerDotComAndInboxM4Check.bs",["gkx","CurrentUser","MessengerEnvironment"],(function(a,b,c,d,e,f){"use strict";a=b("gkx")("686397")&&!b("CurrentUser").isWorkUser()&&b("MessengerEnvironment").messengerui;f.yes=a}),null);
__d("MessengerDotComAndInboxM4Check.re",["MessengerDotComAndInboxM4Check.bs"],(function(a,b,c,d,e,f){a=b("MessengerDotComAndInboxM4Check.bs").yes;f.yes=a}),null);
__d("MessengerPaperclipIconSVGM4React.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c;return(c=b("React")).jsx("svg",{children:c.jsxs("g",{children:[c.jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),c.jsx("path",{d:"M18,31 C13.5815,31 10,27.4185 10,23 L10,11 C10,7.6865 12.6865,5 16,5 C19.3135,5 22,7.6865 22,11 L22,21 C22,23.209 20.209,25 18,25 C15.791,25 14,23.209 14,21 L14,14.5 C14,13.6715 14.6715,13 15.5,13 C16.3285,13 17,13.6715 17,14.5 L17,21 C17,21.552 17.448,22 18,22 C18.552,22 19,21.552 19,21 L19,11 C19,9.3435 17.6565,8 16,8 C14.3435,8 13,9.3435 13,11 L13,23 C13,25.761 15.239,28 18,28 C20.761,28 23,25.761 23,23 L23,14.5 C23,13.6715 23.6715,13 24.5,13 C25.3285,13 26,13.6715 26,14.5 L26,23 C26,27.4185 22.4185,31 18,31",fill:a})],fill:"none",fillRule:"evenodd"}),className:"_7oal",height:"36px",width:"36px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("MessengerPaperclipIconSVGM4React.re",["MessengerPaperclipIconSVGM4React.bs"],(function(a,b,c,d,e,f){a=function(a){a=b("MessengerPaperclipIconSVGM4React.bs").make(a.fill);return a};f.make=a}),null);
__d("MessengerPhotoIconSVGM4React.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.size;c=c!==void 0?c:36;a=a.fill;return b("React").jsx("svg",{children:b("React").jsx("g",{children:b("React").jsxs("g",{children:[b("React").jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),b("React").jsx("path",{d:"M13.5,11 C12.1195,11 11,12.119 11,13.5 C11,14.881 12.1195,16 13.5,16 C14.8805,16 16,14.881 16,13.5 C16,12.119 14.8805,11 13.5,11 M26.638,21.467 L21.2375,18.767 C19.199,17.7485 16.801,17.7485 14.7625,18.767 L9.362,21.467 C9.1955,21.55 9,21.429 9,21.243 L9,11 C9,9.8955 9.8955,9 11,9 L25,9 C26.1045,9 27,9.8955 27,11 L27,21.243 C27,21.429 26.8045,21.55 26.638,21.467 M25,7 L11,7 C8.7905,7 7,8.791 7,11 L7,25 C7,27.209 8.7905,29 11,29 L25,29 C27.209,29 29,27.209 29,25 L29,11 C29,8.791 27.209,7 25,7",fill:a})],id:"Group"}),fill:"none",fillRule:"evenodd"}),className:"_7oal",height:String(c)+"px",width:String(c)+"px",viewBox:"0 0 36 36"})}c=a;f.make=c}),null);
__d("MessengerPhotoIconSVGM4React.re",["MessengerPhotoIconSVGM4React.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerPhotoIconSVGM4React.bs").make;f.make=a}),null);
__d("MessengerSurfaceType.bs",[],(function(a,b,c,d,e,f){"use strict";a="MESSENGER";b="WORK_QUIKCHAT";f.messenger=a;f.workQuickchat=b}),null);
__d("MessengerSurfaceContext.bs",["React","MessengerSurfaceType.bs"],(function(a,b,c,d,e,f){"use strict";a=b("React").createContext(b("MessengerSurfaceType.bs").messenger);c=b("MessengerSurfaceType.bs").messenger;f.defaultValue=c;f.context=a}),null);
__d("MessengerSurfaceContext.re",["MessengerSurfaceContext.bs"],(function(a,b,c,d,e,f){a=b("MessengerSurfaceContext.bs").context;f.context=a}),null);
__d("MessengerSurfaceType.re",["MessengerSurfaceType.bs"],(function(a,b,c,d,e,f){a=b("MessengerSurfaceType.bs").messenger;f.messenger=a;c=b("MessengerSurfaceType.bs").workQuickchat;f.workQuickchat=c}),null);
__d("MessengerHotLikeIconSVGM4React.bs",["cx","React","gkx","uniqueID","ReactDOMRe.bs","CurrentUser","MessengerColors","MessengerEnvironment","MessengerCustomColorUtils.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){return b("React").jsx("path",{d:"M10,30 L7.75,30 C6.625,30 6,27.7515306 6,23.3673469 C6,18.9831633 6.625,16.7346939 7.75,16.7346939 L10,16.7346939 C10.552,16.7346939 11,17.1918367 11,17.755102 L11,28.9795918 C11,29.5428571 10.552,30 10,30 M17,6.02040816 C17,5.44540816 17.4195,5.00255102 18,5 C19.2035,5 22,5.79081633 22,10.6122449 C22,12.2443878 21.8015,13.130102 21.7195,13.7163265 C21.719,13.7183673 21.719,13.7204082 21.7185,13.722449 C21.6865,13.9566327 21.872,14.1647959 22.113,14.1647959 C26.908,14.1647959 29.469,15.4336735 29.469,16.7290816 C29.469,17.3612245 29.211,17.9321429 28.7975,18.3535714 C29.513,18.7591837 30,19.5091837 30,20.3780612 C30,21.3642857 29.4255,22.2045918 28.5475,22.5515306 C28.821,22.9326531 28.9845,23.3954082 28.9845,23.8969388 C28.9845,24.9704082 28.3395,25.8653061 27.3365,26.1438776 C27.4285,26.377551 27.4845,26.6290816 27.4845,26.8943878 C27.4845,28.0459184 25.5485,28.9795918 21,28.9795918 C17.675,28.9795918 15.3815,28.3857143 14.5,27.9591837 C13.851,27.6454082 13,27.0770408 13,25.4081633 L13,18.7755102 C13,15.0403061 17.25,13.7760204 17.25,10.1020408 C17.25,7.78826531 17,6.81326531 17,6.02040816",fill:a})}function a(a){a=a.color;a=h(a);if(b("MessengerEnvironment").messengerui&&!b("CurrentUser").isWorkUser()||b("gkx")("1072568"))return b("React").jsx("svg",{children:a,className:"_7oal",height:"36px",width:"36px",viewBox:"0 1 36 36"});else return b("React").jsx("svg",{children:a,height:"32px",width:"32px",viewBox:"0 0 36 36"})}function c(a){var c,d;a=a.thread;var e=(c=b("React")).useState(function(){return b("uniqueID")()});e=e[0];var f=h("black");d=(d=b("ReactDOMRe.bs")).Style.unsafeAddProp(d.Style.unsafeAddProp(d.Style.unsafeAddProp(d.Style.unsafeAddProp(b("MessengerColors").makeLinearGradient(a.gradient_colors,a.solid_color,b("MessengerCustomColorUtils.bs").defaultColor(0)),"backgroundAttachment","fixed"),"height","95%"),"width","95%"),"margin","auto");return c.createElement(c.Fragment,void 0,c.jsxs("svg",{children:[c.jsxs("mask",{children:[c.jsx("rect",{height:"100%",width:"100%",fill:"white",x:"0",y:"0"}),f],id:e}),c.jsx("rect",{className:"_8rsr",height:"100%",width:"100%",fill:"white",mask:"url(#"+(String(e)+")")})],style:{height:"100%",position:"absolute",width:"100%"},viewBox:"0 0 36 36"}),c.jsx("div",{style:d}))}d=a;e=c;f.pathHotLike=h;f.make=d;f.makeWithGradient=e}),null);
__d("MessengerHotLikeOutlineSVG.react",["cssVar","fbt","CurrentUser","MercuryShareAttachmentRenderLocations","React","uniqueID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i="transparent",j=h._("Thumbs Up Sign");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={titleId:b("uniqueID")()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a,c;a=(a=this.props.color)!=null?a:b("CurrentUser").isWorkUser()?"#373e4c":"#0084ff";c={height:(c=this.props.height)!=null?c:"85%",width:this.props.width};if(this.props.location!==b("MercuryShareAttachmentRenderLocations").CHAT&&this.props.location!==b("MercuryShareAttachmentRenderLocations").PAGES_INBOX){var d;c.width=(d=this.props.width)!=null?d:"66%"}return b("React").jsxs("svg",{"aria-labelledby":this.state.titleId,version:"1.1",viewBox:"0 0 40.16 42.24",preserveAspectRatio:"xMinYMax meet",style:c,children:[b("React").jsx("title",{id:this.state.titleId,children:j}),b("React").jsx("path",{d:"M935.36,1582.44a0,0,0,0,0,0,.06,3.59,3.59,0,0,1-.72,6.53,0,0,0,0,0,0,0,3.56,3.56,0,0,1,.71,2.13,3.6,3.6,0,0,1-3,3.54, 0,0,0,0,0,0,.05,3.56,3.56,0,0,1,.38,1.61,3.61,3.61,0,0,1-3.42,3.6H910v-19.6l5.27-7.9a4,4,0,0,0,.66-2.31l-0.1-4c-0.22-2.4-.09-2.06, 1.13-2.37,2-.51,7.16,1.59,5.13,12.17h11.06A3.59,3.59,0,0,1,935.36,1582.44ZM899,1581h7v22h-7v-22Z",transform:"translate(-898.5 -1563.26)",fill:i,fillRule:"evenodd",stroke:a,strokeLinecap:"round",strokeWidth:"5%"})]})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerHotLikeButtonInnerIcon.react",["cssVar","CurrentUser","EmojiLikeConstants","Image.react","MessengerCustomColorUtils.bs","MessengerHotLikeIconSVGM4React.bs","MessengerHotLikeOutlineSVG.react","MessengerSupportedEmojiUtils","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerHotLikeIconSVGM4React.bs").make;function a(a){__p&&__p();var c=a.CustomRenderer,d=a.customLike,e=a.customColor,f=a.location,g=a.disabled,i=a.renderSize;i=i===void 0?16:i;a=a.thread;var j=null,k={};if(d&&d.emoji){d=d.emoji;d=b("MessengerSupportedEmojiUtils").getNewEmojiData(d,b("EmojiLikeConstants").size.SMALL);k.background="none";j=b("React").jsx(b("Image.react"),{src:d&&d.url,style:{padding:i==16?0:3,display:"block",height:i,width:i}})}else if(c)j=b("React").jsx(c,{color:e,location:f,renderSize:i});else if(e)if(!b("CurrentUser").isWorkUser()||b("gkx")("1072568")){k=a&&a.gradient_colors&&a.gradient_colors.length?a.gradient_colors[a.gradient_colors.length-1]:e;j=b("React").jsx(h,{color:k})}else j=b("React").jsx(b("MessengerHotLikeOutlineSVG.react"),{color:e,location:f});else if(!b("CurrentUser").isWorkUser()){d=g?"rgba(0, 0, 0, 0.12)":b("MessengerCustomColorUtils.bs").defaultColor();j=b("React").jsx(h,{color:d})}return j}e.exports=a}),null);
__d("MessengerHotLikePreviewEvents",["mixInEventEmitter"],(function(a,b,c,d,e,f){"use strict";a={START:"start",STOP:"stop",STOP_EMOJI:"stop_emoji",POP:"pop",REMOVE:"remove",FINISH_ANIMATION:"finish_animation",FINISH_EMOJI_ANIMATION:"finish_emoji_animation"};b("mixInEventEmitter")(a,{start:!0,stop:!0,stop_emoji:!0,pop:!0,remove:"remove",finish_animation:"finish_animation",finish_emoji_animation:"finish_emoji_animation"});e.exports=a}),null);
__d("MessengerHotLikeUtils",["EmojiLikeConstants","StickerConstants","XStickerAssetController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={SizeTimes:{small:1e3,medium:2e3,large:3e3},getStickerIDForTime:function(a){var c=b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;switch(!0){case a<this.SizeTimes.small:c=b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;break;case a<this.SizeTimes.medium:c=b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID;break;case a<this.SizeTimes.large:c=b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID;break}return c},getEmojiSizeForTime:function(a){var c=b("EmojiLikeConstants").size.SMALL;a<this.SizeTimes.small?c=b("EmojiLikeConstants").size.SMALL:a<this.SizeTimes.medium?c=b("EmojiLikeConstants").size.MEDIUM:a<this.SizeTimes.large&&(c=b("EmojiLikeConstants").size.LARGE);return c},getMetadataForHotLike:function(a){__p&&__p();var c;switch(a){case b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID:c=120;break;case b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID:c=84;break;case b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID:c=35;break;case b("EmojiLikeConstants").size.LARGE:c=64;break;case b("EmojiLikeConstants").size.MEDIUM:c=64;break;case b("EmojiLikeConstants").size.SMALL:c=32;break}return c?{height:c,width:c}:void 0},getPreviewURI:function(){return b("XStickerAssetController").getURIBuilder().setInt("sticker_id",b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID).setEnum("image_type","BestEffortImage").getURI().toString()},getURIWithID:function(a){return b("XStickerAssetController").getURIBuilder().setInt("sticker_id",a).setEnum("image_type","BestEffortImage").getURI().toString()},getCustomEmojiFromThread:function(a){return a&&a.custom_like_icon}};e.exports=a}),null);
__d("WorkQuickchatHotLikeInnerButton.react",["cssVar","cx","EmojiLikeConstants","Image.react","MessengerCustomColorUtils.bs","MessengerDotComAndInboxM4Check.bs","MessengerHotLikeIconSVGM4React.bs","MessengerHotLikeOutlineSVG.react","MessengerSupportedEmojiUtils","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerHotLikeIconSVGM4React.bs").make;function a(a){__p&&__p();var c=a.CustomRenderer,d=a.customLike,e=a.customColor,f=a.location,g=a.disabled,h=a.renderSize;a=a.thread;var j=null;if(d&&d.emoji){d=d.emoji;d=b("MessengerSupportedEmojiUtils").getNewEmojiData(d,b("EmojiLikeConstants").size.SMALL);j=b("React").jsx(b("Image.react"),{className:"_7rpg",src:d&&d.url})}else if(c){d=this.props.CustomRenderer;j=b("React").jsx(d,{color:e,location:f,renderSize:h})}else if(e)if(b("MessengerDotComAndInboxM4Check.bs").yes){c=a&&a.gradient_colors&&a.gradient_colors.length?a.gradient_colors[a.gradient_colors.length-1]:e;j=b("React").jsx(i,{color:c})}else j=b("React").jsx(b("MessengerHotLikeOutlineSVG.react"),{height:"100%",width:"100%",color:e,location:f});else b("MessengerDotComAndInboxM4Check.bs").yes&&(j=i.make(g?"rgba(0, 0, 0, 0.12)":b("MessengerCustomColorUtils.bs").defaultColor()));return j}e.exports=a}),null);
__d("MessengerSourceContext.bs",["React","MercuryTriodeSourceUtil"],(function(a,b,c,d,e,f){"use strict";a=b("MercuryTriodeSourceUtil").getMercuryTriodeSource();c=b("React").createContext(a);f.defaultContextValue=a;f.context=c}),null);
__d("MessengerSourceContext.re",["MessengerSourceContext.bs"],(function(a,b,c,d,e,f){a=b("MessengerSourceContext.bs").context;f.context=a}),null);
__d("withMessengerSource",["MessengerSourceContext.re","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useContext;function a(a,c){var d;c===!0?c=b("React").forwardRef(function(c,d){var e=g(b("MessengerSourceContext.re").context);return b("React").jsx(a,babelHelpers["extends"]({},c,{ref:d,source:e}))}):c=function(c){var d=g(b("MessengerSourceContext.re").context);return b("React").jsx(a,babelHelpers["extends"]({},c,{source:d}))};c.displayName=((d=(d=a.displayName)!=null?d:a.name)!=null?d:"Component")+"WithMessengerSource";return c}e.exports=a}),null);
__d("MessengerHotLikeButton.react",["cx","fbt","Bootloader","EmojiLikeConstants","ImmutableObject","Keys","KeyStatus","Link.react","MercuryMessageObject","MessengerEnvironment","MessengerHotLikeButtonInnerIcon.react","MessengerHotLikePreviewEvents","MessengerHotLikeUtils","MessengerSurfaceType.re","MessengerSurfaceContext.re","prop-types","React","StickerConstants","WorkQuickchatHotLikeInnerButton.react","clearInterval","clearTimeout","ifRequired","joinClasses","setIntervalAcrossTransitions","setTimeoutAcrossTransitions","withMessengerSource"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryMessageObject").get(),j=b("MessengerSurfaceContext.re").context,k=b("React").useContext,l=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){__p&&__p();var a,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=d=c.call.apply(c,[this].concat(f))||this,d.$1=null,d.$2=null,d.$3=null,d.$4=null,d.$6=function(a){(d.props.disabled||d.$3)&&(a.preventDefault(),a.stopPropagation());if(d.props.disabled||a.button!==0)return;d.props.onMouseDown&&d.props.onMouseDown();d.$3=Date.now();d.$9();d.$10()},d.$8=function(){if(!(d.props.threadID&&d.$3))return;d.$3=0;d.$11();d.$12()},d.$14=function(){if(!d.props.threadID)return;b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").POP,d.props.threadID)},d.$7=function(){d.$3&&(d.$3=0,d.$11(),d.$14())},d.$5=function(a){a.stopPropagation();if(d.props.disabled)return;if(b("KeyStatus").getKeyDownCode()===b("Keys").RETURN||!d.props.threadID){a=d.props.sendCustomLike;d.props.customLike&&a?a(d.props.customLike,b("MessengerHotLikeUtils").getEmojiSizeForTime(1)):d.props.sendSticker(b("MessengerHotLikeUtils").getStickerIDForTime(1))}},a)||babelHelpers.assertThisInitialized(d)}var d=a.prototype;d.componentDidMount=function(){var a=this;this.$4=b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(c,d,e){c===a.props.threadID&&(a.props.forGameChat&&b("Bootloader").loadModules(["GamesQuicksilverFunnelLogger"],function(a){a.logGameChatSendHotLike(a.getDefaultFunnelName())},"MessengerHotLikeButton.react"),e&&a.props.customLike&&a.props.sendCustomLike?a.props.sendCustomLike(a.props.customLike,e,b("EmojiLikeConstants").source.HOT_LIKE):a.props.forGameChat||a.props.sendSticker(d))})};d.componentWillUnmount=function(){this.$4&&this.$4.remove()};d.render=function(){var a=h._("Send a Like"),c={};this.props.customLike&&this.props.customLike.emoji&&(c.background="none");var d=this.props.surface===b("MessengerSurfaceType.re").workQuickchat?b("WorkQuickchatHotLikeInnerButton.react"):b("MessengerHotLikeButtonInnerIcon.react");return b("React").jsx(b("Link.react"),{"aria-label":a,className:b("joinClasses")(this.props.customColor||this.props.CustomRenderer?"_5j_u":"",this.props.className),"data-testid":"send_a_like_button",disabled:this.props.disabled,href:"#",onClick:this.$5,onDragStart:function(a){return a.preventDefault()},onMouseDown:this.$6,onMouseLeave:this.$7,onMouseUp:this.$8,role:"button",style:c,title:a,children:b("React").jsx(d,{CustomRenderer:this.props.CustomRenderer,customLike:this.props.customLike,customColor:this.props.customColor,location:this.props.location,disabled:this.props.disabled,renderSize:this.props.renderSize,thread:this.props.thread})})};d.$9=function(){if(!this.props.threadID)return;b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").START,this.$13(),this.props.threadID)};d.$12=function(){__p&&__p();var a=this;if(!this.props.threadID)return;!b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerHotLikePreview.react",function(){b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP,a.props.threadID)},function(){if(a.$1!==null)return;a.$1=b("setIntervalAcrossTransitions")(function(){b("ifRequired")("MessengerHotLikePreview.react",function(){a.$1!==null&&(b("clearInterval")(a.$1),a.$1=null),b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP,a.props.threadID)})},100)}):b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP,this.props.threadID)};d.$13=function(){__p&&__p();var a=this.props.threadID;if(!a)return null;a=i.constructStickerMessageObject(b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,this.props.source,a);i.normalizeNewMessage(a);a.is_like_preview=!0;a.like_preview_since=this.$3;a.customLike=this.props.customLike&&this.props.customLike.emoji?this.props.customLike:null;a.body="";return new(b("ImmutableObject"))(a)};d.$10=function(){this.$11(),this.$2=b("setTimeoutAcrossTransitions")(this.$14,b("MessengerHotLikeUtils").SizeTimes.large)};d.$11=function(){b("clearTimeout")(this.$2)};return a}(b("React").PureComponent);l.propTypes={CustomRenderer:(c=b("prop-types")).func,onMouseDown:c.func,customLike:c.object,customColor:c.string,forGameChat:c.bool,location:c.string,sendSticker:c.func.isRequired,sendCustomLike:c.func,threadID:c.string,disabled:c.bool,renderSize:c.number,thread:c.object,surface:c.string.isRequired};function a(a){var c=k(j);return b("React").jsx(l,babelHelpers["extends"]({},a,{surface:c}))}e.exports=b("withMessengerSource")(a)}),null);
__d("MessengerHotLikeChatSVGIcon.react",["cssVar","fbt","CurrentUser","React","uniqueID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("Thumbs Up Sign");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={titleId:b("uniqueID")()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a;a=(a=this.props.color)!=null?a:b("CurrentUser").isWorkUser()?"#373e4c":"#0084ff";var c=this.props.renderSize;c=c!=null?{height:c.toString(),width:c.toString()}:void 0;return b("React").jsxs("svg",babelHelpers["extends"]({"aria-labelledby":this.state.titleId,preserveAspectRatio:"xMinYMax meet",version:"1.1",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},c,{children:[b("React").jsx("title",{id:this.state.titleId,children:i}),b("React").jsxs("g",{style:{fill:a},children:[b("React").jsx("path",{d:"M16,9.1c0-0.8-0.3-1.1-0.6-1.3c0.2-0.3,0.3-0.7,0.3-1.2c0-1-0.8-1.7-2.1-1.7h-3.1c0.1-0.5,0.2-1.3,0.2-1.8 c0-1.1-0.3-2.4-1.2-3C9.3,0.1,9,0,8.7,0C8.1,0,7.7,0.2,7.6,0.4C7.5,0.5,7.5,0.6,7.5,0.7L7.6,3c0,0.2,0,0.4-0.1,0.5L5.7,6.6 c0,0-0.1,0.1-0.1,0.1l0,0l0,0L5.3,6.8C5.1,7,5,7.2,5,7.4v6.1c0,0.2,0.1,0.4,0.2,0.5c0.1,0.1,1,1,2,1h5.2c0.9,0,1.4-0.3,1.8-0.9 c0.3-0.5,0.2-1,0.1-1.4c0.5-0.2,0.9-0.5,1.1-1.2c0.1-0.4,0-0.8-0.2-1C15.6,10.3,16,9.9,16,9.1z"}),b("React").jsx("path",{d:"M3.3,6H0.7C0.3,6,0,6.3,0,6.7v8.5C0,15.7,0.3,16,0.7,16h2.5C3.7,16,4,15.7,4,15.3V6.7C4,6.3,3.7,6,3.3,6z"})]})]}))};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerQuickCamOrigins",[],(function(a,b,c,d,e,f){"use strict";var g={CHAT_TAB:"chat tab",MESSENGER:"messenger",getValues:function(){return[g.CHAT_TAB,g.MESSENGER]}};e.exports=g}),null);
__d("XUICloseButtonReact.bs",["ReasonReact.bs","bs_js_null_undefined","XUICloseButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g){var h;switch(d){case 0:h="small";break;case 1:h="medium";break;case 2:h="large";break}return b("ReasonReact.bs").wrapJsForReason(b("XUICloseButton.react"),{className:b("bs_js_null_undefined").fromOption(a),onClick:e,tooltip:b("bs_js_null_undefined").fromOption(f),shade:c?"dark":"light",size:h},g)}f.make=a}),null);
__d("ReplyingToMessageFallbackReact.bs",["cx","fbt","React","ReasonReact.bs","XUICloseButtonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();c=b("ReasonReact.bs").statelessComponent("ReplyingToMessageFallbackReact");function a(a){var c=a.onCancelReplyingToMessage;return function(a){return b("React").createElement("div",{className:(a?"_692o":"")+" _67tu"},b("ReasonReact.bs").element(void 0,void 0,b("XUICloseButtonReact.bs").make("_67tv",1,a?1:2,c,void 0,[])),h._("Replying to message"))}}d=a;e=a;f.component=c;f.make=d;f.jsComponent=e}),null);
__d("FantaTabComposer.react",["ChatTabComposerContainer.react","MessengerState.bs","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$2=function(a){c.$1=a},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this.props.participants;this.props.isFocused&&a.length>0&&!this.props.isEmptyLocalThread&&this.focusInput()};d.componentDidUpdate=function(a){this.props.isFocused&&this.props.isFocused!==a.isFocused&&!this.props.isEmptyLocalThread&&this.focusInput()};d.shouldComponentUpdate=function(a){var b=this.props;return!b.composer.equals(a.composer)||b.disableInput!==a.disableInput||!b.fileUploader&&!!a.fileUploader||b.fileUploader&&!b.fileUploader.equals(a.fileUploader)||b.isEmptyLocalThread!==a.isEmptyLocalThread||b.isFocused!==a.isFocused||b.isNewEmptyLocalThread!==a.isNewEmptyLocalThread||b.threadID!==a.threadID||b.viewer!==a.viewer||b.forGameChat!==a.forGameChat||b.participants.length!==a.participants.length};d.render=function(){var a=this,c=this.props,d=c.participants,e=c.threadID,f=c.viewer,g=c.isFocused;return d.length===0?b("React").jsx("div",{}):b("React").jsx(b("MessengerState.bs").jsComponent,{fbid:f,children:function(c){return b("React").jsx(b("ChatTabComposerContainer.react"),{blockedIDs:a.props.blockedIDs,composer:a.props.composer,disableInput:a.props.disableInput,fileUploader:a.props.fileUploader,isFocused:g,onEscape:a.props.onEscape,onSelectSticker:a.props.onSelectSticker,onSendHotLike:a.props.onSendHotLike,onSendPhoto:a.props.onSendPhoto,onTab:a.props.onTab,onSendMessage:a.props.onSendMessage,isNewEmptyLocalThread:a.props.isNewEmptyLocalThread,ref:a.$2,thread:b("MessengerState.bs").threads(c)[e],threadID:e,viewer:f,forGameChat:a.props.forGameChat})}})};d.focusInput=function(){this.$1&&this.$1.focusInput()};d.hasEmptyInput=function(){var a=this.$1;return!a?!1:a.hasEmptyInput()};return c}(b("React").Component);e.exports=a}),null);
__d("FantaTabGroup.react",["cx","CurrentUser","FantaTab.react","MessengerState.bs","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return!this.props.tabGroup.equals(a.tabGroup)||this.props.messengerState!==a.messengerState||!!(!this.props.tabContents&&a.tabContents)||!!(this.props.tabContents&&a.tabContents&&!this.props.tabContents.equals(a.tabContents))};d.render=function(){__p&&__p();var a=this.props,c=a.isLastOfTypeChecker,d=a.MainComponent,e=a.messengerState,f=a.MinimizedComponent,g=a.OverflowComponent,h=a.tabContents;a=a.tabGroup;var i=a.focusedTabID,j=a.getRaisedandUnraisedTabs(),k=j.raisedTabs;j=j.unraisedTabs;var l;c&&(l=k.findLastKey(function(a){return c(a)&&a.id}));a=a.allowedRaisedTabs===0?null:this.$1(j,g);var m=k.filter(function(a){return!a.isMinimized}).count();return b("React").jsxs("div",{className:"_59v1",children:[a,k.map(function(a){var c=h&&h.get(a.id),g=c&&c.threadPreviewID||a.id;return b("React").jsx(b("FantaTab.react"),{forGameChat:!1,isFocused:a.id===i,isLastTab:a===k.last(),isLastTabOfType:a.id===l,messengerState:e,MainComponent:d,MinimizedComponent:f,nonMinimizedRaisedTabCount:m,tab:a,tabContent:c,messages:b("MessengerState.bs").getCurrentlyLoadedMessages(b("CurrentUser").getID(),g),hasFetchedAll:b("MessengerState.bs").hasLoadedAllMessages(b("CurrentUser").getID(),g)},a.id)}).toArray()]})};d.$1=function(a,c){return!a.isEmpty()?b("React").jsx("div",{className:"_1kws",children:b("React").jsx(c,{items:a,tabContents:this.props.tabContents})}):null};return c}(b("React").Component);a.propTypes={MainComponent:(c=b("prop-types")).func.isRequired,messengerState:c.array,MinimizedComponent:c.func.isRequired,OverflowComponent:c.func.isRequired,tabContents:c.object,tabGroup:c.object.isRequired};e.exports=a}),null);
__d("ChatDetailStack.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.topDetail;a=a.bottomDetail;a=a!==null?b("React").jsx("div",{children:a,className:"_4jeh"}):null;return b("React").jsxs("div",{children:[b("React").jsx("div",{children:c,className:"_4jeg"}),a],className:"_2rt2"})}c=a;f.make=c}),null);
__d("ChatTabMenu.bs",["MercuryIDs","bs_caml_option","ReasonReact.bs","MessengerState.bs","bs_js_null_undefined","getPageIDFromThreadID","ChatTabMenuBootloader.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=a!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(a).thread_id):void 0;if(p!==void 0){var q=b("bs_caml_option").valFromOption(p);q=[b("MercuryIDs").isGroupChat(q),b("MessengerState.bs").isNewEmptyLocalThread(c,q),b("bs_caml_option").nullable_to_opt(b("getPageIDFromThreadID")(q))!==void 0]}else q=[!1,!0,!1];var r=a!==void 0?b("bs_caml_option").valFromOption(a).message_count===0:!0;return b("ReasonReact.bs").wrapJsForReason(b("ChatTabMenuBootloader.react"),{autoFocus:!1,hasBlockedMessages:h,highlightNewMessage:k,isEmptyChat:q[1],isEmptyConversation:r,isFocused:j,isGroupChat:q[0],isMultiCompany:i,isPageChat:q[2],membershipParticipants:b("bs_js_null_undefined").fromOption(d),pageUnsubscribeStatus:e,participantsMap:b("bs_js_null_undefined").fromOption(f),showMessengerReportNux:g,isNewMessageTab:l,thread:b("bs_js_null_undefined").fromOption(a),threadID:b("bs_js_null_undefined").fromOption(p),uri:m,viewer:c,iconStyle:n},o)}f.make=a}),null);
__d("MessengerHotlikeEmoji.re",["MessengerHotlikeEmoji.bs"],(function(a,b,c,d,e,f){a=b("MessengerHotlikeEmoji.bs").isMessengerHotlike;f.isMessengerHotlike=a}),null);
__d("MercuryThreadTitleReact.bs",["fbt","bs_block","bs_curry","React","bs_js_dict","bs_caml_obj","MercuryIDs","Badge.react","bs_belt_Option","bs_caml_option","CurrentUser","ReasonReact.bs","bs_js_null_undefined","MessengerParticipants.bs","MercuryParticipantListRenderer","MessengerTextWithEmoticons.react","WorkUserEmojiWithTooltipBootloader.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MercuryThreadTitleReact");function i(a,b){return g._("{conversation-title} ({unread-count})",[g._param("conversation-title",a),g._param("unread-count",String(b))])}function a(a,c,d,e,f,g,j,k,l){__p&&__p();var m=f!==void 0?f:!1,n=g!==void 0?g:!1,o=j!==void 0?j:!1,p=k!==void 0?k:!1,q=function(a){__p&&__p();if(d.name===""){b("bs_curry")._1(a[3],[""]);var c=b("MercuryIDs").getParticipantIDFromUserID(e),f=d.participants.length>1?d.participants.filter(function(a){return a!==c}):d.participants;b("MessengerParticipants.bs").getMulti(f,function(c){__p&&__p();if(a[1][2][0]){var e=[];f.forEach(function(a){a=b("bs_js_dict").get(c,a);if(a!==void 0){e.push(b("bs_caml_option").valFromOption(a));return 0}else return 0});var g=b("bs_js_null_undefined").bind(d.custom_nickname,function(a){var c={};b("bs_js_dict").entries(a).forEach(function(a){c[a[0]]=b("React").jsx(b("MessengerTextWithEmoticons.react"),{renderEmoji:!0,renderEmoticons:!0,text:a[1]});return 0});return c});g=new(b("MercuryParticipantListRenderer"))().setUseShortName(o).setUseAndSeparator(p).setIsNewThread(m).setNickname(g).renderParticipantList(e);g=n&&d.unread_count>0?i(g,d.unread_count):g;return b("bs_curry")._1(a[3],[g])}else return 0});return 0}else return 0},r=function(a){if(c!==void 0){a=c;a=a===0||a>=d.name.length?d.name:d.name.slice(0,a)+"..."}else a=d.name;a=b("React").jsx(b("MessengerTextWithEmoticons.react"),{renderEmoji:!0,renderEmoticons:!0,text:a});if(d.unread_count===0||!n)return a;else return i(a,d.unread_count)};return[h[0],h[1],h[2],h[3],function(a){a[1][2][0]=!0;return q(a)},function(a){a=a[1];if(a[1][0][0]!==d){a[1][0][0]=d;return q(a)}else return 0},function(a){a[1][2][0]=!1;return 0},h[7],function(c){__p&&__p();c=d.name!==""?r(0):c[1][1];var e=d.other_user_fbid;e=e==null?void 0:b("bs_caml_option").some(e);e=b("CurrentUser").isWorkUser()&&e!==void 0?b("React").createElement(b("WorkUserEmojiWithTooltipBootloader.react"),{userID:b("bs_belt_Option").getExn(e),withSpace:!0}):null;var f=b("bs_belt_Option").flatMap(b("bs_caml_option").nullable_to_opt(b("MercuryIDs").getParticipantIDFromFromThreadID(d.thread_id)),function(a){return b("bs_caml_option").nullable_to_opt(b("MessengerParticipants.bs").getNow(a))});f=f!==void 0&&b("bs_caml_obj").caml_equal(b("bs_caml_option").nullable_to_opt(b("bs_caml_option").valFromOption(f).verification_status),"BLUE_VERIFIED")?b("React").jsx(b("Badge.react"),{size:"medium",type:"verified"}):null;c={children:[c,e,f,l]};a!==void 0&&(c.className=b("bs_caml_option").valFromOption(a));return b("React").jsxs("span",c)},function(a){return[[d],"",[!1]]},h[10],function(a,c){return b("bs_block").__(0,[[c[0],a[0],c[2]]])},h[12]]}f.component=h;f.renderTitleWithUnreadCount=i;f.make=a}),null);
__d("ChatThreadName.bs",["cx","React","Link.react","MercuryIDs","bs_caml_option","ReasonReact.bs","MessengerHoverCardLink","MercuryThreadTitleReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.thread,d=a.threadHref,e=a.tooltip,f=a.viewer,g=a.className,h=a.isNewMessageTab;a=a.onHeaderClick;if(c!==void 0){c=b("bs_caml_option").valFromOption(c);var i=c.thread_id;e=b("React").jsx(b("Link.react"),{"aria-label":e,"data-hover":"tooltip","data-tooltip-content":e,className:g,href:d,onClick:a,children:b("ReasonReact.bs").element(void 0,void 0,b("MercuryThreadTitleReact.bs").make("_1ogo",void 0,c,f,h,void 0,!c.is_canonical,!0,[]))});if(c.is_canonical){g=b("MessengerHoverCardLink").constructEndpoint({id:b("MercuryIDs").getThreadFBIDFromThreadID(i)});return b("React").cloneElement(e,{"data-hovercard":g,"data-hover":""})}else return e}else return null}c=a;f.make=c}),null);
__d("ChatVideoCallButton.bs",["MercuryIDs","bs_caml_option","ReasonReact.bs","bs_js_null_undefined","ChatVideoCallButtonBootloader.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g,h,i,j,k){__p&&__p();a=a!==void 0?a:!0;e=e!==void 0?e:function(a){return 0};f=f!==void 0?f:!1;j=j!==void 0?j:!0;if(h!==void 0){var l=b("bs_caml_option").valFromOption(h);l=[b("bs_caml_option").some(l.thread_id),b("bs_caml_option").nullable_to_opt(l.rtc_call_data)]}else l=[void 0,void 0];var m=l[1];m=m!==void 0?b("bs_caml_option").valFromOption(m):{call_state:"NO_ONGOING_CALL",server_info_data:null,initiator_fbid:null};l=b("bs_js_null_undefined").fromOption(l[0]);var n=b("MercuryIDs").isGroupChat(l);return b("ReasonReact.bs").wrapJsForReason(b("ChatVideoCallButtonBootloader.react"),{isAudio:a,isPageChat:c,isBlocked:d,isGroupChat:n,iconStyle:g,onRTCNuxCloseButtonClick:e,rtcNuxShown:f,threadID:l,thread:b("bs_js_null_undefined").fromOption(h),viewer:i,shown:j,rtcCallData:m},k)}f.make=a}),null);
__d("FantaCloseActionButton.bs",["cx","fbt","bs_curry","React","M4Icon.bs","Link.react","M4IconClose.bs","TrackingNodes","TrackingNodeTypes"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){var c=a.iconStyle,d=a.onClose;a=a.isFocused;var e=b("TrackingNodes").getTrackingInfo(b("TrackingNodeTypes").CLOSE_BUTTON);c=b("M4Icon.bs").getColor(c);a=a?h._("Press Esc to close"):h._("Close tab");return b("React").createElement(b("Link.react"),{"aria-label":a,"data-ft":e,"data-hover":"tooltip","data-tooltip-content":a,"data-tooltip-position":"above",className:"_7jbw _4vu4 button",onClick:function(a){a.stopPropagation();return b("bs_curry")._1(d,a)},children:b("React").jsx("div",{children:b("React").jsx(b("M4IconClose.bs").make,{color:c}),className:"close"})})}c=a;f.make=c}),null);
__d("ChatMuteIconReact.bs",["cx","fbt","React","bs_js_dict","TooltipData","bs_js_null_undefined"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){a=a.isMuted;if(a){a=b("TooltipData").propsFor(h._("This conversation is muted. Chat tabs will not pop up for it and push notifications are off."),"above");return b("React").cloneElement(b("React").jsx("div",{children:b("React").jsx("i",{className:"_7hfn"}),className:"_3a61"}),{"data-tooltip-content":b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(a,"data-tooltip-content")),"data-hover":b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(a,"data-hover")),"data-tooltip-position":b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(a,"data-tooltip-position"))})}else return null}c=a;f.make=c}),null);
__d("FantaM4HeaderBottomDetail.bs",["cx","fbt","React","ChatMuteIconReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){__p&&__p();if(a.isNewMessageTab)return null;else{var c=h._("Active now"),d=a.isPage;if(d)d=null;else{var e=a.isActive;d=e?b("React").jsx("div",{children:c,"aria-label":c,role:"presentation"}):null}e=a.isMuted;if(e){c=d!==null&&a.isMuted;return b("React").jsxs("div",{children:[d,c?b("React").jsx("span",{children:"\u30fb","aria-hidden":!0}):null,b("React").createElement(b("ChatMuteIconReact.bs").make,{isMuted:a.isMuted})],className:"_69r-"})}else return d}}f.make=a}),null);
__d("FantaProfilePresence.bs",["cx","React","bs_caml_array","Link.react","MercuryIDs","bs_caml_option","Image.react","ReasonReact.bs","SplitImage.react","MessengerHoverCardLink","WorkChatAvailabilityStatusLoader","LazyWorkMultiCompanyChatTooltip.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("ReasonReact.bs").statelessComponent("FantaProfilePresence");function h(a){__p&&__p();var c=a.images,d=a.imageSize,e=a.isActive,f=a.border,g=a.threadHref,h=a.tooltip,i=a.backgroundColor;i=i!==void 0?i:"";var j=a.showMultiCompany;j=j!==void 0?j:!1;var k=a.showDoNotDisturb;k=k!==void 0?k:!1;var l=a.isCanonical,m=a.threadFBID,n=a.participants;a=a.onHeaderClick;var o=c.length>1;if(o){var p,q=Math.round(d/3)|0;q=d-q|0;p=(p=b("React")).jsxs("div",{children:[p.jsx("div",{children:p.jsx(b("Image.react"),{alt:"",src:b("bs_caml_array").caml_array_get(c,0),height:q,width:q}),className:"_1gyw"}),p.jsx("div",{children:p.jsx(b("Image.react"),{alt:"",src:b("bs_caml_array").caml_array_get(c,1),height:q,width:q}),className:"_1gyw",style:{borderColor:i}})],className:"_44yp",style:{height:d.toString()+"px",width:d.toString()+"px"}})}else{q={size:d,srcs:c,className:"_1gyw"};f!==void 0&&(q.border=b("bs_caml_option").valFromOption(f));p=b("React").jsx(b("SplitImage.react"),q)}c=b("React").jsx(b("Link.react"),{"aria-label":h,"data-hover":"tooltip","data-tooltip-content":h,"data-tooltip-position":"right",className:"_2yg8",href:g,onClick:a,tabIndex:-1,children:p});f=l&&m!==void 0;if(f){q=b("MessengerHoverCardLink").constructEndpoint({id:m});h=b("React").cloneElement(c,{"data-hovercard":q})}else h=c;g=function(a){if(n!==void 0&&m!==void 0){a=b("bs_caml_option").valFromOption(m);var c=b("MercuryIDs").getParticipantIDFromUserID(a);c=b("bs_caml_option").valFromOption(n).get(c);if(!(c==null)&&b("WorkChatAvailabilityStatusLoader").isLoaded())return b("WorkChatAvailabilityStatusLoader").getStoreEnforce().getDescriptionWithUserName(c.short_name,a);else return}};if(k){a=b("React").jsx("div",{className:"_466z _76q_",style:{backgroundColor:i,borderColor:i}});p=g(0);l=p!==void 0?b("React").cloneElement(a,{"data-tooltip-content":p,"data-hover":"tooltip"}):a}else l=j?b("React").jsx(b("LazyWorkMultiCompanyChatTooltip.react"),{children:b("React").jsx("div",{className:"_4rwy"})}):e?b("React").jsx("div",{className:"_1gyx",style:{borderColor:i}}):null;return b("React").jsxs("div",{children:[h,l],"aria-hidden":!0,className:"_6--1"+(o?" _44yq":""),style:{height:d.toString()+"px",width:d.toString()+"px"}})}function a(a){var c={images:a.images,imageSize:a.imageSize,isActive:a.isActive,threadHref:a.threadHref,tooltip:a.tooltip,showMultiCompany:a.showMultiCompany,isCanonical:a.isCanonical,threadFBID:b("bs_caml_option").nullable_to_opt(a.threadFBID),participants:b("bs_caml_option").nullable_to_opt(a.participants),onHeaderClick:a.onHeaderClick},d=b("bs_caml_option").nullable_to_opt(a.border);d!==void 0&&(c.border=b("bs_caml_option").valFromOption(d));d=b("bs_caml_option").nullable_to_opt(a.backgroundColor);d!==void 0&&(c.backgroundColor=b("bs_caml_option").valFromOption(d));return h(c)}d=h;f.component=c;f.make=d;f.jsComponent=a}),null);
__d("MessengerParticipantUtils.bs",["bs_belt_Set","bs_caml_obj","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){var e=b("MercuryIDs").getParticipantIDFromUserID(a);a=d.participants.filter(function(a){return b("bs_caml_obj").caml_notequal(a,e)});return a.filter(function(a){return b("bs_belt_Set").has(c,a)})}d=b("bs_belt_Set").has;function h(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function a(a,b,c){return h(a,b,c).length>0}function c(a,b,c){return g(a,b,c).length>0}f.findIntersection=g;f.has=d;f.participantsInGroupThread=h;f.areParticipantsInGroupThread=a;f.areParticipantsInThread=c}),null);
__d("OnlineUserIds.bs",["bs_belt_Set","ParticipantId.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("bs_belt_Set").make(b("ParticipantId.bs"))}function c(a){return b("bs_belt_Set").fromArray(a,b("ParticipantId.bs"))}f.make=a;f.fromArray=c}),null);
__d("FantaM4Header.bs",["cx","fbt","React","bs_belt_Set","bs_belt_Array","MercuryIDs","bs_belt_Option","bs_caml_option","ChatTabMenu.bs","ReasonReact.bs","ParticipantId.bs","ChatThreadName.bs","ChatDetailStack.bs","MercuryThreadInfo","ChatVideoCallButton.bs","MessageRequestUtils","FantaProfilePresence.bs","MessengerParticipants.bs","getPageIDFromThreadID","FantaCloseActionButton.bs","FantaM4HeaderBottomDetail.bs","MessengerCustomColorUtils.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","ChatGroupMembershipDialogBootloader","getGroupNameTooltipFromParticipantIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();c=b("ReasonReact.bs").statelessComponent("FantaM4Header");function i(a,c){__p&&__p();if(a!==void 0){a=b("bs_caml_option").valFromOption(a).valueSeq().filter(function(a){return!(a.image_src==null)}).map(function(a,d,e){d=b("bs_belt_Option").getExn(b("bs_caml_option").nullable_to_opt(a.image_src));return[d,a.fbId!==c]}).take(4).toArray();var d=a.length>3;d=d?a.filter(function(a){return a[1]}):a;return d.slice(0,3).map(function(a){return a[0]})}else return[]}function j(a,c,d){__p&&__p();if(a!==void 0){a=b("bs_caml_option").valFromOption(a);var e=a.image_src;if(e==null){a=b("MercuryIDs").getParticipantIDFromFromThreadID(a.thread_id);if(a==null)return i(c,d);else{c=b("MessengerParticipants.bs").getNow(a);if(c==null)return[];else{d=c.image_src;if(d==null)return[];else return[d]}}}else return[e]}else return[]}function k(a){__p&&__p();if(a!==void 0){a=b("bs_caml_option").valFromOption(a);if(a.is_canonical)return"";else{a=b("getGroupNameTooltipFromParticipantIDs").getGroupNameTooltipFromParticipantIDs(a.participants);if(a==null)return"";else return a}}else return""}function l(a){if(a!==void 0)return b("MessageRequestUtils").isMessageRequest(b("bs_caml_option").valFromOption(a));else return!1}function m(a){__p&&__p();var c=a.hasBlockedMessages,d=a.highlightNewMessage,e=a.isFocused,f=a.isMultiCompany,g=a.isDoNotDisturb,i=a.membershipParticipants,m=a.onClose,n=a.focusOnClick,o=a.onHeaderToggle,p=a.onRTCNuxCloseButtonClick,q=a.participants,r=a.rtcNuxShown,s=a.thread,t=a.threadHref;t=t!==void 0?t:"";var u=a.viewer,v=a.pageUnsubscribeStatus,w=a.pageIndicatorDescription,x=a.isNewMessageTab,y=a.showMessengerReportNux,z=a.uri,A=a.isMessengerOnlyUser,B=j(s,q,u),C=s!==void 0?b("bs_caml_option").nullable_to_opt(b("getPageIDFromThreadID")(b("bs_caml_option").valFromOption(s).thread_id)):void 0;if(s!==void 0){a=b("bs_caml_option").valFromOption(s);a=[a.thread_fbid,a.thread_id,a.is_canonical]}else a=[null,"",!0];var D=a[2],E=a[1],F=a[0],G=k(s);if(s!==void 0){a=b("bs_caml_option").valFromOption(s).header_color;a=a==null?b("MessengerCustomColorUtils.bs").defaultColor(0):a}else a=b("MessengerCustomColorUtils.bs").defaultColor(0);if(d)if(a!==void 0){var H=a;H=[0,H,[H]]}else H=[1,"",1];else if(a!==void 0&&e){a=a;H=[[a],"",[a]]}else H=[1,"",1];var I=H[1];a=H[0];var J="_69pt"+(d?" _2mgn":""),K=function(a){if(D)return 0;else{b("ChatGroupMembershipDialogBootloader").bootload(i,q,E);a.stopPropagation();return 0}},L=D?t:"",M=x?h._("New Message"):b("React").createElement(b("ChatThreadName.bs").make,{thread:s,threadHref:L,tooltip:G,viewer:u,className:"_2mgq",isNewMessageTab:x,onHeaderClick:K});H=C!==void 0;t=l(s);var N=t?b("React").createElement("div",{className:"_69ae"},b("React").createElement("div",{className:"_66n5"},b("React").createElement(b("FantaCloseActionButton.bs").make,{iconStyle:a,onClose:m,isFocused:e}))):s!==void 0?x?b("React").createElement("div",{className:"_69ae"},b("React").createElement("div",{className:"_66n5"},b("React").createElement(b("FantaCloseActionButton.bs").make,{iconStyle:a,onClose:m,isFocused:e}))):b("React").createElement("div",{className:"_69ae"},b("React").createElement("div",{className:"_66n5 _1iti"},b("ReasonReact.bs").element(void 0,void 0,b("ChatVideoCallButton.bs").make(!1,H,c,void 0,void 0,a,s,u,void 0,[]))),b("React").createElement("div",{className:"_66n5 _1iti"},b("ReasonReact.bs").element(void 0,void 0,b("ChatVideoCallButton.bs").make(!0,H,c,p,r,a,s,u,void 0,[]))),b("React").createElement("div",{className:"_66n5"},b("ReasonReact.bs").element(void 0,void 0,b("ChatTabMenu.bs").make(s,u,i,v,q,y,c,f,e,d,x,z,a,[]))),b("React").createElement("div",{className:"_66n5"},b("React").createElement(b("FantaCloseActionButton.bs").make,{iconStyle:a,onClose:m,isFocused:e}))):b("React").createElement("div",{className:"_69ae"},b("React").createElement("div",{className:"_66n5"},b("React").createElement(b("FantaCloseActionButton.bs").make,{iconStyle:a,onClose:m,isFocused:e})));t=b("bs_belt_Option").map(q,function(a){return b("bs_belt_Set").fromArray(b("bs_belt_Array").map(a.toArray(),function(a){return a[0]}),b("ParticipantId.bs"))});H={children:function(a){a=s!==void 0?!A&&b("MessengerParticipantUtils.bs").findIntersection(u,a,b("bs_caml_option").valFromOption(s)).length!==0:!1;var c=b("FantaM4HeaderBottomDetail.bs").make({isActive:a,isMuted:b("bs_belt_Option").mapWithDefault(s,!1,function(a){return b("MercuryThreadInfo").isMuted(a)}),isNewMessageTab:x,isPage:C!==void 0});return b("React").createElement("div",{className:J,style:{backgroundColor:I},onClick:o},b("React").createElement("div",{className:"_66n2",onClick:n},x?null:b("React").createElement(b("FantaProfilePresence.bs").make,{images:B,imageSize:28,isActive:w!==void 0?!0:a,border:!0,threadHref:L,tooltip:G,backgroundColor:I,showMultiCompany:f,showDoNotDisturb:g,isCanonical:D,threadFBID:F==null?void 0:b("bs_caml_option").some(F),participants:q,onHeaderClick:K}),b("React").createElement("div",{className:"_66n3"+(x?" _6dtv":"")},b("React").createElement(b("ChatDetailStack.bs").make,{topDetail:M,bottomDetail:c}),N)))}};t!==void 0&&(H.subscribeToIDs=b("bs_caml_option").valFromOption(t));return b("React").createElement(b("MessengerPresenceProvider.bs").make,H)}function a(a){var c;return m({hasBlockedMessages:a.hasBlockedMessages,highlightNewMessage:a.highlightNewMessage,isFocused:a.isFocused,isMultiCompany:a.isMultiCompany,isDoNotDisturb:a.isDoNotDisturb,membershipParticipants:(c=b("bs_caml_option")).nullable_to_opt(a.membershipParticipants),onClose:a.onClose,focusOnClick:a.focusOnClick,onHeaderToggle:a.onHeaderToggle,onRTCNuxCloseButtonClick:a.onRTCNuxCloseButtonClick,participants:c.nullable_to_opt(a.participants),rtcNuxShown:a.rtcNuxShown,thread:c.nullable_to_opt(a.thread),threadHref:a.threadHref,viewer:a.viewer,pageUnsubscribeStatus:a.pageUnsubscribeStatus,pageIndicatorDescription:c.nullable_to_opt(a.pageIndicatorDescription),isNewMessageTab:a.isNewMessageTab,showMessengerReportNux:a.showMessengerReportNux,uri:a.uri,isMessengerOnlyUser:a.isMessengerOnlyUser})}d=28;e=m;f.component=c;f.profile_image_size=d;f.getUpTo3Images=i;f.getProfileImages=j;f.getTooltip=k;f.isThreadMessageRequest=l;f.make=e;f.jsComponent=a}),null);
__d("MessengerTypingUtils.bs",["bs_belt_Map","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!==void 0)return b("bs_belt_Map").keysToArray(b("bs_caml_option").valFromOption(a));else return[]}f.getTypingUserIDs=a}),null);
__d("ChatTypingIndicatorsWrapper.bs",["React","ReasonReact.bs","bs_belt_MapString","MessengerState.bs","ChatTypingIndicators.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=b("ReasonReact.bs").statelessComponent("ChatTypingIndicatorsWrapper");function a(a){var c=a.indicatorClass,d=a.indicatorsDidHide,e=a.indicatorsDidShow,f=a.viewer,g=a.rootClassName,h=a.threadID;return b("React").jsx(b("MessengerState.bs").Provider.make,{fbid:f,children:function(a){return b("React").jsx(b("ChatTypingIndicators.react"),{indicatorClass:c,indicatorsDidShow:e,indicatorsDidHide:d,rootClassName:g,threadID:h,viewer:f,typingUserIDs:b("bs_belt_MapString").get(a[6],h)},h)}})}d=a;e=a;f.component=c;f.make=d;f.jsComponent=e}),null);
__d("MessengerFormattingUtils",["cx","CurrentUser","JSResource","MessengerFormattingConfig","Newline.react","React","UnicodeUtils","lazyLoadComponent","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("lazyLoadComponent")(b("JSResource")("MessengerCodeBlock.react").__setRef("MessengerFormattingUtils"));function a(a){return{offset:a[1].length,length:(h||(h=b("UnicodeUtils"))).strlen(a[2])+2,innerOffset:1,innerText:a[2]}}function c(a){return{offset:a[1].length,length:(h||(h=b("UnicodeUtils"))).strlen(a[2])+2,innerOffset:1,innerText:a[2].replace(/\s\s+/g," ").trim()}}function d(a){return{offset:0,length:(h||(h=b("UnicodeUtils"))).strlen(a[0]),innerOffset:h.strlen(a[1]),innerText:a[2]}}g=b("MessengerFormattingConfig");var j={pattern:new RegExp(g.boldConfig.pattern,"g"),nonCapturingPattern:new RegExp(g.boldConfig.nonCapturingPattern),formatter:function(a){a=a.children;return b("React").jsx("b",{children:a})},getRangeInMatch:a,recursivelyFormat:!0},k={pattern:new RegExp(g.italicConfig.pattern,"g"),nonCapturingPattern:new RegExp(g.italicConfig.nonCapturingPattern),formatter:function(a){a=a.children;return b("React").jsx("i",{children:a})},getRangeInMatch:a,recursivelyFormat:!0};a={pattern:new RegExp(g.strikethroughConfig.pattern,"g"),nonCapturingPattern:new RegExp(g.strikethroughConfig.nonCapturingPattern),formatter:function(a){a=a.children;return b("React").jsx("s",{children:a})},getRangeInMatch:a,recursivelyFormat:!0};c={pattern:new RegExp(g.codeConfig.pattern,"g"),nonCapturingPattern:new RegExp(g.codeConfig.nonCapturingPattern),formatter:function(a){a=a.children;return b("React").jsx("code",{className:b("CurrentUser").isWorkUser()?"_7ilw":"",children:a})},getRangeInMatch:c,recursivelyFormat:!1};var l=function(a){var c,d=a.children;a=a.range;return(c=b("React")).jsxs(c.Fragment,{children:[c.jsx(c.Suspense,{fallback:c.jsx("div",{className:"_7mv7",children:d}),children:c.jsx(i,{range:a,children:d})}),c.jsx(b("Newline.react"),{})]})},m={pattern:new RegExp(g.codeBlockConfig.pattern,"g"),nonCapturingPattern:new RegExp(g.codeBlockConfig.nonCapturingPattern),formatter:function(a){a=a.children;return b("React").jsx("code",{children:a})},getRangeInMatch:d,recursivelyFormat:!1};l={pattern:new RegExp(g.codeBlockV2Config.pattern,"g"),nonCapturingPattern:new RegExp(g.codeBlockV2Config.nonCapturingPattern),formatter:l,getRangeInMatch:function(a){var c=a[3]||"",d=a[4]!==void 0?a[4]:a[5],e=a[1]||"",f=a[2]||"";return{offset:0,length:(h||(h=b("UnicodeUtils"))).strlen(a[0]),innerOffset:h.strlen(e)+h.strlen(f),innerText:d,codeBlockLanguage:c}},recursivelyFormat:!1};var n=function(a){a=a.children;return b("React").jsxs(b("React").Fragment,{children:[b("React").jsxs("blockquote",{className:"_pye"+(b("CurrentUser").isWorkUser()?" _7ilx":""),children:[b("React").jsx("div",{className:"_pyf"}),a]}),b("React").jsx(b("Newline.react"),{})]})};d={pattern:new RegExp(g.blockQuoteConfig.pattern,"gm"),nonCapturingPattern:new RegExp(g.blockQuoteConfig.nonCapturingPattern,"m"),formatter:n,getRangeInMatch:d,recursivelyFormat:!0};n={pattern:new RegExp(g.multipleInlineBlockQuoteConfig.pattern,"gm"),nonCapturingPattern:new RegExp(g.multipleInlineBlockQuoteConfig.nonCapturingPattern,"m"),formatter:n,getRangeInMatch:function(a){var c=a[0],d=(h||(h=b("UnicodeUtils"))).strlen(c);a=h.strlen(a[2]);return{offset:0,length:d,innerOffset:a,innerText:h.substring(c,a,d)}},recursivelyFormat:!0,getAdditionalInnerRanges:function(a){return q(a.innerText,[o]).map(function(b){return babelHelpers["extends"]({},b,{offset:b.offset+a.innerOffset,innerOffset:b.innerOffset+a.innerOffset})})}};var o={pattern:new RegExp(g.singleInlineBlockQuoteConfig.pattern,"gm"),nonCapturingPattern:new RegExp(g.singleInlineBlockQuoteConfig.nonCapturingPattern,"m"),formatter:function(a){a=a.children;return a},getRangeInMatch:function(a){return{offset:0,length:(h||(h=b("UnicodeUtils"))).strlen(a[0]),innerOffset:h.strlen(a[1]),innerText:a[2]}},recursivelyFormat:!0},p=[d,j,k,a,c,n];p.push(b("CurrentUser").isWorkUser()?l:m);function f(a,b){b===void 0&&(b=p);for(var c=0;c<b.length;c++){var d=b[c].nonCapturingPattern;if(d.test(a))return!0}return!1}function q(a,c){__p&&__p();c===void 0&&(c=p);var d=[];for(var e=0;e<c.length;e++){var f=c[e];f.pattern.lastIndex=0;var g=void 0;while((g=f.pattern.exec(a))!=null){g=b("nullthrows")(g);var i=f.getRangeInMatch(g),j=a.substr(0,g.index+i.offset);j=(h||(h=b("UnicodeUtils"))).strlen(j);j={offset:j,length:i.length,innerText:i.innerText,innerOffset:j+i.innerOffset,formatter:f.formatter,recursivelyFormat:f.recursivelyFormat,codeBlockLanguage:i.codeBlockLanguage};i=f.getAdditionalInnerRanges?f.getAdditionalInnerRanges(j):[];d.push(j);d=d.concat(i)}}return d}e.exports={defaultFormatConfigs:p,hasMatch:f,getRanges:q,formatConfigs:{bold:j,italic:k,strikethrough:a,blockcode:m,codeblockV2:l,code:c,blockquote:d,multipleInlineBlockquote:n,singleInlineBlockquote:o}}}),null);
__d("MessengerMathUtils",["UnicodeUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=2,i=/^(?:\$\$|\\\[)[\s\S]*?\S[\s\S]*?(?:\$\$|\\\])$/,j=/\\\([\s\S]*?\S[\s\S]*?\\\)/g;function a(a){return i.test(a)}function c(a){return a.substring(h,a.length-h)}function d(a){j.lastIndex=0;return j.test(a)}function f(a,c){__p&&__p();c===void 0;c=[];j.lastIndex=0;var d;while((d=j.exec(a))!==null){d=b("nullthrows")(d);var e=a.substring(0,d.index);e=(g||(g=b("UnicodeUtils"))).strlen(e);c.push({offset:e,length:g.strlen(d[0]),math:!0})}return c}function k(a){var b=a.length,c=0,d=0;for(var e=0;e<b;e++)a[e]==="\\"?a.slice(e,e+6)==="\\begin"?(c+=2,d=Math.max(d,c)):a.slice(e,e+4)==="\\end"?c-=2:e++:a[e]==="{"?(c++,d=Math.max(d,c)):a[e]==="}"&&c--;return d}e.exports={MATH_DELIMITER_LENGTH:h,isMathBlock:a,hasInlineMath:d,getInlineMathRanges:f,getMathBlockInner:c,getMaxBraceDepth:k}}),null);
__d("MessengerDecoratorUtil",["invariant","MercuryAttachment","MercuryAttachmentLayoutTypeHelper","MercuryConfig","QE2Logger","StoryAttachmentStyle","gkx","isMessengerMessageRemoved"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=function(a){return a===Object(a)};function i(a){a=a.attachments&&a.attachments.length===1&&a.attachments[0]&&a.attachments[0].attach_type!=="sticker"&&!p.isP2PAttachment(a);return!!a}function a(a){return i(a)&&b("MercuryAttachment").isLightweightActionAttachment(a.attachments[0])}function c(a){var b;if((a==null?void 0:(b=a.attachments)==null?void 0:b.length)>0&&((b=a.attachments[0].share)==null?void 0:b.style_list)!=null){return((b=a.attachments[0].share)==null?void 0:b.style_list[0])==="wec_message"}else return!1}function d(a){return b("gkx")("843916")&&!n(a)}function f(a){__p&&__p();if(k(a)||l(a)||b("isMessengerMessageRemoved")(a)||m(a))return!1;var c=j(a);a||g(0,1760);if(!c)return!1;if(b("MercuryAttachment").isPhotoGroupAttachment(c))return!0;if(p.isNewForwardEntrypoint(c))return!0;return b("MercuryAttachment").isFileAttachment(c)&&c.message_file_fbid?!0:!1}function j(a){var b=a.attachments&&a.attachments.length===1;return b?a.attachments[0]:null}function k(a){return((a=a)!=null?(a=a.attachments)!=null?(a=a[0])!=null?(a=a.share)!=null?(a=a.style_list)!=null?a[0]:a:a:a:a:a)==="montage_direct"}function l(a){return b("gkx")("1019832")&&((a=a)!=null?(a=a.attachments)!=null?(a=a[0])!=null?(a=a.share)!=null?(a=a.style_list)!=null?a[0]:a:a:a:a:a)==="montage_share"}function m(a){return a&&a.attachments&&a.attachments.length>0&&b("MercuryAttachmentLayoutTypeHelper").isAdminType(a.attachments[0])}function n(a){var b;a=j(a);if(!a)return!1;if(((b=a.share)==null?void 0:b.style_list)!=null){return((b=a.share)==null?void 0:b.style_list[0])==="rtc_call_log"}else return!1}function o(a){var c=[],d=[];a.attachments.forEach(function(a){a.metadata&&a.metadata.fbid?(c.push(a.metadata.fbid.toString()),d.push(a.attach_type.toString())):a.share&&a.share.share_id&&(c.push(a.share.share_id),d.push(a.attach_type)),b("MercuryAttachment").isFileAttachment(a)&&a.message_file_fbid&&(c.push(a.message_file_fbid),d.push(a.attach_type))});return{ids:c,types:d}}var p={isEventAttachment:function(a){return this._isStoryBased(a)&&a.share.style_list.indexOf("event_reminder")>-1},isLocationAttachment:function(a){return this._isStoryBased(a)&&(a.share.style_list.indexOf("message_location")>-1||a.share.style_list.indexOf("message_live_location")>-1||a.share.style_list.indexOf("message_multiple_locations")>-1)},isBusinessMessageAttachment:function(a){var b;b=(b=a.share)==null?void 0:b.style_list;return a.attach_type==="share"&&b instanceof Array&&b.indexOf("business_message_items")>-1},isP2PAttachment:function(a){var c=this;a=b("MercuryAttachment").get(a).filter(function(a){return h(a)&&c.isP2P(a)});return!!a.length},isP2P:function(a){return!!(this._isStoryBased(a)&&(a.share.style_list.indexOf("orion")>-1||a.share.style_list.indexOf("orion_request")>-1))},isNewForwardEntrypoint:function(a){var c;c=((c=a)!=null?(c=c.share)!=null?(c=c.style_list)!=null?c[0]:c:c:c)==="montage_direct";c=b("MercuryAttachment").isShareAttachment(a)&&a.share!=null&&a.share.share_id&&!p.isP2P(a)&&!p.isEventAttachment(a)&&!p.isLocationAttachment(a)&&!p.isBusinessMessageAttachment(a)&&!c&&(!a.share.target||!a.share.target.lwa_type);if(!c)return!1;b("QE2Logger").logExposureForUser("messenger_growth_www_share_flow");return b("MercuryConfig").MNFWD},_isStoryBased:function(a){return!!(a.attach_type==="share"&&a.share&&a.share.style_list)},isAttachment:i,hasLWA:a,isWECMessage:c,allowForward:f,maybeGetMessageAttachment:j,isMontageDirect:k,isMontageShare:l,isAdminLayoutType:m,isRTCShareMessage:n,getAttachments:o,allowSave:d};e.exports=p}),null);
__d("MessengerReactionStaticEmoji.react",["requireCond","MessengerTextWithEmoticons.react","React","cr:1117307","gkx"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.reaction,d=a.isDefaultReaction;a=a.uri;return b("gkx")("895574")&&b("cr:1117307")!=null?b("React").jsx(b("cr:1117307"),{reaction:c}):a!=null?b("MessengerTextWithEmoticons.react").renderEmoji(!1,c,c,!0,a):b("React").jsx(b("MessengerTextWithEmoticons.react"),{customSize:!0,forceMessengerEmoji:d,renderEmoticons:!0,renderEmoji:!0,text:c})}e.exports=a}),null);
__d("MessengerReactIconSVGM4React.bs",["React","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d;c=String(b("bs_belt_Option").getWithDefault(c,22))+"px";return(d=b("React")).jsx("svg",{children:d.jsxs("g",{children:[d.jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),d.jsx("path",{d:"M14.4951,17.5 C13.5576,17.5 12.9951,16.75 12.9951,15.5 C12.9951,14.25 13.5576,13.5 14.4951,13.5 C15.4326,13.5 15.9951,14.25 15.9951,15.5 C15.9951,16.75 15.4326,17.5 14.4951,17.5 M21.4951,17.5 C20.5576,17.5 19.9951,16.75 19.9951,15.5 C19.9951,14.25 20.5576,13.5 21.4951,13.5 C22.4326,13.5 22.9951,14.25 22.9951,15.5 C22.9951,16.75 22.4326,17.5 21.4951,17.5 M18.0071,25.0055 C15.7176,25.0055 13.5461,23.9185 12.1981,22.0985 C11.8691,21.6545 11.9626,21.028 12.4061,20.6985 C12.8491,20.369 13.4756,20.4625 13.8041,20.9065 C14.7766,22.2195 16.3481,23.004 18.0071,23.004 C19.6666,23.004 21.2376,22.2195 22.2101,20.9065 C22.5386,20.4625 23.1656,20.3695 23.6086,20.698 C24.0516,21.0275 24.1451,21.6545 23.8166,22.0985 C22.4686,23.9185 20.2971,25.0055 18.0071,25.0055 M18.0001,8 C12.4771,8 8.0001,12.477 8.0001,18 C8.0001,23.523 12.4771,28 18.0001,28 C23.5231,28 28.0001,23.523 28.0001,18 C28.0001,12.477 23.5231,8 18.0001,8 M18.0001,30 C11.3726,30 6.0001,24.6275 6.0001,18 C6.0001,11.3725 11.3726,6 18.0001,6 C24.6276,6 30.0001,11.3725 30.0001,18 C30.0001,24.6275 24.6276,30 18.0001,30",fill:a})],fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:c,width:c,viewBox:"0 0 36 36"})}function c(a){var c;return(c=b("React")).jsx("svg",{children:c.jsxs("g",{children:[c.jsx("polygon",{points:"0,26 26,26 26,0 0,0 "}),c.jsx("path",{d:"m19.1311,16.73095c-0.4325,-0.3545 -1.0775,-0.302 -1.441,0.122c-1.171,1.3615 -2.883,2.142 -4.697,2.142c-1.8135,0 -3.526,-0.7805 -4.697,-2.142c-0.363,-0.4225 -1.008,-0.4765 -1.441,-0.122c-0.432,0.355 -0.488,0.986 -0.1245,1.408c1.5605,1.8145 3.8435,2.855 6.2625,2.855c2.4195,0 4.702,-1.0405 6.2625,-2.855c0.3635,-0.422 0.3075,-1.053 -0.1245,-1.408m-2.1355,-7.731c-0.9375,0 -1.5,0.75 -1.5,2c0,1.25 0.5625,2 1.5,2c0.9375,0 1.5,-0.75 1.5,-2c0,-1.25 -0.5625,-2 -1.5,-2m-8,0c-0.9375,0 -1.5,0.75 -1.5,2c0,1.25 0.5625,2 1.5,2c0.9375,0 1.5,-0.75 1.5,-2c0,-1.25 -0.5625,-2 -1.5,-2m4.0045,16c-6.6275,0 -12,-5.3725 -12,-12c0,-6.6275 5.3725,-12 12,-12c6.6275,0 12,5.3725 12,12c0,6.6275 -5.3725,12 -12,12",fill:a})],fill:"none",fillRule:"evenodd"}),height:"24px",width:"24px",viewBox:"0 0 26 26"})}f.make=a;f.makeSolid=c}),null);
__d("MessengerReactIconSVGM4React.re",["bs_curry","MessengerReactIconSVGM4React.bs"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._2(b("MessengerReactIconSVGM4React.bs").make,a,c==null?void 0:c);return a};f.make=a;c=function(a){a=b("MessengerReactIconSVGM4React.bs").makeSolid(a.fill);return a};f.makeSolid=c}),null);
__d("EmojiFormat.re",["EmojiFormat.bs"],(function(a,b,c,d,e,f){c=(a=b("EmojiFormat.bs")).codeStringToCodeArray;f.codeStringToCodeArray=c;d=a.codeArrayToCodeString;f.codeArrayToCodeString=d;e=a.codeArrayToUnicode;f.codeArrayToUnicode=e;b=a.codeStringToUnicode;f.codeStringToUnicode=b}),null);
__d("MessengerReactionsContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerHideOnScrollOut","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function(a,b,c,d,e,f,g){"use strict";a=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({addedBehaviors:[b("ContextualLayerAutoFlipHorizontal"),b("ContextualLayerHideOnScrollOut"),b("ContextualLayerUpdateOnScroll"),b("LayerHideOnEscape"),b("AccessibleLayer")],displayName:"MessengerReactionsContextualDialog",shouldSetARIAProperties:!1,theme:{wrapperClassName:"_4owc"}}));e.exports=a}),null);
__d("MessengerReactionsUtil.bs",["bs_js_dict","EmojiFormat.bs","MessengerReactionNames","WorkChatRedesignedMessageListCheck.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=b("WorkChatRedesignedMessageListCheck.bs").enabled?[[b("MessengerReactionNames").THUMBSUP,[128077]],[b("MessengerReactionNames").LOVE,[128525]],[b("MessengerReactionNames").HAHA,[128518]],[b("MessengerReactionNames").WOW,[128558]],[b("MessengerReactionNames").SAD,[128546]],[b("MessengerReactionNames").ANGRY,[128544]]]:[[b("MessengerReactionNames").LOVE,[128525]],[b("MessengerReactionNames").HAHA,[128518]],[b("MessengerReactionNames").WOW,[128558]],[b("MessengerReactionNames").SAD,[128546]],[b("MessengerReactionNames").ANGRY,[128544]],[b("MessengerReactionNames").THUMBSUP,[128077]],[b("MessengerReactionNames").THUMBSDOWN,[128078]]];var g={};c.forEach(function(a,c){g[b("EmojiFormat.bs").codeArrayToUnicode(a[1])]=c+1|0;return 0});function a(a,c){a=b("bs_js_dict").get(g,a);c=b("bs_js_dict").get(g,c);if(a!==void 0)if(c!==void 0)return a-c|0;else return-1;else if(c!==void 0)return 1;else return 0}d=c.map(function(a){return b("EmojiFormat.bs").codeArrayToUnicode(a[1])});f.reactionsSortOrder=c;f.orderMap=g;f.sortFunction=a;f.defaultReactions=d}),null);
__d("MessengerReactionsUtil.re",["bs_curry","MessengerReactionsUtil.bs"],(function(a,b,c,d,e,f){a=b("MessengerReactionsUtil.bs").reactionsSortOrder.map(function(a){return{name:a[0],emojis:a[1]}});f.reactionsSortOrder=a;c=function(a,c){a=b("bs_curry")._2(b("MessengerReactionsUtil.bs").sortFunction,a,c);return a};f.sortFunction=c;d=b("MessengerReactionsUtil.bs").defaultReactions;f.defaultReactions=d}),null);
__d("MessengerViewer",["CurrentUser","React"],(function(a,b,c,d,e,f){"use strict";e.exports=b("React").createContext(b("CurrentUser").getID())}),null);
__d("MessengerReactionsMenu.react",["cx","fbt","Promise","Bootloader","CSS","DOMContainer.react","EmojiFormat.re","Keys","MercuryIDs","MercuryThreadActions","MessageReactionMutationWebGraphQLMutation","MessengerMessageActionsTypedLogger","MessengerReactionsContextualDialog.react","MessengerReactionsFlyoutButtonBootloader.react","MessengerReactionStaticEmoji.react","MessengerReactionsUtil.re","MessengerReactionsWebConfig","MessengerState.re","MessengerSupportedEmojiUtils","MessengerViewer","React","XAsyncRequest","createCancelableFunction","emptyFunction","getThreadTypeNameFromThreadType","gkx","objectValues","promiseDone","qex","WorkChatRedesignedMessageListCheck.re"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryThreadActions").get(),j=b("WorkChatRedesignedMessageListCheck.re").enabled;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={animations:{},reactions:b("MessengerReactionsUtil.re").defaultReactions.slice().map(function(a){return{name:a}})},d.$5=function(a){a||d.props.onHide()},d.$9=function(a){d.$6(b("EmojiFormat.re").codeArrayToUnicode(a))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;b("gkx")("678614")&&(this.$1=b("createCancelableFunction")(function(b){return a.setState({animations:b})}),b("promiseDone")(this.loadAnimations(),this.$1));this.$2()};d.UNSAFE_componentWillReceiveProps=function(){this.$2()};d.componentWillUnmount=function(){b("objectValues")(this.state.animations).forEach(function(a){a.renderer&&typeof a.renderer.pause==="function"&&a.renderer.pause()}),this.$1&&this.$1.cancel()};d.$2=function(){__p&&__p();var a=b("MessengerState.re").getThreadMetaNow(this.context,this.props.message.thread_id);a=a==null?void 0:a.reactions;if(a&&b("gkx")("1229783")){this.setState({reactions:a.map(function(a){return{name:a.reactionEmoji,uri:a.staticAssetUri}})});return}a=b("MessengerReactionsUtil.re").defaultReactions.slice();var c=this.props.message.reactions;c=c&&c[this.context];b("qex")._("705431")&&c!=null&&c!=""&&!a.includes(c)&&a.push(c);this.setState({reactions:a.map(function(a){return{name:a}})})};d.$3=function(){return new(b("Promise"))(function(a){return b("Bootloader").loadModules(["Keyframes"],function(b){return a(b)},"MessengerReactionsMenu.react")})};d.$4=function(){__p&&__p();var a=b("MessengerState.re").getThreadMetaNow(this.context,this.props.message.thread_id);return this.$3().then(function(c){var d=a==null?void 0:a.reactions,e=(a==null?void 0:a.theme_id)||"";return d&&b("gkx")("1229783")?b("Promise").all(d.map(function(a){return c.requestRenderer(a.keyframeAssetUri,{projectName:"messaging_reactions",assetName:e+a.reactionEmoji})})):b("Promise").all(b("MessengerReactionsUtil.re").reactionsSortOrder.map(function(a){return c.requestRenderer(b("MessengerReactionsWebConfig").paths[a.name],{projectName:"messaging_reactions",assetName:a.name})}))}).then(function(c){__p&&__p();return c.map(function(a){a=a.setWidth(j?38:45).setHeight(j?38:45).repeatForever().play().redrawIfNeeded();var c=a.getElement();b("CSS").addClass(c,"_37pj");j&&b("CSS").addClass(c,"_8i1p");return{element:c,renderer:a}}).reduce(function(c,d,e){var f=a==null?void 0:a.reactions,g=(a==null?void 0:a.theme_id)||"";if(f&&b("gkx")("1229783")){c[g+f[e].reactionEmoji]=d;return c}c[b("MessengerReactionsUtil.re").defaultReactions[e]]=d;return c},{})})};d.loadAnimations=function(){var a=Date.now(),c=this.$4();b("promiseDone")(c,function(c){b("Bootloader").loadModules(["MessengerRestReactionTypedLogger"],function(b){new b().setLoadedTime(Date.now()-a).log()},"MessengerReactionsMenu.react")});return c};d.render=function(){var a=this,c=this.context,d=this.props.message.reactions&&this.props.message.reactions[c];c=b("MessengerState.re").getThreadMetaNow(this.context,this.props.message.thread_id);var e=b("gkx")("1229783")&&(c==null?void 0:c.theme_id)||"";return b("React").jsx(b("MessengerReactionsContextualDialog.react"),{alignment:"center",contextRef:this.props.refProp,"data-testid":"messenger_reactions_dialog",shown:!0,onBlur:this.props.onHide,onToggle:this.$5,children:b("React").jsxs("div",{role:"listbox","aria-orientation":"horizontal",className:"_1z8q _fy2",children:[this.state.reactions.map(function(c){var f=c.name,g=e+f,h=b("MessengerReactionsUtil.re").defaultReactions.slice().includes(f);return b("React").jsx("span",{className:"_1z8r"+(f===d?" _5-2b":""),"aria-label":f,id:f,onClick:function(){return a.$6(f)},onKeyPress:function(c){c=c.charCode;c===b("Keys").RETURN&&a.$6(f)},role:"option","aria-selected":f===d,tabIndex:"0",children:a.state.animations[g]?b("React").jsx(b("DOMContainer.react"),{children:a.state.animations[g].element}):b("React").jsx(b("MessengerReactionStaticEmoji.react"),{reaction:f,isDefaultReaction:h,uri:c.uri})},f)}),this.$7()]})})};d.$8=function(a){return!b("MessengerReactionsUtil.re").defaultReactions.includes(a)?b("MessengerSupportedEmojiUtils").getSupportedEmojiKey(a):a};d.$7=function(){var a=this.props.message,c={onSelect:this.$9,getInput:b("emptyFunction")};a=a.thread_id;var d=this.state.reactions.length!==b("MessengerReactionsUtil.re").defaultReactions.length;return b("qex")._("705431")&&!d?b("React").jsx(b("MessengerReactionsFlyoutButtonBootloader.react"),{contextRef:this.props.refProp,dialogProps:{offsetX:140,offsetY:53},flyoutAlignment:"right",flyoutProps:c,iconClassName:"_70b-",interactionClassName:"_1z8r",threadID:a,title:h._("Choose an emoji")},"emojireact"):null};d.$10=function(){i.markRead(this.props.message.thread_id),i.markSeen(this.props.message.thread_id)};d.$6=function(a){__p&&__p();var c=this,d=this.props,e=d.message,f=d.entryPoint,g=this.context,h=e.reactions&&e.reactions[g],i=b("MessengerState.re").getServerMessageID(g,e.message_id);d=b("MessageReactionMutationWebGraphQLMutation").getURI({action:a===h?"REMOVE_REACTION":"ADD_REACTION",message_id:i,actor_id:g,reaction:a});var j=function(d){var j=e.other_user_fbid||e.thread_fbid,k=b("MessengerState.re").getThreadMetaNow(g,e.thread_id),l=k&&k.participants?k.participants.length:0;k=b("getThreadTypeNameFromThreadType")(k&&k.thread_type);var m=e.attachments[0];l=new(b("MessengerMessageActionsTypedLogger"))().setAction("reaction").setOfflineThreadid(e.offline_threading_id).setMid(i).setRecipientID(b("MercuryIDs").getUserIDFromParticipantID(e.author)).setEntryPoint(f).setReaction(c.$8(a)).setPreviousReaction(c.$8(h)).setGroupSize(l).setThreadType(k).setThreadid(j);d.errorSummary!=null&&(l=l.setErrorText(d.errorSummary.toString()));m!=null&&(l=l.setMessageType(m.attach_type));l.log();c.$10()};new(b("XAsyncRequest"))(d).setMethod("POST").setHandler(j).send();this.props.onHide()};return c}(b("React").Component);a.contextType=b("MessengerViewer");e.exports=a}),null);
__d("MessengerReactionsPrompt.react",["cssVar","cx","fbt","ix","CurrentUser","Image.react","MessengerDotComAndInboxM4Check.re","MessengerReactIconSVGM4React.re","MessengerReactionsMenu.react","React","WorkChatRedesignedMessageListCheck.re","asset","tooltipPropsFor"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hover:!1,open:!1},c.$2=function(a){a.stopPropagation(),c.setState({open:!0},function(){return c.props.onShowMenu&&c.props.onShowMenu(c.state.open)}),c.props.setReactionsPromptShown&&c.props.setReactionsPromptShown(!0)},c.$3=function(){c.setState({open:!1},function(){return c.props.onShowMenu&&c.props.onShowMenu(c.state.open)}),c.props.setReactionsPromptShown&&c.props.setReactionsPromptShown(!1)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){__p&&__p();var a=this;if(this.props.isActive!==!0&&!this.state.open)return null;var c=null;if(this.props.isEdit===!0&&b("WorkChatRedesignedMessageListCheck.re").enabled){var d=this.state.hover||this.state.open?j("559624"):j("559623");c=b("React").jsx(b("Image.react"),{src:d})}else if(b("WorkChatRedesignedMessageListCheck.re").enabled){d=this.state.hover||this.state.open?j("895450"):j("895449");c=b("React").jsx(b("Image.react"),{src:d})}else if(this.props.isQuickAdd){d=j("278123");c=b("React").jsx(b("Image.react"),{src:d})}else if(b("CurrentUser").isWorkUser()){d=this.state.open?j("559649"):j("559648");c=b("React").jsx(b("Image.react"),{src:d})}else if(b("MessengerDotComAndInboxM4Check.re").yes)c=b("MessengerReactIconSVGM4React.re").make(this.state.hover?"black":"rgba(0, 0, 0, 0.34)");else{d=this.state.open?j("559646"):j("559647");c=b("React").jsx(b("Image.react"),{src:d})}d=i._("React");var e=b("tooltipPropsFor")(d,"above",b("WorkChatRedesignedMessageListCheck.re").enabled?"right":"center");return b("React").jsxs("button",babelHelpers["extends"]({},e,{className:"_8sop"+(this.props.isQuickAdd?"":" _5zvq")+(b("MessengerDotComAndInboxM4Check.re").yes&&!this.props.isQuickAdd?" _7i2o":"")+(this.props.isQuickAdd?" _yav":""),onClick:this.state.open?this.$1:this.$2,onMouseEnter:function(b){return a.setState({hover:!0})},onMouseLeave:function(b){return a.setState({hover:!1})},tabIndex:"0","aria-label":d,"data-testid":"react_to_message_button",ref:"button",children:[c,this.renderMenu()]}))};d.renderMenu=function(){var a=this;return!this.state.open?null:b("React").jsx(b("MessengerReactionsMenu.react"),{entryPoint:"awareness_plus",message:this.props.message,onHide:this.$3,refProp:function(){return a.refs.button}})};d.$1=function(a){a.stopPropagation()};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerReactions.react",["cx","fbt","Bootloader","CurrentUser","MercuryConfig","MercuryIDs","MessengerEnvironment","MessengerParticipants.bs","MessengerReactionsPrompt.react","MessengerReactionStaticEmoji.react","MessengerReactionsUtil.bs","MessengerState.re","MessengerWebViewReactionsTypedLogger","React","ShimButton.react","TooltipData","WorkChatRedesignedMessageListCheck.re","gkx","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i="ALL",j=b("CurrentUser").getID(),k=3,l=9;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={reactionsPromptShown:!1},d.$1=function(a){d.setState({reactionsPromptShown:a})},d.$3=function(){var a=b("MessengerEnvironment").messengerui,c=d.props,e=c.isFromViewer,f=c.message,g=c.participants;c=f.reactions;new(b("MessengerWebViewReactionsTypedLogger"))().setEvent("open_details").setMid(f.message_id).setSenderID(f.author).setEmojiGroup(i).setEmojiGroupCount(Object.values(c).length).log();a?b("Bootloader").loadModules(["MessengerDialogs.bs","MessengerReactionsDialogReact.bs"],function(a,c){var d=c.jsComponent;a.showDialog(function(){return b("React").jsx(d,{isFromViewer:e,participants:g,message:f})})},"MessengerReactions.react"):b("Bootloader").loadModules(["ChatReactionsDialog"],function(a){a.show(f,g,e)},"MessengerReactions.react")},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.message,d=a.participants,e=a.hovered;a=a.renderQuickAdd;var f=c.reactions,g=c.attachments,h=g&&g.length===1&&b("MercuryConfig").MNFWD&&f&&Object.keys(f).length===0;if(h&&g[0].attach_type==="sticker")return null;if(!this.state.reactionsPromptShown&&!e&&h&&g[0].attach_type==="share")return null;if(g[0]&&g[0].attach_type==="share"&&!g[0].share)return null;if(((e=g[0])!=null?(e=e.share)!=null?(e=e.style_list)!=null?e[0]:e:e:e)==="montage_direct")return null;if((!f||!d)&&!a)return null;var i={},l=0;h=!1;Object.entries(f||{}).forEach(function(a){var b=a[0];a=a[1];typeof a==="string"&&(b===j&&(h=!0),i[a]||(i[a]=0),i[a]++,l++)});if(b("WorkChatRedesignedMessageListCheck.re").enabled&&l===0)return null;var m=(g=b("MessengerState.re").getThreadMetaNow(j,this.props.message.thread_id))==null?void 0:g.reactions;e=Object.keys(i).sort(b("MessengerReactionsUtil.bs").sortFunction).slice(0,k).map(function(c,d,a){var e,f=b("MessengerReactionsUtil.bs").defaultReactions.includes(c);e=b("gkx")("1229783")?m==null?void 0:(e=m.find(function(a){return a.reactionEmoji===c}))==null?void 0:e.staticAssetUri:null;return b("React").jsx("span",{className:"_4kf5","data-testid":"messenger_reactions_reaction",style:{zIndex:a.length-d,marginLeft:d===0?0:"-4px"},children:b("React").jsx(b("MessengerReactionStaticEmoji.react"),{reaction:c,isDefaultReaction:f,uri:e})},c)});d=l>0?b("React").jsx("span",{className:"_4kf5 _4kf6"+(h?" _fy2":""),children:l}):null;f=a&&!h||b("WorkChatRedesignedMessageListCheck.re").enabled?b("React").jsx("div",{className:"_aou _aov"+(b("WorkChatRedesignedMessageListCheck.re").enabled&&h?" _7w5w":""),children:b("React").jsx("span",{className:"_aow",children:b("React").jsx(b("MessengerReactionsPrompt.react"),{message:c,isActive:!0,isEdit:h,isQuickAdd:!0,setReactionsPromptShown:this.$1})})}):null;g=b("TooltipData").propsFor(this.$2());return b("React").jsx("div",{className:"_8rnv preview",children:b("React").jsxs("div",babelHelpers["extends"]({},b("WorkChatRedesignedMessageListCheck.re").enabled?{}:g,{className:"_7ef9",children:[b("React").jsxs(b("ShimButton.react"),babelHelpers["extends"]({"aria-label":g},b("WorkChatRedesignedMessageListCheck.re").enabled?g:{},{className:"_aou",onClick:this.$3,children:[e,d]})),f]}))})};d.$2=function(){__p&&__p();var a=this.props.message.reactions,c=this.props.participants;if(!a||!c)return"";a=Object.keys(a);var d=a.reduce(function(a,d){if(a.length>=l+1)return a;d=b("MercuryIDs").getParticipantIDFromUserID(d);d=c.get(d)||b("MessengerParticipants.bs").getNow(d);d=d&&d.name;d&&a.push(d);return a},[]),e=d.length,f=d.join("\n");if(a.length>e){d.pop();e=h._("and {count} others",[h._param("count",a.length-d.length)]);f=d.join("\n")+"\n"+e.toString()}return f};return c}(b("React").Component);a.propTypes={isFromViewer:(c=b("prop-types")).bool.isRequired,message:c.object.isRequired,participants:c.object,renderQuickAdd:c.bool,hovered:c.bool};e.exports=a}),null);
__d("MessengerDecorator",["cx","BootloadedComponent.react","BootloaderResource","FantaMessageActions","JSResource","MercuryConfig","MessageReplyPermissions","MessagingTag","MessengerDecoratorUtil","MessengerEnvironment","MessengerReactions.react","QE2Logger","React","WorkChatRedesignedMessageListCheck.re","gkx","isMessengerMessageRemoved","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=(a=b("MessengerDecoratorUtil")).allowForward,i=a.allowSave,j=a.getAttachments,k=a.hasLWA,l=a.isAdminLayoutType,m=a.isAttachment,n=a.isMontageDirect,o=a.isMontageShare,p=a.isWECMessage,q=(c=b("lazyLoadComponent"))((d=b("JSResource"))("MessengerMessageActionItemList").__setRef("MessengerDecorator")),r=c(d("MessengerRemovedTombstoneActionItemList").__setRef("MessengerDecorator")),s=c(d("MessengerSavedMessageActionItemList").__setRef("MessengerDecorator")),t=c(d("WorkChatMessageSavedDecorator.react").__setRef("MessengerDecorator")),u=c(d("WorkChatMessageSaveAction.react").__setRef("MessengerDecorator")),v=[{name:"Saved",check:function(a,c){return b("gkx")("843916")&&a.tags!=null&&a.tags.includes("message:save")},render:function(a,c,d,e){return(c=b("React")).jsx(c.Suspense,{fallback:c.jsx("div",{}),children:c.jsx(t,{})},"saved:"+a.message_id)},getAdditionalClassNames:function(){return"_5z-5"}},{name:"Reactions",check:function(a,c){if(n(a)||o(a)||l(a))return!1;var d=!!(a.reactions&&Object.keys(a.reactions).length>0);b("QE2Logger").logExposureForUser("messenger_growth_www_share_flow");c=!!(!c&&(b("WorkChatRedesignedMessageListCheck.re").enabled||h(a)||m(a)&&b("MercuryConfig").MNFWD));return(d||c)&&!k(a)&&!p(a)},render:function(a,c,d,e){var f=h(a)||m(a)&&b("MercuryConfig").MNFWD;return b("React").jsx(b("MessengerReactions.react"),{isFromViewer:c,message:a,renderQuickAdd:f&&!c,hovered:e,participants:d&&d.participants},a.message_id+"-reactions")},getAdditionalClassNames:function(){return"_5z-5"}}],w=[{name:"MontageReply",check:function(a){if(!b("MercuryConfig").MontageThreadViewer||l(a))return!1;a=a.montage_reply_data&&a.montage_reply_data.message_id;return!!a},render:function(a,c,d){d=a.montage_reply_data&&a.montage_reply_data.message_id;var e=a.montage_reply_data&&a.montage_reply_data.reply_action,f=a.montage_reply_data&&a.montage_reply_data.snippet;return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("gkx")("1031642")?b("JSResource")("MercuryMontageReplyStoryQueryContainer.react").__setRef("MessengerDecorator"):b("JSResource")("MontageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:c,messageID:d,replyAction:e,replyAuthorID:a.author,replySnippet:f,threadID:a.thread_id},"montagereply:"+a.message_id)},getAdditionalClassNames:function(){return null}},{name:"MessageReply",check:function(a){return!a.replied_to_message||l(a)?!1:b("gkx")("678600")||b("MercuryConfig").M3CRE},render:function(a,c,d){return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("JSResource")("MessageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:c,authorID:a.author,repliedToMessage:a.replied_to_message,threadID:a.thread_id,scrollToRepliedMessage:d&&d.scrollToRepliedMessage,customColor:d&&d.customColor,gradientColors:d&&d.gradientColors,solidColor:d&&d.solidColor,nicknames:d&&d.nicknames,messageBody:a.body},"messagereply:"+a.message_id)},getAdditionalClassNames:function(){return null}},{name:"MessageForward",check:function(a){return!b("MessengerEnvironment").messengerui||!a.is_forwarded||l(a)?!1:b("gkx")("974812")},render:function(a,c,d){var e=a.attachments.length>0?a.attachments[0].attach_type:"unknown";return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("JSResource")("MessengerForwardDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:c,authorID:a.author,threadID:a.thread_id,customColor:d&&d.customColor,messageBody:a.body,attachmentType:e},"messageforward:"+a.message_id)},getAdditionalClassNames:function(){return null}}],x=[{name:"ForwardImages",isAlwaysVisible:!0,check:function(a){return h(a)},render:function(a,c){var d=j(a),e=d.ids;d=d.types;return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("MessengerEnvironment").messengerui?b("JSResource")("MessengerPhotoForwardButton.react").__setRef("MessengerDecorator"):b("JSResource")("ChatPhotoForwardButton.react").__setRef("MessengerDecorator"),attachmentIDs:e,attachmentTypes:d,isFromViewer:c},"forwardimages:"+a.message_id)},getAdditionalClassNames:function(){return"_ylc"}},{name:"ReactionPrompt",check:function(a){return n(a)||o(a)||b("isMessengerMessageRemoved")(a)||l(a)?!1:!h(a)&&!k(a)},render:function(a,c,d){c=b("MercuryConfig").MNFWD&&m(a);return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("JSResource")("MessengerReactionsPrompt.react").__setRef("MessengerDecorator"),message:a,isActive:!c&&(!a.folder||a.folder===b("MessagingTag").INBOX),onShowMenu:d&&d.onShowMenu},"reactionprompt:"+a.message_id)},getAdditionalClassNames:function(){return null}},{name:"MessengerSaveAction",check:function(a){return i(a)},render:function(a){var c;return(c=b("React")).jsx(c.Suspense,{fallback:c.jsx("div",{}),children:c.jsx(u,{isActive:!b("isMessengerMessageRemoved")(a),message:a})},"messagesaveicon:"+a.message_id)},getAdditionalClassNames:function(){return null}},{name:"MessengerUIReplyAction",check:function(a){if(o(a))return!1;return b("MessageReplyPermissions").canReplyToMessage(a)?b("MessengerEnvironment").messengerui:!1},render:function(a,c,d){return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("JSResource")("MessengerMessageReplyAction.react").__setRef("MessengerDecorator"),message:a,onReplyToMessage:d&&d.onReplyToMessage},"messagereplyaction:"+a.message_id)},getAdditionalClassNames:function(){return null}},{name:"MessageActions",check:function(a){return n(a)||o(a)||l(a)?!1:!0},render:function(a,c,d){__p&&__p();var e=n(a)||o(a)?!1:(h(a)||m(a)&&b("MercuryConfig").MNFWD)&&!k(a),f=b("MessengerEnvironment").messengerui||(d==null?void 0:d.onReplyToMessage)!=null?d==null?void 0:d.onReplyToMessage:function(){return b("FantaMessageActions").replyToMessage(a,a.thread_id)};b("BootloaderResource").preload(b("JSResource")("MessengerMessageActionItemList").__setRef("MessengerDecorator"));b("BootloaderResource").preload(b("JSResource")("MessengerRemovedTombstoneActionItemList").__setRef("MessengerDecorator"));b("BootloaderResource").preload(b("JSResource")("MessengerSavedMessageActionItemList").__setRef("MessengerDecorator"));return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("JSResource")("MessengerMessageActions.react").__setRef("MessengerDecorator"),message:a,isActive:!0,onShowMenu:d&&d.onShowMenu,isFromViewer:c,includeReactions:e,isShowingOriginal:d&&d.isShowingOriginal,hasFormatting:d&&d.hasFormatting,onToggleOriginal:d&&d.handleToggleOriginal,onReplyToMessage:f,isSavedView:d&&d.isSavedView,renderActionItems:function(g){__p&&__p();var h=g.closeActionList;g=g.openReactionsPopover;if(d==null?void 0:d.isSavedView){var i;return(i=b("React")).jsx(i.Suspense,{fallback:i.jsx("div",{}),children:i.jsx(s,{closeActionList:h})},"MessengerSavedMessageActionItemList")}else if(b("isMessengerMessageRemoved")(a)){var i;return(i=b("React")).jsx(i.Suspense,{fallback:i.jsx("div",{}),children:i.jsx(r,{closeActionList:h,isFromViewer:c,message:a})},"MessengerRemovedTombstoneActionItemList")}else{var i;return(i=b("React")).jsx(i.Suspense,{fallback:i.jsx("div",{}),children:i.jsx(q,{closeActionList:h,hasFormatting:d&&d.hasFormatting,includeReactions:e,isFromViewer:c,isShowingOriginal:d&&d.isShowingOriginal,message:a,onReplyToMessage:f,onToggleOriginal:d&&d.handleToggleOriginal,openReactionsPopover:g})},"MessengerMessageActionItemList")}}},"messageactions:"+a.message_id)},getAdditionalClassNames:function(){return null}}];f={getBeforeDecorators:function(){return w},getAfterDecorators:function(){return v},getInnerDecorators:function(){return x}};e.exports=f}),null);
__d("MessengerDecoratorHideable.react",["cx","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.isActive;a=a.children;var d=b("gkx")("1221668");return b("React").jsx("span",{className:(!Boolean(c)&&!d?"_8sow":"")+(!Boolean(c)&&d?" _8tab":""),children:a})}e.exports=a}),null);
__d("MessengerInnerDecorators.react",["cx","Locale","MessengerDecorator","MessengerDecoratorHideable.react","MessengerDotComAndInboxM4Check.bs","React","WorkChatRedesignedMessageListCheck.re","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={shown:!1},c.$1=function(a){c.setState({shown:a})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this,c=this.props.decorators||b("MessengerDecorator").getInnerDecorators();if(this.props.isSavedView===!0)return null;c=c.map(function(c){return c.check(a.props.message)?b("React").jsx(b("MessengerDecoratorHideable.react"),{isActive:a.state.shown||c.isAlwaysVisible||a.props.hovered,children:c.render(a.props.message,a.props.isFromViewer,babelHelpers["extends"]({},a.props.messageProps,{messageIsSelected:a.props.hovered||a.state.shown,onShowMenu:a.$1,isSavedView:!1}))},c.name):null}).filter(Boolean);return b("React").jsx("span",{className:(b("WorkChatRedesignedMessageListCheck.re").enabled?"":"_40fu")+(b("Locale").isRTL()||this.props.forGameChat?" _64wc":""),"data-hover":"none",children:b("React").jsx("span",{className:b("joinClasses")(this.props.className,"_2u_d"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7i2j":"")),children:c})})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerFluxReduceDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("ExplicitRegistrationReactDispatcher"));e.exports=new a({strict:!1})}),null);
__d("MessengerVideoAutoplayActions",["MessengerFluxReduceDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g="messenger_video",h=b("keyMirror")({DESTROY:null,DSTROY_ALL:null,SCROLL:null,UPDATE:null});a={Types:h,Namespace:g,onScroll:function(a,c,d,e){b("MessengerFluxReduceDispatcher").dispatch({type:h.SCROLL,namespace:g,threadID:a,messageIDs:c,messageRectMap:d,viewportRect:e})},updateStore:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:h.UPDATE,namespace:g,threadID:a,messageIDs:c})},deleteThread:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:h.DESTROY,namespace:g,threadID:a})},deleteAllThreads:function(){b("MessengerFluxReduceDispatcher").dispatch({type:h.DESTROY_ALL,namespace:g})}};e.exports=a}),null);
__d("MessengerVideoAutoplayStore",["FluxReduceStore","MessengerVideoAutoplayActions","immutable","MessengerFluxReduceDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerVideoAutoplayActions").Types,h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record({currentVideoMessageID:null,lastVideoMessageID:null,messageIDs:null,videoVisibilityMap:null}));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map()};d.reduce=function(a,c){if(c.namespace!==b("MessengerVideoAutoplayActions").Namespace)return a;switch(c.type){case g.SCROLL:c.messageIDs&&(a=this.$MessengerVideoAutoplayStore1(a,c.threadID,c.messageIDs));return this.$MessengerVideoAutoplayStore2(a,c.threadID,c.messageRectMap,c.viewportRect);case g.UPDATE:return this.$MessengerVideoAutoplayStore1(a,c.threadID,c.messageIDs);case g.DESTROY:return this.$MessengerVideoAutoplayStore3(a,c.threadID);case g.DESTROY_ALL:return a.clear()}return a};d.$MessengerVideoAutoplayStore1=function(a,b,c){return!c?a["delete"](b):a.set(b,new h({currentVideoMessageID:null,lastVideoMessageID:c.first(),messageIDs:c,videoVisibilityMap:null}))};d.$MessengerVideoAutoplayStore3=function(a,b){return a["delete"](b)};d.$MessengerVideoAutoplayStore4=function(a,b,c,d,e){var f=this,g=null;c=c.map(function(a){if(g)return[a,!1];else{var b=f.$MessengerVideoAutoplayStore5(a,d,e);b&&(g=a);return[a,b]}}).fromEntrySeq().toOrderedMap();return a.mergeIn([b],{currentVideoMessageID:g,videoVisibilityMap:c})};d.$MessengerVideoAutoplayStore2=function(a,b,c,d){__p&&__p();var e=a.getIn([b,"messageIDs"]);if(!e||!c||!d)return a;if(!a.getIn([b,"currentVideoMessageID"]))return this.$MessengerVideoAutoplayStore4(a,b,e,c,d);else{var f=a.getIn([b,"videoVisibilityMap"]),g=a.getIn([b,"lastVideoMessageID"]),h=a.getIn([b,"currentVideoMessageID"]);if(this.$MessengerVideoAutoplayStore5(g,c,d)){if(f&&f.first())return a}else if(this.$MessengerVideoAutoplayStore5(h,c,d))return a;a=a.setIn([b,"currentVideoMessageID"],null);return this.$MessengerVideoAutoplayStore4(a,b,e,c,d)}};d.$MessengerVideoAutoplayStore6=function(a,b){return!a?!1:a.top>b.top&&a.bottom<b.bottom};d.$MessengerVideoAutoplayStore5=function(a,b,c){b=b.get(a);return this.$MessengerVideoAutoplayStore6(b,c)};d.getVideoVisibilityMap=function(a){return this.getState().getIn([a,"videoVisibilityMap"])};d.getMessageIDs=function(a){return this.getState().getIn([a,"messageIDs"])};d.isVisible=function(a,b){return!!this.getState().getIn([a,"videoVisibilityMap",b])};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("MessengerFluxReduceDispatcher"))}),null);
__d("MessengerDomIDs.bs",["uniqueID"],(function(a,b,c,d,e,f){"use strict";c={COMPOSER_INPUT_DESCRIPTION:(a=b("uniqueID"))(),CONVERSATION:a(),MAIN_LABEL:a(),MUTE_DIALOG_TITLE:a(),THREAD_INFO_PANEL:a(),THREAD_TITLE:a()};f.ids=c}),null);
__d("M4ThreadFillDetect.bs",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return a.style}function c(a,b){a.appendChild(b);return 0}try{d=document.createElement("div");e=document.createElement("div");var g=document.createElement("div"),h=document.createElement("div"),i=document.createElement("div"),j=document.createElement("div"),k=document.createElement("div"),l=document.createElement("table");d.appendChild(e);d.appendChild(k);e.appendChild(g);k.appendChild(l);g.appendChild(h);h.appendChild(i);h.appendChild(j);d.style.position="absolute";d.style.marginLeft="-999px";d.style.contain="layout";e.style.height="200px";e.style.display="flex";e.style.visibility="hidden";e.style.flexDirection="column";e.style.position="relative";g.style.flexBasis="0px";g.style.flexGrow="1";g.style.flexShrink="0";g.style.position="relative";h.style.display="flex";h.style.flexDirection="column";h.style.minHeight="100%";i.style.flexGrow="1";j.style.height="50px";k.style.height="200px";k.style.visibility="hidden";k.style.position="relative";l.style.minHeight="100%";e=document.body;e.appendChild(d);g=i.clientHeight===150;h=l.clientHeight===200;document.body.removeChild(d);j=g?0:h?1:2}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)j=3;else throw a}k=j===2||j===1?1:0;e=k?"TABLE":"FLEX";f.getStylesheet=a;f.appendChild=c;f.measuredTechnique=j;f.technique=k;f.forJS=e}),null);
__d("FantaThread.react",["cx","M4ThreadFillDetect.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("M4ThreadFillDetect.bs").forJS;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.setRef=function(a){c.$1=a,typeof c.props.scrollRef==="function"&&c.props.scrollRef(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.children;a=a.spacerContent;return b("React").jsx("div",{className:"_1i6a",onClick:this.props.onClick,children:b("React").jsx("div",{className:"_4po3"+(h==="FLEX"?" _4poa":"")+(h==="TABLE"?" _4po4":""),ref:this.setRef,children:b("React").jsxs("div",{className:"_4po5",children:[b("React").jsx("div",{className:"_4po6",children:b("React").jsx("div",{className:"_4po7",children:a})}),b("React").jsx("div",{className:"_4po8",children:b("React").jsx("div",{className:"_4po9",children:c})})]})})})};return c}(b("React").Component);e.exports=a}),null);
__d("WorkBotLandingPageHelper",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").List;function a(a){__p&&__p();var b;if(a.length===0)return!0;if(a.length>1)return!1;a=a[a.length-1];b=(b=a)!=null?(b=b.log_message_data)!=null?b.message_type:b:b;if(b==="work_bot_installed"){a=(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.show_landing_page:b:b:b;return a===!0}return!1}function c(a){__p&&__p();var b;if(a.size===0)return!0;if(a.size>1)return!1;a=a.last();b=(b=a)!=null?(b=b.log_message_data)!=null?b.message_type:b:b;if(b==="work_bot_installed"){a=(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.show_landing_page:b:b:b;return a===!0}return!1}e.exports={shouldShowBotLandingPage:c,shouldShowBotLandingPageArray:a}}),null);
__d("FantaTabSheetPlaceholder.react",["cx","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return b("React").jsx("div",{className:"_w_z",children:b("React").jsx(b("XUISpinner.react"),{})})};e.exports=a}),null);
__d("FantaTabSheet.react",["cx","BootloadedComponent.react","FantaTabSheetPlaceholder.react","JSResource","LazyComponent.react","MercuryIDs","MercurySheetPolicy","MessengerParticipants.bs","React","ReasonBootloadOnRender.react","ReasonResource","emptyFunction","lazyLoadComponent","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("lazyLoadComponent")(b("JSResource")("ChatGroupsSyncTabSheet.react").__setRef("FantaTabSheet.react")),i=b("lazyLoadComponent")(b("JSResource")("ChatGroupNameComposerTabSheet.react").__setRef("FantaTabSheet.react")),j=b("lazyLoadComponent")(b("JSResource")("ChatIntegrityLandingScreenSheet.react").__setRef("FantaTabSheet.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){var b=this.props;return b.threadID!==a.threadID||!b.tabContent.equals(a.tabContent)};d.maybeRenderMontage=function(){var a=this.props,c=a.threadID;a=a.tabContent;return a.isMontageOpen?b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatMontageSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),threadID:c,onResize:b("emptyFunction")},"Montage"):null};d.render=function(){__p&&__p();var a=this.props,c=a.threadID,d=a.tabContent,e=a.composerComponent,f=a.pageUser;a=a.isGroupChat;var g=d.loggingID,k=d.openSheet,l=d.privacyController,m=d.thread,n=d.typeahead,o,p;switch(k){case b("MercurySheetPolicy").sheets.ChatThreadIsMutedTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetChatThreadIsMuted.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),threadID:c},k);break;case b("MercurySheetPolicy").sheets.ChatNameConversationTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetNameConversation.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx(b("FantaTabSheetPlaceholder.react"),{}),thread:m,threadID:c},k);break;case b("MercurySheetPolicy").sheets.ChatUserBlockedTabSheet:p=b("MercuryIDs").getUserIDFromThreadID(c);if(p){var q=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(p));q&&l&&(o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserBlockedTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),gender:q.gender,privacyActionController:l,shortName:q.short_name},k))}break;case b("MercurySheetPolicy").sheets.ChatOfflineTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetOffline.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),privacyController:l,threadID:c},k);break;case b("MercurySheetPolicy").sheets.ChatReadOnlyTabSheet:case b("MercurySheetPolicy").sheets.ChatReadOnlyPermanentTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetReadOnly.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),threadID:c},k);break;case b("MercurySheetPolicy").sheets.FantaAddFriendsSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetAddFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx(b("FantaTabSheetPlaceholder.react"),{}),loggingID:g,thread:m,threadID:c,typeahead:n,composerComponent:e,tabContent:d},k);break;case b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetAddMoreFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx(b("FantaTabSheetPlaceholder.react"),{}),loggingID:g,thread:m,threadID:c,typeahead:n},k);break;case b("MercurySheetPolicy").sheets.ChatThreadIsMessageBlockedSheet:p=b("MercuryIDs").getUserIDFromThreadID(c);if(p){q=b("MercuryIDs").getParticipantIDFromUserID(p);l=b("MessengerParticipants.bs").getNow(q);l&&(o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetMessageBlocked.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),isGroupChat:a,pageUser:f,participants:d.participants,shortName:l.short_name,threadID:c},k))}break;case b("MercurySheetPolicy").sheets.ChatUserFocusSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserFocusSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),thread:m,threadID:c},k);break;case b("MercurySheetPolicy").sheets.ChatUserFocusBypassSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserFocusBypassSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{})},k);break;case b("MercurySheetPolicy").sheets.ChatUploadWarningTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUploadWarningTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{})},k);break;case b("MercurySheetPolicy").sheets.ChatNoRecipientsTabSheet:b("MercuryIDs").isCanonical(c)||(o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatNoRecipientsTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{})},k));break;case b("MercurySheetPolicy").sheets.ChatNewMessagesTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaNewMessagesTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),threadID:c},k);break;case b("MercurySheetPolicy").sheets.ChatEmployeeAwaySheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatEmployeeAwaySheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{})},k);break;case b("MercurySheetPolicy").sheets.ChatEventReminderTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaEventReminderTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),threadID:c},k);break;case b("MercurySheetPolicy").sheets.ChatJoinCallSheet:if(m){g=m.rtc_call_data;n=m.thread_fbid;o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatJoinCallSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),rtcCallData:g,threadFBID:n},k)}break;case b("MercurySheetPolicy").sheets.ChatRoomAssociatedObjectSheet:if(m){p=m.associated_object;o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatRoomAssociatedObjectSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),associatedObject:p},k)}break;case b("MercurySheetPolicy").sheets.ChatMentorshipProgramSheet:m&&(o=b("React").jsx(b("ReasonBootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),{thread:m}),loader:b("ReasonResource")(b("JSResource")("MentorshipProgramSheet.bs").__setRef("FantaTabSheet.react")),placeholder:b("React").jsx("div",{})}));break;case b("MercurySheetPolicy").sheets.ChatGroupsSyncTabSheet:if(m&&m.work_associated_group){o=(q=b("React")).jsx(q.Suspense,{fallback:q.jsx("div",{}),children:q.jsx(h,{group:m.work_associated_group,imageURL:m.image_src,name:m.name})},k)}break;case b("MercurySheetPolicy").sheets.ChatGroupNameComposerTabSheet:o=b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(i,{threadID:c,composerComponent:e})},k);break;case b("MercurySheetPolicy").sheets.ChatIntegrityLandingScreenSheet:if(f){o=(q=b("React")).jsx(q.Suspense,{fallback:q.jsx("div",{}),children:q.jsx(j,{pageUser:f,threadID:c})},k)}break}a=this.maybeRenderMontage();if(o)return b("React").jsx("div",{className:"_1sk5",children:b("React").jsx("div",{className:"_1sk6",children:o})});else if(a)return a;return null};return c}(b("React").Component);a.propTypes={threadID:b("prop-types").string.isRequired,tabContent:b("prop-types").object.isRequired};e.exports=a}),null);
__d("FantaTabMain.react",["cx","fbt","invariant","Bootloader","ChatConfig","CoworkerThreadContextBanner.react","CurrentUser","DragDropTarget","FantaChatHeaderContainer.react","FantaConversationScroller.react","FantaDispatcher","FantaDragAndDrop.react","FantaMessageActions","FantaPendingActions.react","FantaTabActions","FantaTabComposer.react","FantaTabSheet.react","FBIDCheck","JSResource","Keys","MercuryIDs","MercurySheetPolicy","MessageRequestUtils","MessagingTagConstants","MessengerBotMenuDataFetcher","MessengerColors","MessengerCustomColorUtils.bs","MessengerParticipants.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","MessengerState.bs","MNCommercePageSetting","Parent","React","ReactDOM","ShortProfiles","SimpleXUIDialog","TrackingNodes","WorkBotLandingPageHelper","WorkChatAvailabilityStatusLoader","WorkFileUploadsGating","XUISpinner.react","clearTimeout","convertMIGColorToFIGColor","getPageIDFromThreadID","immutable","joinClasses","lazyLoadComponent","performanceAbsoluteNow","promiseDone","prop-types","setTimeout","throttle"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("MessengerPresenceProvider.bs").jsComponent,l=b("WorkBotLandingPageHelper").shouldShowBotLandingPageArray,m=(a=b("lazyLoadComponent"))((c=b("JSResource"))("MarketplaceMessengerContextBanner.react").__setRef("FantaTabMain.react")),n=a(c("ChatJoinableInterstitialPreview.react").__setRef("FantaTabMain.react")),o=a(c("P2PChatThreadBannerContainer.react").__setRef("FantaTabMain.react")),p=a(c("MessengerGameBotPlayButton.react").__setRef("FantaTabMain.react")),q=a(c("FantaPageComposerNullState.react").__setRef("FantaTabMain.react")),r=function(a){a=b("MercuryIDs").getUserIDFromThreadID(a.tab.id);return a&&b("CurrentUser").isWorkUser()&&b("WorkChatAvailabilityStatusLoader").isLoaded()?b("WorkChatAvailabilityStatusLoader").getStoreEnforce().getIsDoNotDisturb(a):!1};d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$9=null,d.state={closing:!1,disableInput:!1,isDoNotDisturb:r(d.props)},d.$23=function(a){__p&&__p();var c=!!b("Parent").byClass(a.target,"fantaTabMain-"+d.props.tab.id);a=!!b("Parent").byClass(a.relatedTarget,"fantaTabMain-"+d.props.tab.id);if(!c||!a){if(d.$8){b("clearTimeout")(d.$8);d.$8=null;return}b("FantaTabActions").hoveredTab(d.props.tab.id)}},d.$24=function(a){var c=!!b("Parent").byClass(a.target,"fantaTabMain-"+d.props.tab.id);a=!!b("Parent").byClass(a.relatedTarget,"fantaTabMain-"+d.props.tab.id);(!c||!a)&&(d.$8&&b("clearTimeout")(d.$8),d.$8=b("setTimeout")(function(){d.$8=null,b("FantaTabActions").unhoveredTab(d.props.tab.id)},500))},d.$22=function(a){var c=!!b("Parent").byClass(a.target,"fantaTabMain-"+d.props.tab.id),e=!!b("Parent").byClass(a.relatedTarget,"fantaTabMain-"+d.props.tab.id);(!c||!e)&&(!a.relatedTarget||!a.target?d.$6=b("setTimeout")(function(){d.$6=null,d.$25(d.props.tab.id)},100):d.$25(d.props.tab.id))},d.$21=function(a){if(d.$6){b("clearTimeout")(d.$6);d.$6=null;return}var c=!!b("Parent").byClass(a.target,"fantaTabMain-"+d.props.tab.id),e=!!b("Parent").byClass(a.relatedTarget,"fantaTabMain-"+d.props.tab.id);a=a.target;a&&a.classList&&(a.classList.contains("_3olu")||a.classList.contains("_61td")||a.classList.contains("_7jbw")||a.classList.contains("_4zs3"))||(!c||!e)&&(b("FantaDispatcher").isDispatching()||b("FantaTabActions").focusTab(d.props.tab.id))},d.$27=function(a){b("FantaMessageActions").linkPreview(d.props.tab.id,a)},d.$26=function(a){var c=d.props.tabContent;c=c||{};c=c.composer;var e=d.props.tab.id;c&&b("FantaMessageActions").prepareFilesForSend(e,a,c)},d.$17=function(a){a.keyCode===b("Keys").ESC&&(d.$1(!0),a.preventDefault(),a.stopPropagation())},d.$18=function(a){a.keyCode===b("Keys").TAB&&d.$19(a)},d.$19=function(a){var b=d.props.nonMinimizedRaisedTabCount;b>1&&(a.preventDefault(),d.$2(a.ctrlKey,a.shiftKey))},d.$1=function(a){var c=d.props,e=c.tab;c=c.tabContent;!c||c&&c.composer.text.length===0&&!d.$28()?(d.$29(),a?b("FantaTabActions").closeAndTabNext(e.id):b("FantaTabActions").closeTab(e.id)):d.$30();d.$31()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1=b("throttle")(this.$1,100),this.$2=b("throttle")(this.$2,100)};d.componentDidMount=function(){var a=this,c=(j||(j=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,d){b.markerPoint(d.FIRSTCHATTABOPEN_WWW,"mount_fanta_main",JSON.stringify({messageSize:a.props.messages?a.props.messages.length:0,hasThread:!!a.props.thread}),0,c)},"FantaTabMain.react");this.$10();this.$11();this.$12(this.props.tab.id);this.$13();this.$14();this.$15()};d.componentDidUpdate=function(a){this.$11();if(b("CurrentUser").isWorkUser()&&b("WorkChatAvailabilityStatusLoader").isLoaded()&&a.thread!==this.props.thread){var c=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);a=b("MercuryIDs").getUserIDFromThreadID(a.tab.id);var d=b("WorkChatAvailabilityStatusLoader").getStoreEnforce();a&&d.unsubscribeUser(a,this);c&&(d.subscribeUser(c,this),d.fetchUsers([c]))}};d.componentWillUnmount=function(){this.$3&&this.$3.disable();this.$9&&this.$9.remove();var a=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);a&&b("WorkChatAvailabilityStatusLoader").isLoaded()&&b("WorkChatAvailabilityStatusLoader").getStoreEnforce().unsubscribeUser(a,this)};d.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return c.hasFetchedAll!==a.hasFetchedAll||c.isFocused!==a.isFocused||c.isHovered!==a.isHovered||c.isLastGroupTab!==a.isLastGroupTab||!c.tab.equals(a.tab)||!c.tabContent&&!!a.tabContent||c.tabContent&&!c.tabContent.equals(a.tabContent)||c.thread!==a.thread||c.fbid!==a.fbid||c.blockedIDs!==a.blockedIDs||c.readReceipts!==a.readReceipts||c.ignoredIds!==a.ignoredIds||d.closing!==b.closing||d.disableInput!==b.disableInput||d.isDoNotDisturb!==b.isDoNotDisturb||c.messages&&a.messages&&(c.messages.length!==a.messages.length||!c.messages.every(function(b,c){return b===a.messages[c]}))};d.$11=function(){return};d.$16=function(){var a=this.props.tabContent&&this.props.tabContent.nullStateCTA;if(!a)return!1;if(this.props.thread&&this.props.thread.message_count===0)return!0;return b("CurrentUser").isWorkUser()?l(this.props.messages):!1};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.blockedIDs,e=c.forGameChat,f=c.hasFetchedAll,g=c.isFocused,j=c.isHovered,l=c.isLastGroupTab,r=c.messages,s=c.onLoadMoreMessages,t=c.onSelectSticker,u=c.onSendHotLike,v=c.onSendMessage,w=c.onSendPhoto,x=c.readReceipts,y=c.showContextBanner,z=c.tab,A=c.tabContent,B=c.thread,C=z.id,D=b("CurrentUser").getID();c=A&&A.composer.fileUploader;z=B&&b("convertMIGColorToFIGColor")(B.header_color);var E=A&&A.nullStateCTA,F=this.$16(),G=B&&B.participants||[],H=A&&A.threadPreviewRecipients||b("immutable").List();G=G.length>0?G:H.toArray();H=(H=this.props)!=null?(H=H.thread)!=null?H.other_user_fbid:H:H;H=H?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(H)):null;var I=b("getPageIDFromThreadID")(this.props.tab.id),J=b("MessengerState.bs").isEmptyLocalThread(D,C),K=b("MessengerState.bs").isNewEmptyLocalThread(D,C);F=B&&b("MessageRequestUtils").shouldShowComposerPendingActions(B)?b("React").jsx(b("FantaPendingActions.react"),{thread:B,threadID:C}):F&&E?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{className:"_2xh0",children:b("React").jsx("div",{className:"_2xh4 _59w_",children:b("React").jsx(b("XUISpinner.react"),{size:"small"})})}),children:b("React").jsx(q,{threadID:C,nullStateCTA:E,pageName:H&&H.short_name})}):A?b("React").jsx("div",{className:"fbNubFlyoutFooter"+(this.state.disableInput?" fbNubFlyoutComposerDisabled":""),"data-testid":"composer_root",children:b("React").jsx(b("FantaTabComposer.react"),{blockedIDs:d,composer:A.composer,disableInput:this.state.disableInput,fileUploader:c,forGameChat:e,isEmptyLocalThread:J,isFocused:g,isNewEmptyLocalThread:K,onEscape:this.$17,onKeyDown:this.$17,onKeyPress:this.$18,onSelectSticker:t,onSendHotLike:u,onSendMessage:v,onSendPhoto:w,onTab:this.$19,participants:G,ref:"composer",threadID:C,viewer:D})}):null;var L;E=b("MercuryIDs").getUserIDFromThreadID(C);E&&(L=b("ShortProfiles").getNow(E));var M=L&&L.is_messenger_only;!A&&i(0,6156);H=this.$20();c=!1;if(C){c=A.isNewMessageTab?((B==null?void 0:(K=B.participants)==null?void 0:K.length)||0)>2:b("MercuryIDs").isGroupChat(C)}var N;t=b("React").jsx(b("FantaTabSheet.react"),{tabContent:A,threadID:C,composerComponent:this.refs.composer,pageUser:H,isGroupChat:c});H&&A.openSheet===b("MercurySheetPolicy").sheets.ChatIntegrityLandingScreenSheet&&(N=b("React").jsxs("div",{className:"fbNubFlyoutFooter",children:[t,F]}));v=(u=B)!=null?u.marketplace_thread_data:u;G=(w=v)!=null?w.for_sale_item:w;c=(K=v)!=null?K.buyer_fbid:K;u=(H=v)!=null?H.seller_fbid:H;var O;if(G&&c&&u){O=(w=b("React")).jsx(w.Suspense,{fallback:w.jsx("div",{}),children:w.jsx(m,{buyerID:c,forSaleItem:G,renderLocation:"chat",sellerID:u,threadFBID:(K=this.props)!=null?(K=K.thread)!=null?K.thread_fbid:K:K})})}H=(v=B)!=null?v.group_thread_subtype:v;var P;H===13&&(P=b("React").jsx(b("CoworkerThreadContextBanner.react"),{}));w=B&&b("ChatConfig").getBool("chat_tab_has_gradients")?b("MessengerColors").makeLinearGradient(B.gradient_colors,B.solid_color,b("MessengerCustomColorUtils.bs").defaultColor()):void 0;c=A&&A.isMultiCompany;G=!!A&&!!A.openSheet;var Q=A&&A.joinableInterstitialData?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(n,{data:A.joinableInterstitialData,isActive:g,onClose:this.$1})}):b("React").jsxs("div",{className:(G?"_6vu4":"")+" _6vu5 _6z9d fbNubFlyoutInner _6vu1",children:[b("React").jsx(b("FantaChatHeaderContainer.react"),{blockedIDs:d,composer:A.composer,customColor:z,highlightNewMessage:A&&A.highlightNewMessage,isDoNotDisturb:this.state.isDoNotDisturb,isFocused:g,isLastGroupTab:l,isMultiCompany:c,isNewMessageTab:A&&A.isNewMessageTab,membershipParticipants:A.membershipParticipants,onClose:this.$1,pageIndicatorDescription:A.pageIndicatorDescription,participants:A.participants,thread:B,threadHref:A&&A.threadHref,threadID:C,uri:A.uri,viewer:D,focusOnClick:this.$21}),b("React").jsxs("div",{className:"_1ia _2sz2",ref:function(b){a.$4=b},style:w,children:[N?b("React").jsx("div",{}):t,b("React").jsx(b("FantaConversationScroller.react"),{forGameChat:e,hasFetchedAll:f,isFocused:g,isEmptyLocalThread:J,messages:r,onFocus:function(){return a.refs.composer&&a.refs.composer.focusInput()},onLoadMoreMessages:s,readReceipts:x,showContextBanner:y,thread:B,threadID:C,viewer:D,jumpToMessage:A.jumpToMessage}),b("React").jsx("div",{className:"_2hc2",children:b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:E?b("React").jsx(o,{isVisible:!0,otherUserID:E,threadID:C}):b("React").jsx(o,{isVisible:!0,threadID:C})})}),b("React").jsx("div",{className:"_4g6x",children:b("React").jsxs("div",{className:"_4g6y",children:[b("React").jsx("div",{className:"_4g6z _4g71",children:h._("Drag Link\/Files Here")}),b("React").jsx("div",{className:"_4g6z _4g6- _4g6_",children:h._("Drop Files Here")}),b("React").jsx("div",{className:"_4g6z _4g6- _4g70",children:h._("Drop Link Here")})]})}),N?N:I?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(p,{originalElement:F,pageID:I,playLinkClassName:"_2xh6 _2h_r",showGameImage:!0,threadFBID:(u=this.props)!=null?(u=u.thread)!=null?u.thread_fbid:u:u,threadID:C})}):F,b("React").jsx(b("FantaDragAndDrop.react"),{composer:A.composer,threadID:C}),O,P]})]});return b("React").jsx(k,{subscribeToIDs:[D],children:function(c){return b("React").jsx("div",{className:b("joinClasses")((a.state.closing?"_2suj":"")+" _3_9e _s0f _50mz _50m_"+(B&&!M&&b("MessengerParticipantUtils.bs").findIntersection(D,c,B).length>0&&!a.state.isDoNotDisturb?" _4-0b":"")+(a.state.isDoNotDisturb?" _1oh2":"")+" fbNub _50-v"+(g?" focusedTab":"")+(j?" hoveredTab":"")+" opened _27_3","fantaTabMain-"+C),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.CHAT_FLYOUT),onBlur:a.$22,onFocus:a.$21,onKeyDown:a.$17,onKeyPress:a.$18,onMouseEnter:a.$23,onMouseLeave:a.$24,ref:function(b){return a.$5=b},children:b("React").jsx("div",{className:"fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent",role:"complementary",children:b("React").jsx("div",{className:"fbNubFlyoutOuter",children:Q})})})}})};d.$14=function(){var a=this,c=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);c&&b("CurrentUser").isWorkUser()&&b("promiseDone")(b("WorkChatAvailabilityStatusLoader").load(),function(b){var d=b.store;a.$9=d.addListener(function(){a.setState({isDoNotDisturb:d.getIsDoNotDisturb(c)})})})};d.$25=function(a){b("FantaDispatcher").isDispatching()||b("FantaTabActions").blurTab(this.props.tab.id),this.$8&&(b("clearTimeout")(this.$8),this.$8=null),b("setTimeout")(function(){b("FantaTabActions").unhoveredTab(a)})};d.$15=function(){var a=this,c=b("getPageIDFromThreadID")(this.props.tab.id);c&&b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({disableInput:b})},function(){a.setState({disableInput:!1})},b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED)};d.$10=function(){__p&&__p();if(b("WorkFileUploadsGating").canUploadFiles&&!this.$3){var a=b("ReactDOM").findDOMNode(this.$4);if(a){a=new(b("DragDropTarget"))(a);this.$3=a;a.setOnFilesDropCallback(this.$26);a.setOnURLDropCallback(this.$27);a.enable()}}};d.$2=function(a,c){a||(c?b("FantaTabActions").focusPreviousTab():b("FantaTabActions").focusNextTab())};d.$29=function(){var a=this.props.tab.id;b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger"],function(b){return b.endFunnel(a)},"FantaTabMain.react")};d.$28=function(){return this.$32()||this.$33()};d.$32=function(){var a,b=this.props.tabContent;a=((a=b)!=null?(a=a.composer)!=null?(a=a.fileUploader)!=null?a.uploadedFiles:a:a:a)||{size:0};b=((b=b)!=null?(b=b.composer)!=null?(b=b.fileUploader)!=null?b.uploadingFiles:b:b:b)||{size:0};return a.size>0||b.size>0};d.$33=function(){var a=this.props.tabContent;a=(a=a)!=null?(a=a.composer)!=null?a.sharePreview:a:a;return!!(a&&a.params&&a.type)};d.$20=function(){var a=this.props,c=a.tab;a=a.tabContent;a=a==null?void 0:a.participants;a&&(a=a.toList().toArray());var d=b("getPageIDFromThreadID")(c.id);return!d||!a||!((c=a)==null?void 0:c.length)?null:a.find(function(a){return a.fbid===d})};d.$30=function(a){var c=this,d=this.props.tab,e=d.id;b("FantaTabActions").blurTab(e);d=h._("Are you sure you want to close this chat window?");var f=h._("You haven't sent your message.");b("SimpleXUIDialog").showConfirm(d,f,function(d){d?(c.$29(),a?b("FantaTabActions").closeAndTabNext(e):b("FantaTabActions").closeTab(e)):b("FantaTabActions").focusTab(e)},{autofocusConfirm:!0,useReactFocusBehavior:!0})};d.$13=function(){this.$7=Math.floor(Date.now()/1e3)};d.$31=function(){var a=this.props,c=a.thread,d=a.tab,e=c?c.other_user_fbid:null,f=Math.floor(Date.now()/1e3),g=this.$7;c&&e&&!b("FBIDCheck").isUser_deprecated(e)&&b("Bootloader").loadModules(["PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesEventObserver","PagesEventType"],function(a,b,h,i,j){a.log(e,b.CLICK,h.MESSAGE_FANTA_TAB_CLOSE,"",["pages_surface_team"],{open_tab_timestamp:g,close_tab_timestamp:f,last_message_timestamp:c.last_message_timestamp,message_count:c.message_count,snippet_sender:c.snippet_sender,participants:c.participants,entrypoint:d.entryPoint}),i.notify(j.MESSAGES_FANTA_TAB_CLOSE,e,{open_tab_timestamp:g,close_tab_timestamp:f,last_message_timestamp:c.last_message_timestamp,message_count:c.message_count,snippet_sender:c.snippet_sender,participants:c.participants,entrypoint:d.entryPoint})},"FantaTabMain.react")};d.$12=function(a){__p&&__p();var c=this;if(!b("MercuryIDs").isValidThreadID(a))return;b("Bootloader").loadModules(["GroupChatMessageBlockAlert","GroupChatMessageIgnoreAlert","MercuryIgnoredBlockedParticipants.bs","MercuryThreadActions"],function(d,e,f,g){__p&&__p();var h=g.get();b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),a,function(d){var g=c.props,i=g.fbid,j=g.ignoredIds;b("MessengerState.bs").compute(i,function(c){c=c.blocked_ids;c=f.isPresentInGroupThread(i,c,d);var g=b("MessengerParticipantUtils.bs").areParticipantsInGroupThread(i,j,d)&&d.folder==="inbox";!c&&g&&e.show(b("MessengerParticipantUtils.bs").participantsInGroupThread(i,j,d),b("MercuryIDs").getThreadFBIDFromThreadID(a),function(){b("FantaTabActions").focusTab(a)},function(){b("FantaTabActions").closeTab(a),b("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(c,d,e){h.changeFolder(a,b("MessagingTagConstants").other),new c().setEvent(d.IGNORE_CONFIRMED).setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a)).setPlatform(e.CHAT_TABS).log()},"FantaTabMain.react")})})})},"FantaTabMain.react")};return c}(b("React").Component);d.propTypes={hasFetchedAll:(f=b("prop-types")).bool.isRequired,isFocused:f.bool.isRequired,isHovered:f.bool.isRequired,isLastGroupTab:f.bool.isRequired,onLoadMoreMessages:f.func.isRequired,onSelectSticker:f.func.isRequired,onSendHotLike:f.func.isRequired,onSendMessage:f.func.isRequired,onSendPhoto:f.func.isRequired,nonMinimizedRaisedTabCount:f.number,showContextBanner:f.bool,tab:f.object.isRequired,tabContent:f.object,thread:f.object,forGameChat:f.bool.isRequired};e.exports=d}),null);
__d("FantaTabMainLoader.react",["Bootloader","CurrentUser","FantaAppStore","FantaGetMessageActions","FantaMessageActions","FantaTabMain.react","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerState.bs","React","TimeSlice","emptyFunction","prop-types","requestIdleCallback","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return!!a.preview_attachments[0].preview_url}var h=function(a){__p&&__p();b("FantaAppStore").addReducers(a);a=b("FantaAppStore").getState();a=(a=a)!=null?(a=a.mercury)!=null?a.tabContents:a:a;if(a){var c=a.reduce(function(a,b){b=b.thread;b&&a.push(b);return a},[]);b("setImmediate")(function(){return b("FantaGetMessageActions").threadsUpdated(c)})}h=b("emptyFunction")};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){var a=d.props.tab;b("MessengerState.bs").fetchMoreMessages(b("CurrentUser").getID(),a.id,0,d.props.messages.length+10,b("emptyFunction"))},d.$2=function(a,c){var e=d.props.tab;b("FantaMessageActions").sendSticker(e.id,a,c)},d.$3=function(a,c,e,f){var g=d.props.tab;b("FantaMessageActions").sendHotLike(g.id,a,c,e,f)},d.$4=function(a,c,e){var f=d.props.tabContent.thread,g=d.props.tab;f&&b("MessageRequestUtils").isMessageRequest(f)&&b("MercuryThreadActions").get().changeFolder(f.thread_id,b("MessagingTag").INBOX);b("FantaMessageActions").sendMessage(g.id,a,c,e)},d.$5=function(a,c){var e=d.props.tab;g(a)?b("FantaMessageActions").sendGif(e.id,a,c):b("FantaMessageActions").sendPhoto(e.id,a,c)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a){var b=this.props;return b.isFocused!==a.isFocused||b.isHovered!==a.isHovered||b.isLastTabOfType!==a.isLastTabOfType||b.messengerState!==a.messengerState||!b.tab.equals(a.tab)||!b.tabContent.equals(a.tabContent)};d.componentDidMount=function(){var a=function(){b("Bootloader").loadModules(["FantaReducersTabSheets"],h,"FantaTabMainLoader.react")};b("TimeSlice").guard(function(){b("requestIdleCallback")(a)},"additional request not needed for initial display",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};d.render=function(){var a=this.props,c=a.isFocused,d=a.isHovered,e=a.isLastTabOfType,f=a.messengerState,g=a.nonMinimizedRaisedTabCount,h=a.tab,i=a.tabContent,j=a.forGameChat,k=a.messages;a=a.hasFetchedAll;var l=i.showContextBanner,m=i.thread,n=i.threadPreviewID;n=n?h.id+"-"+n:h.id;return!i?b("React").jsx("div",{},"noContent-"+n):b("React").jsx(b("FantaTabMain.react"),{blockedIDs:b("MessengerState.bs").blockedIds(f),fbid:b("MessengerState.bs").fbid(f),forGameChat:j,hasFetchedAll:a,ignoredIds:b("MessengerState.bs").ignoredIds(f),isFocused:c,isHovered:d,isLastGroupTab:e,messages:k,onLoadMoreMessages:this.$1,onSelectSticker:this.$2,onSendHotLike:this.$3,onSendMessage:this.$4,onSendPhoto:this.$5,nonMinimizedRaisedTabCount:g,readReceipts:b("MessengerState.bs").readReceiptsPerThread(f),showContextBanner:l,tab:h,tabContent:i,thread:m},n)};return c}(b("React").Component);a.propTypes={isFocused:(c=b("prop-types")).bool.isRequired,isHovered:c.bool.isRequired,isLastTabOfType:c.bool.isRequired,messengerState:c.array,nonMinimizedRaisedTabCount:c.number,tab:c.object.isRequired,tabContent:c.object};e.exports=a}),null);
__d("XUIBadgeReact.bs",["ReasonReact.bs","XUIBadge.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==void 0)if(a)return"regular";else return"special"}function a(a,c,d,e,f){var h;return b("ReasonReact.bs").wrapJsForReason(b("XUIBadge.react"),{className:(h=b("bs_js_null_undefined")).fromOption(c),count:h.fromOption(d),maxcount:h.fromOption(e),type:h.fromOption(g(a))},f)}f.stringOfBadgeType=g;f.make=a}),null);
__d("FantaM4HeaderMinimized.bs",["cx","fbt","bs_block","bs_curry","React","qex","bs_belt_Set","setTimeout","bs_belt_Option","bs_caml_option","ReasonReact.bs","FantaM4Header.bs","ParticipantId.bs","XUIBadgeReact.bs","ChatThreadName.bs","ChatDetailStack.bs","MercuryThreadInfo","FantaProfilePresence.bs","FantaCloseActionButton.bs","MessengerCustomColorUtils.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponentWithRetainedProps("FantaM4HeaderMinimized");function j(a,c,d,e,f,g,j,k,l,m){__p&&__p();return[i[0],i[1],i[2],i[3],i[4],function(a){var c=a[1];if(!a[0][2][0]&&c[2][0]){b("bs_curry")._1(c[3],0);b("setTimeout")(function(a){return b("bs_curry")._1(c[3],1)},1e3);return 0}else return 0},i[6],i[7],function(i){__p&&__p();var m=b("FantaM4Header.bs").getProfileImages(f,e,g),n=f!==void 0?b("bs_caml_option").valFromOption(f).unread_count:0,o=b("FantaM4Header.bs").getTooltip(f);if(f!==void 0){var p=b("bs_caml_option").valFromOption(f).header_color;p=p==null?b("MessengerCustomColorUtils.bs").defaultColor(0):p}else p=b("MessengerCustomColorUtils.bs").defaultColor(0);var q=a&&i[1][0],r,s=0;q?p!==void 0?r=[0,p,"_69pt _2mgn _6d6l"]:s=1:p!==void 0?r=[2,"","_69pt _6d6l"]:s=1;s===1&&(r=[1,"","_69pt _6d6l"]);var t=r[1];if(f!==void 0){q=b("bs_caml_option").valFromOption(f);p=[q.thread_fbid,q.is_canonical]}else p=[null,!0];var u=p[1],v=p[0];s=b("bs_belt_Option").map(f,function(a){return b("bs_belt_Set").fromArray(a.participants,b("ParticipantId.bs"))});var w=function(a){return 0};if(j)q=null;else{p={children:function(c){var a=b("qex")._("967984");return b("React").createElement(b("FantaProfilePresence.bs").make,{images:m,imageSize:20,isActive:l!==void 0?a:f!==void 0?b("MessengerParticipantUtils.bs").areParticipantsInThread(g,c,b("bs_caml_option").valFromOption(f))&&!k:!1,border:!0,threadHref:"",tooltip:o,backgroundColor:t,showMultiCompany:!1,isCanonical:u,threadFBID:v==null?void 0:b("bs_caml_option").some(v),participants:e,onHeaderClick:w})}};s!==void 0&&(p.subscribeToIDs=b("bs_caml_option").valFromOption(s));q=b("React").createElement(b("MessengerPresenceProvider.bs").make,p)}s=j?h._("New Message"):b("React").createElement(b("ChatThreadName.bs").make,{thread:f,threadHref:"",tooltip:o,viewer:g,className:"_2mgq",isNewMessageTab:j,onHeaderClick:w});p=n>0&&!(a&&i[1][0]);i=b("qex")._("830274");p=p?i?b("React").createElement("div",{className:"_7joc"},b("React").createElement("div",{className:"_7joj"})):b("ReasonReact.bs").element(void 0,void 0,b("XUIBadgeReact.bs").make(0,"_429n",n,99,[])):null;i=b("bs_belt_Option").mapWithDefault(f,!1,function(a){return b("MercuryThreadInfo").isMuted(a)});return b("React").createElement("div",{className:r[2],style:{backgroundColor:t},onClick:d},b("React").createElement("div",{className:"_66n2"},q,b("React").createElement("div",{className:"_66n3"},b("React").createElement(b("ChatDetailStack.bs").make,{topDetail:s,bottomDetail:null}),b("React").createElement("div",{className:"_69ae"},p,i?b("React").createElement("div",{className:"_66n5"},b("React").createElement("i",{className:"_7kxx"})):null,b("React").createElement("div",{className:"_66n5"},b("React").createElement(b("FantaCloseActionButton.bs").make,{iconStyle:r[0],onClose:c,isFocused:!1}))))))},function(a){return[!1]},[a],function(a,c){if(a)return b("bs_block").__(0,[[!1]]);else return b("bs_block").__(0,[[!0]])},i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.highlightNewMessage,a.onClose,a.onHeaderToggle,b("bs_caml_option").nullable_to_opt(a.participants),b("bs_caml_option").nullable_to_opt(a.thread),a.viewer,a.isNewMessageTab,a.isMessengerOnlyUser,b("bs_caml_option").nullable_to_opt(a.pageIndicatorDescription),[])});c=20;d=1e3;f.component=i;f.small_profile_image_size=c;f.blink_threshold_ms=d;f.make=j;f.jsComponent=a}),null);
__d("FantaTabMinimized.react",["cx","fbt","Bootloader","CurrentUser","FantaAvailableStatus","FantaM4HeaderMinimized.bs","FantaTabActions","MercuryIDs","React","ShortProfiles","SimpleXUIDialog"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FantaM4HeaderMinimized.bs").jsComponent;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a=d.props;var c=a.tab;a=a.tabContent;!a||a&&a.composer.text.length===0&&!d.$4()?(d.$5(),b("FantaTabActions").closeTab(c.id)):d.$6()},d.$3=function(a){var c=a.target;c&&c.classList&&!c.classList.contains("button")&&(a.stopPropagation(),b("FantaTabActions").unminimizeTab(d.props.tab.id),b("FantaTabActions").focusTab(d.props.tab.id))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a){var b=this.props;return!b.tab.equals(a.tab)||!b.tabContent&&!!a.tabContent||!!b.tabContent&&!b.tabContent.equals(a.tabContent)};d.$1=function(){var a=this.props.tabContent,c=a&&a.thread,d=b("CurrentUser").getID(),e=a?b("MercuryIDs").getUserIDFromThreadID(a.id):null;e=e?b("ShortProfiles").getNow(e):null;e=e&&e.is_messenger_only;return b("React").jsx("div",{className:"clearfix titlebar",children:b("React").jsx(i,{highlightNewMessage:a&&a.highlightNewMessage,isNewMessageTab:a&&a.isNewMessageTab,onClose:this.$2,onHeaderToggle:this.$3,isMessengerOnlyUser:e,pageIndicatorDescription:a&&a.pageIndicatorDescription,participants:a&&a.participants,thread:c,viewer:d})})};d.render=function(){var a=this.props,c=a.tab;a=a.tabContent;c=c.id;a=a&&!!a.thread&&b("FantaAvailableStatus").isAvailable(a.thread,c);return b("React").jsx("div",{className:"_4cd8 _50mz _50m_ fbNub _50-v"+(a?" _4-0b":"")+" _27_3",ref:"root",children:this.$1()})};d.$5=function(){var a=this.props.tab.id;b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger"],function(b){return b.endFunnel(a)},"FantaTabMinimized.react")};d.$4=function(){return this.$7()||this.$8()};d.$7=function(){var a,b=this.props.tabContent;a=((a=b)!=null?(a=a.composer)!=null?(a=a.fileUploader)!=null?a.uploadedFiles:a:a:a)||{size:0};b=((b=b)!=null?(b=b.composer)!=null?(b=b.fileUploader)!=null?b.uploadingFiles:b:b:b)||{size:0};return a.size>0||b.size>0};d.$8=function(){var a=this.props.tabContent;a=(a=a)!=null?(a=a.composer)!=null?a.sharePreview:a:a;return!!(a&&a.params&&a.type)};d.$6=function(){var a=this.props.tab,c=h._("Are you sure you want to close this chat window?");b("FantaTabActions").blurTab(a.id);var d=h._("You haven't sent your message.");b("SimpleXUIDialog").showConfirm(c,d,function(c){c?b("FantaTabActions").closeTab(a.id):b("FantaTabActions").focusTab(a.id)},{autofocusConfirm:!0,useReactFocusBehavior:!0})};return c}(b("React").Component);c.propTypes={tab:a.object.isRequired,tabContent:a.object};e.exports=c}),null);
__d("FantaTabViewportManager",["Arbiter","DockTabsViewportCalculator","DockTabsViewportFantaTabUtils","FantaTabActions","ifRequired","immutable","isWebMessengerURI","qex","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("qex")._("830597");function a(a){__p&&__p();var c=b("DockTabsViewportCalculator").getInstance(a);if(!c)return;c.registerFantaTabCallbacks({fantaTabModelStateGetter:function(){var a=b("immutable").Map({});b("ifRequired")("FantaAppStore",function(b){a=b.getState().tabGroup.tabs});return a},onAvailableWidthChanged:function(a){var c=g?1:b("DockTabsViewportFantaTabUtils").getTabCountToFitWidth(a),d=function(){b("FantaTabActions").setAllowedRaisedTabs(c)};b("ifRequired")("FantaAppStore",function(a){a=a.getState().tabGroup.allowedRaisedTabs;c!==a&&b("setImmediate")(d)},function(){b("setImmediate")(d)})}});b("Arbiter").subscribe("FantaReducersDockCalculator/shouldRecalculate",function(){c.forceRecalculateChatTabs()});c.forceRecalculateFBDockWidth();b("Arbiter").subscribe("page_transition",function(a,c){b("isWebMessengerURI")(c.uri)&&b("setImmediate")(function(){return b("FantaTabActions").minimizeAllTabs()})})}e.exports={init:a}}),null);
__d("FantaTabsAppBase",["Bootloader","ChatAppActions","ChatAppStore","ChatPerfInstrumentation","CSS","JSLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.init=function(a,c,d){__p&&__p();if(this.isInitialized()){b("JSLogger").create("chat_app").error("repeated_init");return}this.$1=a;this.tabsElem=c;var e=b("ChatAppStore").addListener(function(){var a=b("ChatAppStore").getPreviousState(),c=b("ChatAppStore").getState();a.initialDisplayDone===!1&&c.initialDisplayDone===!0&&(b("ChatPerfInstrumentation").logDisplayDone(),e.remove())});b("ChatPerfInstrumentation").init();this.$2(d);this.initializeFantaData(d.interstitial_data);this.initializeFantaUI();this.$3();b("ChatAppActions").tti();b("ChatPerfInstrumentation").logTTI()};c.isInitialized=function(){return!!b("ChatAppStore").getState().isInitialized};c.isHidden=function(){var a=b("ChatAppStore").getState();return!!(!a.isInitialized||a.isHidden)};c.hide=function(){if(this.isHidden())return;b("CSS").hide(this.$1);b("ChatAppActions").hide()};c.unhide=function(){var a=b("ChatAppStore").getState();a.isInitialized?a.isHidden&&(b("CSS").show(this.$1),d(["Dock"],function(a){a.resizeAllFlyouts()}),b("ChatAppActions").unhide()):a.isLoaded||(d(["UIPagelet"],function(a){a.loadFromEndpoint("ChatTabsPagelet","ChatTabsPagelet"),a.loadFromEndpoint("BuddylistPagelet","BuddylistPagelet")}),b("ChatAppActions").load())};c.initializeFantaData=function(a){};c.initializeFantaUI=function(){};c.$2=function(a){d(["MercuryDeliveryState","MessengerParticipants.bs","MercuryServerPayloadPreprocessor","MessengerState.bs","MercurySyncEnvironment","P2PSendMoneyDialogStore"],function(c,d,e,f,g,h){c.get(),d,g.setUp(),b("ChatPerfInstrumentation").logInitStores(),a.graphql_payload?b("Bootloader").loadModules(["ChatInitialDataTransformer.bs"],function(b){var c=a.graphql_payload;b=b.transform(c);b.message_blocked_ids=c.message_blocked_ids;b.message_ignored_ids=c.message_ignored_ids;b.payload_source=c.payload_source;e.get().handleUpdate(b)},"FantaTabsAppBase"):e.get().handleUpdate(a.initial_data)})};c.$3=function(){d(["HotLikeSound","ChatOptions"],function(a,c){a.setCheckSoundEnabledFunc(function(){return c.getSetting("sound")}),b("ChatPerfInstrumentation").logInitSound()})};return a}();e.exports=a}),null);
__d("FantaTabsReactApp",["ChatPerfInstrumentation","FantaMercuryTabsWithMain.react","FantaTabsAppBase","React","ReactDOM","UserActivity","gkx","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=500,h;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var e=c.prototype;e.initializeFantaData=function(a){__p&&__p();d(["FantaAppStore","FantaCookieUtil","FantaGetMessageActions","FantaTabActions","MercuryThreadInformer","PresenceState"],function(c,d,e,f,i,j){__p&&__p();f.loadFromData(d.convertCookieData(j.get(),null,a)),j.registerStateLoader(function(b){f.loadFromData(d.convertCookieData(b,c.getState().tabGroup,a))}),j.registerStateStorer(function(a){if(!b("UserActivity").isOnTab()&&!b("UserActivity").isActive(g)&&!b("gkx")("678595"))return a;var e=c.getState().tabGroup;if(!h||h&&!h.equals(e)){h=e;return d.createCookieData(e,a)}else return a}),i.get().subscribe("threads-updated",function(a,c){Object.keys(c).forEach(function(a){b("setImmediate")(function(){e.refreshThread(a)})})}),b("ChatPerfInstrumentation").logInitData()})};e.initializeFantaUI=function(){__p&&__p();var a=this;d(["FantaAppStore","FantaMercuryThreadEventsBootloaded","FantaMessageActions","FantaTabActions","FantaTabViewportManager","FBRTCMessageHandler","MercuryBrowserAlerts"],function(c,d,e,f,g,h,i){__p&&__p();h.init();i.init();b("ReactDOM").render(a.getViewComponent(),a.tabsElem);f=function(a,c){b("setImmediate")(function(){e.receivedNewMessage(a,c)})};d.registerForNewLogMessage(f);d.registerForNewMessage(f);g.init(a.tabsElem);b("ChatPerfInstrumentation").logInitUI();h=c.getState().tabGroup.tabs;h.toArray().length===0&&b("ChatPerfInstrumentation").logDisplayDone()})};e.getViewComponent=function(){return b("React").jsx(b("FantaMercuryTabsWithMain.react"),{loadDataOnMount:!1})};return c}(b("FantaTabsAppBase"));e.exports=new a()}),null);
__d("ChatInitialDataTransformer.bs",["bs_js_dict","bs_caml_format","bs_caml_option","MessengerServerPayloadTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.viewer,d=a.is_page,e=[],f=[],g={},h=[],i={},j=[];a.threads.forEach(function(a){__p&&__p();if(a==null)return 0;else{var k,l=(k=b("MessengerServerPayloadTransformer.bs")).getThreadFBID(a),m=k.getOtherUserID(a),n=k.transformThread(c,a,d);e.push(n);k=k.transformMessages(c,a,d);k!==void 0&&k.forEach(function(a){f.push(a);return 0});k=b("MessengerServerPayloadTransformer.bs").getMessagePageInfo(a);k!==void 0&&(b("bs_caml_option").valFromOption(k).has_previous_page||(l==null?m==null||j.push({type:"thread",fbid:m}):j.push({type:"thread",fbid:l})));k=b("MessengerServerPayloadTransformer.bs").transformReadReceipts(c,a);if(k!==void 0){k=b("bs_caml_option").valFromOption(k);l==null||(g[l]=k);m==null||(g[m]=k)}l=b("MessengerServerPayloadTransformer.bs").transformDeliveryReceipts(a);if(l.length!==0){m=l[0];if(n.is_canonical){k=n.other_user_fbid;k==null||h.push({other_user_fbid:k,thread_fbid:null,time:b("bs_caml_format").caml_float_of_string(m.timestamp_precise)})}else{l=n.thread_fbid;l==null||h.push({other_user_fbid:null,thread_fbid:l,time:b("bs_caml_format").caml_float_of_string(m.timestamp_precise)})}}k=b("MessengerServerPayloadTransformer.bs").transformParticipants(a);k.forEach(function(a){i[a.fbid]=a;return 0});return 0}});return{threads:e,actions:f,roger:g,delivery_receipts:h,participants:b("bs_js_dict").values(i),end_of_history:j}}f.transform=a}),null);